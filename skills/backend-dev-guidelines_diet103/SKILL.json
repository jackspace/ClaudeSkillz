{
  "sections": {
    "Quick Start": "### New Backend Feature Checklist\r\n\r\n- [ ] **Route**: Clean definition, delegate to controller\r\n- [ ] **Controller**: Extend BaseController\r\n- [ ] **Service**: Business logic with DI\r\n- [ ] **Repository**: Database access (if complex)\r\n- [ ] **Validation**: Zod schema\r\n- [ ] **Sentry**: Error tracking\r\n- [ ] **Tests**: Unit + integration tests\r\n- [ ] **Config**: Use unifiedConfig\r\n\r\n### New Microservice Checklist\r\n\r\n- [ ] Directory structure (see [architecture-overview.md](architecture-overview.md))\r\n- [ ] instrument.ts for Sentry\r\n- [ ] unifiedConfig setup\r\n- [ ] BaseController class\r\n- [ ] Middleware stack\r\n- [ ] Error boundary\r\n- [ ] Testing framework\r\n\r\n---",
    "Related Skills": "- **database-verification** - Verify column names and schema consistency\r\n- **error-tracking** - Sentry integration patterns\r\n- **skill-developer** - Meta-skill for creating and managing skills\r\n\r\n---\r\n\r\n**Skill Status**: COMPLETE ✅\r\n**Line Count**: < 500 ✅\r\n**Progressive Disclosure**: 11 resource files ✅",
    "Common Imports": "```typescript\r\n// Express\r\nimport express, { Request, Response, NextFunction, Router } from 'express';\r\n\r\n// Validation\r\nimport { z } from 'zod';\r\n\r\n// Database\r\nimport { PrismaClient } from '@prisma/client';\r\nimport type { Prisma } from '@prisma/client';\r\n\r\n// Sentry\r\nimport * as Sentry from '@sentry/node';\r\n\r\n// Config\r\nimport { config } from './config/unifiedConfig';\r\n\r\n// Middleware\r\nimport { SSOMiddlewareClient } from './middleware/SSOMiddleware';\r\nimport { asyncErrorWrapper } from './middleware/errorBoundary';\r\n```\r\n\r\n---",
    "Anti-Patterns to Avoid": "❌ Business logic in routes\r\n❌ Direct process.env usage\r\n❌ Missing error handling\r\n❌ No input validation\r\n❌ Direct Prisma everywhere\r\n❌ console.log instead of Sentry\r\n\r\n---",
    "Navigation Guide": "| Need to... | Read this |\r\n|------------|-----------|\r\n| Understand architecture | [architecture-overview.md](architecture-overview.md) |\r\n| Create routes/controllers | [routing-and-controllers.md](routing-and-controllers.md) |\r\n| Organize business logic | [services-and-repositories.md](services-and-repositories.md) |\r\n| Validate input | [validation-patterns.md](validation-patterns.md) |\r\n| Add error tracking | [sentry-and-monitoring.md](sentry-and-monitoring.md) |\r\n| Create middleware | [middleware-guide.md](middleware-guide.md) |\r\n| Database access | [database-patterns.md](database-patterns.md) |\r\n| Manage config | [configuration.md](configuration.md) |\r\n| Handle async/errors | [async-and-errors.md](async-and-errors.md) |\r\n| Write tests | [testing-guide.md](testing-guide.md) |\r\n| See examples | [complete-examples.md](complete-examples.md) |\r\n\r\n---",
    "Purpose": "Establish consistency and best practices across backend microservices (blog-api, auth-service, notifications-service) using modern Node.js/Express/TypeScript patterns.",
    "Quick Reference": "### HTTP Status Codes\r\n\r\n| Code | Use Case |\r\n|------|----------|\r\n| 200 | Success |\r\n| 201 | Created |\r\n| 400 | Bad Request |\r\n| 401 | Unauthorized |\r\n| 403 | Forbidden |\r\n| 404 | Not Found |\r\n| 500 | Server Error |\r\n\r\n### Service Templates\r\n\r\n**Blog API** (✅ Mature) - Use as template for REST APIs\r\n**Auth Service** (✅ Mature) - Use as template for authentication patterns\r\n\r\n---",
    "When to Use This Skill": "Automatically activates when working on:\r\n- Creating or modifying routes, endpoints, APIs\r\n- Building controllers, services, repositories\r\n- Implementing middleware (auth, validation, error handling)\r\n- Database operations with Prisma\r\n- Error tracking with Sentry\r\n- Input validation with Zod\r\n- Configuration management\r\n- Backend testing and refactoring\r\n\r\n---",
    "Core Principles (7 Key Rules)": "### 1. Routes Only Route, Controllers Control\r\n\r\n```typescript\r\n// ❌ NEVER: Business logic in routes\r\nrouter.post('/submit', async (req, res) => {\r\n    // 200 lines of logic\r\n});\r\n\r\n// ✅ ALWAYS: Delegate to controller\r\nrouter.post('/submit', (req, res) => controller.submit(req, res));\r\n```\r\n\r\n### 2. All Controllers Extend BaseController\r\n\r\n```typescript\r\nexport class UserController extends BaseController {\r\n    async getUser(req: Request, res: Response): Promise<void> {\r\n        try {\r\n            const user = await this.userService.findById(req.params.id);\r\n            this.handleSuccess(res, user);\r\n        } catch (error) {\r\n            this.handleError(error, res, 'getUser');\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### 3. All Errors to Sentry\r\n\r\n```typescript\r\ntry {\r\n    await operation();\r\n} catch (error) {\r\n    Sentry.captureException(error);\r\n    throw error;\r\n}\r\n```\r\n\r\n### 4. Use unifiedConfig, NEVER process.env\r\n\r\n```typescript\r\n// ❌ NEVER\r\nconst timeout = process.env.TIMEOUT_MS;\r\n\r\n// ✅ ALWAYS\r\nimport { config } from './config/unifiedConfig';\r\nconst timeout = config.timeouts.default;\r\n```\r\n\r\n### 5. Validate All Input with Zod\r\n\r\n```typescript\r\nconst schema = z.object({ email: z.string().email() });\r\nconst validated = schema.parse(req.body);\r\n```\r\n\r\n### 6. Use Repository Pattern for Data Access\r\n\r\n```typescript\r\n// Service → Repository → Database\r\nconst users = await userRepository.findActive();\r\n```\r\n\r\n### 7. Comprehensive Testing Required\r\n\r\n```typescript\r\ndescribe('UserService', () => {\r\n    it('should create user', async () => {\r\n        expect(user).toBeDefined();\r\n    });\r\n});\r\n```\r\n\r\n---",
    "Resource Files": "### [architecture-overview.md](architecture-overview.md)\r\nLayered architecture, request lifecycle, separation of concerns\r\n\r\n### [routing-and-controllers.md](routing-and-controllers.md)\r\nRoute definitions, BaseController, error handling, examples\r\n\r\n### [services-and-repositories.md](services-and-repositories.md)\r\nService patterns, DI, repository pattern, caching\r\n\r\n### [validation-patterns.md](validation-patterns.md)\r\nZod schemas, validation, DTO pattern\r\n\r\n### [sentry-and-monitoring.md](sentry-and-monitoring.md)\r\nSentry init, error capture, performance monitoring\r\n\r\n### [middleware-guide.md](middleware-guide.md)\r\nAuth, audit, error boundaries, AsyncLocalStorage\r\n\r\n### [database-patterns.md](database-patterns.md)\r\nPrismaService, repositories, transactions, optimization\r\n\r\n### [configuration.md](configuration.md)\r\nUnifiedConfig, environment configs, secrets\r\n\r\n### [async-and-errors.md](async-and-errors.md)\r\nAsync patterns, custom errors, asyncErrorWrapper\r\n\r\n### [testing-guide.md](testing-guide.md)\r\nUnit/integration tests, mocking, coverage\r\n\r\n### [complete-examples.md](complete-examples.md)\r\nFull examples, refactoring guide\r\n\r\n---",
    "Directory Structure": "```\r\nservice/src/\r\n├── config/              # UnifiedConfig\r\n├── controllers/         # Request handlers\r\n├── services/            # Business logic\r\n├── repositories/        # Data access\r\n├── routes/              # Route definitions\r\n├── middleware/          # Express middleware\r\n├── types/               # TypeScript types\r\n├── validators/          # Zod schemas\r\n├── utils/               # Utilities\r\n├── tests/               # Tests\r\n├── instrument.ts        # Sentry (FIRST IMPORT)\r\n├── app.ts               # Express setup\r\n└── server.ts            # HTTP server\r\n```\r\n\r\n**Naming Conventions:**\r\n- Controllers: `PascalCase` - `UserController.ts`\r\n- Services: `camelCase` - `userService.ts`\r\n- Routes: `camelCase + Routes` - `userRoutes.ts`\r\n- Repositories: `PascalCase + Repository` - `UserRepository.ts`\r\n\r\n---",
    "Architecture Overview": "### Layered Architecture\r\n\r\n```\r\nHTTP Request\r\n    ↓\r\nRoutes (routing only)\r\n    ↓\r\nControllers (request handling)\r\n    ↓\r\nServices (business logic)\r\n    ↓\r\nRepositories (data access)\r\n    ↓\r\nDatabase (Prisma)\r\n```\r\n\r\n**Key Principle:** Each layer has ONE responsibility.\r\n\r\nSee [architecture-overview.md](architecture-overview.md) for complete details.\r\n\r\n---"
  },
  "id": "backend-dev-guidelines_diet103",
  "name": "backend-dev-guidelines",
  "description": "Comprehensive backend development guide for Node.js/Express/TypeScript microservices. Use when creating routes, controllers, services, repositories, middleware, or working with Express APIs, Prisma database access, Sentry error tracking, Zod validation, unifiedConfig, dependency injection, or async patterns. Covers layered architecture (routes → controllers → services → repositories), BaseController pattern, error handling, performance monitoring, testing strategies, and migration from legacy patterns."
}