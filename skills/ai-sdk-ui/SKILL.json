{
  "description": "|",
  "metadata": {
    "license": "MIT"
  },
  "references": {
    "files": [
      "references/links-to-official-docs.md",
      "references/nextjs-integration.md",
      "references/streaming-patterns.md",
      "references/top-ui-errors.md",
      "references/use-chat-migration.md"
    ]
  },
  "content": "Frontend React hooks for AI-powered user interfaces with Vercel AI SDK v5.\r\n\r\n**Version**: AI SDK v5.0.76+ (Stable)\r\n**Framework**: React 18+, Next.js 14+\r\n**Last Updated**: 2025-10-22\r\n\r\n---",
  "name": "ai-sdk-ui",
  "id": "ai-sdk-ui",
  "sections": {
    "Package Versions": "**Required:**\r\n```json\r\n{\r\n  \"dependencies\": {\r\n    \"ai\": \"^5.0.76\",\r\n    \"@ai-sdk/openai\": \"^2.0.53\",\r\n    \"react\": \"^18.2.0\",\r\n    \"zod\": \"^3.23.8\"\r\n  }\r\n}\r\n```\r\n\r\n**Next.js:**\r\n```json\r\n{\r\n  \"dependencies\": {\r\n    \"next\": \"^14.0.0\",\r\n    \"react\": \"^18.2.0\",\r\n    \"react-dom\": \"^18.2.0\"\r\n  }\r\n}\r\n```\r\n\r\n**Version Notes:**\r\n- AI SDK v5.0.76+ (stable)\r\n- React 18+ (React 19 supported)\r\n- Next.js 14+ recommended (13.4+ works)\r\n- Zod 3.23.8+ for schema validation\r\n\r\n---",
    "Streaming Best Practices": "### Performance\r\n\r\n**Always use streaming for better UX:**\r\n```tsx\r\n// ✅ GOOD - Streaming (shows tokens as they arrive)\r\nconst { messages } = useChat({ api: '/api/chat' });\r\n\r\n// ❌ BAD - Non-streaming (user waits for full response)\r\nconst response = await fetch('/api/chat', { method: 'POST' });\r\n```\r\n\r\n### UX Patterns\r\n\r\n**Show loading states:**\r\n```tsx\r\n{isLoading && <div>AI is typing...</div>}\r\n```\r\n\r\n**Provide stop button:**\r\n```tsx\r\n{isLoading && <button onClick={stop}>Stop</button>}\r\n```\r\n\r\n**Auto-scroll to latest message:**\r\n```tsx\r\nuseEffect(() => {\r\n  messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n}, [messages]);\r\n```\r\n\r\n**Disable input while loading:**\r\n```tsx\r\n<input disabled={isLoading} />\r\n```\r\n\r\nSee `references/streaming-patterns.md` for comprehensive best practices.\r\n\r\n---",
    "useObject Hook - Complete Reference": "### Basic Usage\r\n\r\nStream structured data (e.g., forms, JSON objects) with live updates:\r\n\r\n```tsx\r\n'use client';\r\nimport { useObject } from 'ai/react';\r\nimport { z } from 'zod';\r\n\r\nconst recipeSchema = z.object({\r\n  recipe: z.object({\r\n    name: z.string(),\r\n    ingredients: z.array(z.string()),\r\n    instructions: z.array(z.string()),\r\n  }),\r\n});\r\n\r\nexport default function RecipeGenerator() {\r\n  const { object, submit, isLoading, error } = useObject({\r\n    api: '/api/recipe',\r\n    schema: recipeSchema,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={() => submit('pasta carbonara')} disabled={isLoading}>\r\n        Generate Recipe\r\n      </button>\r\n\r\n      {isLoading && <div>Generating recipe...</div>}\r\n\r\n      {object?.recipe && (\r\n        <div className=\"mt-4\">\r\n          <h2 className=\"text-2xl font-bold\">{object.recipe.name}</h2>\r\n\r\n          <h3 className=\"text-xl mt-4\">Ingredients:</h3>\r\n          <ul>\r\n            {object.recipe.ingredients?.map((ingredient, idx) => (\r\n              <li key={idx}>{ingredient}</li>\r\n            ))}\r\n          </ul>\r\n\r\n          <h3 className=\"text-xl mt-4\">Instructions:</h3>\r\n          <ol>\r\n            {object.recipe.instructions?.map((step, idx) => (\r\n              <li key={idx}>{step}</li>\r\n            ))}\r\n          </ol>\r\n        </div>\r\n      )}\r\n\r\n      {error && <div className=\"text-red-500\">{error.message}</div>}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### Full API Reference\r\n\r\n```typescript\r\nconst {\r\n  object,             // Partial<T> - Partial object (updates as stream progresses)\r\n  submit,             // (input: string) => void - Trigger generation\r\n  isLoading,          // boolean - Is generating?\r\n  error,              // Error | undefined - Error if any\r\n  stop,               // () => void - Stop generation\r\n} = useObject({\r\n  api: '/api/object',\r\n  schema: zodSchema,  // Zod schema\r\n\r\n  // Callbacks\r\n  onFinish: (object) => {},\r\n  onError: (error) => {},\r\n});\r\n```\r\n\r\n### API Route for useObject\r\n\r\n```typescript\r\n// app/api/recipe/route.ts\r\nimport { streamObject } from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\nimport { z } from 'zod';\r\n\r\nexport async function POST(req: Request) {\r\n  const { prompt } = await req.json();\r\n\r\n  const result = streamObject({\r\n    model: openai('gpt-4'),\r\n    schema: z.object({\r\n      recipe: z.object({\r\n        name: z.string(),\r\n        ingredients: z.array(z.string()),\r\n        instructions: z.array(z.string()),\r\n      }),\r\n    }),\r\n    prompt: `Generate a recipe for ${prompt}`,\r\n  });\r\n\r\n  return result.toTextStreamResponse();\r\n}\r\n```\r\n\r\n---",
    "When to Use This Skill": "### Use ai-sdk-ui When:\r\n- Building React chat interfaces\r\n- Implementing AI completions in UI\r\n- Streaming AI responses to frontend\r\n- Building Next.js AI applications\r\n- Handling chat message state\r\n- Displaying tool calls in UI\r\n- Managing file attachments with AI\r\n- Migrating from v4 to v5 (UI hooks)\r\n- Encountering useChat/useCompletion errors\r\n\r\n### Don't Use When:\r\n- Need backend AI functionality → Use **ai-sdk-core** instead\r\n- Building non-React frontends (Svelte, Vue) → Check official docs\r\n- Need Generative UI / RSC → See https://ai-sdk.dev/docs/ai-sdk-rsc\r\n- Building native apps → Different SDK required\r\n\r\n### Related Skills:\r\n- **ai-sdk-core** - Backend text generation, structured output, tools, agents\r\n- Compose both for full-stack AI applications\r\n\r\n---",
    "Templates": "This skill includes the following templates in `templates/`:\r\n\r\n1. **use-chat-basic.tsx** - Basic chat with manual input (v5 pattern)\r\n2. **use-chat-tools.tsx** - Chat with tool calling UI rendering\r\n3. **use-chat-attachments.tsx** - File attachments support\r\n4. **use-completion-basic.tsx** - Basic text completion\r\n5. **use-object-streaming.tsx** - Streaming structured data\r\n6. **nextjs-chat-app-router.tsx** - Next.js App Router complete example\r\n7. **nextjs-chat-pages-router.tsx** - Next.js Pages Router complete example\r\n8. **nextjs-api-route.ts** - API route for both App and Pages Router\r\n9. **message-persistence.tsx** - Save/load chat history\r\n10. **custom-message-renderer.tsx** - Custom message components with markdown\r\n11. **package.json** - Dependencies template",
    "Reference Documents": "See `references/` for:\r\n\r\n- **use-chat-migration.md** - Complete v4→v5 migration guide\r\n- **streaming-patterns.md** - UI streaming best practices\r\n- **top-ui-errors.md** - 12 common UI errors with solutions\r\n- **nextjs-integration.md** - Next.js setup patterns\r\n- **links-to-official-docs.md** - Organized links to official docs\r\n\r\n---\r\n\r\n**Production Tested**: WordPress Auditor (https://wordpress-auditor.webfonts.workers.dev)\r\n**Last Updated**: 2025-10-22",
    "Top UI Errors & Solutions": "See `references/top-ui-errors.md` for complete documentation. Quick reference:\r\n\r\n### 1. useChat Failed to Parse Stream\r\n\r\n**Error**: `SyntaxError: Unexpected token in JSON at position X`\r\n\r\n**Cause**: API route not returning proper stream format.\r\n\r\n**Solution**:\r\n```typescript\r\n// ✅ CORRECT\r\nreturn result.toDataStreamResponse();\r\n\r\n// ❌ WRONG\r\nreturn new Response(result.textStream);\r\n```\r\n\r\n### 2. useChat No Response\r\n\r\n**Cause**: API route not streaming correctly.\r\n\r\n**Solution**:\r\n```typescript\r\n// App Router - use toDataStreamResponse()\r\nexport async function POST(req: Request) {\r\n  const result = streamText({ /* ... */ });\r\n  return result.toDataStreamResponse(); // ✅\r\n}\r\n\r\n// Pages Router - use pipeDataStreamToResponse()\r\nexport default async function handler(req, res) {\r\n  const result = streamText({ /* ... */ });\r\n  return result.pipeDataStreamToResponse(res); // ✅\r\n}\r\n```\r\n\r\n### 3. Streaming Not Working When Deployed\r\n\r\n**Cause**: Deployment platform buffering responses.\r\n\r\n**Solution**: Vercel auto-detects streaming. Other platforms may need configuration.\r\n\r\n### 4. Stale Body Values with useChat\r\n\r\n**Cause**: `body` option captured at first render only.\r\n\r\n**Solution**:\r\n```typescript\r\n// ❌ WRONG - body captured once\r\nconst { userId } = useUser();\r\nconst { messages } = useChat({\r\n  body: { userId },  // Stale!\r\n});\r\n\r\n// ✅ CORRECT - use controlled mode\r\nconst { userId } = useUser();\r\nconst { messages, sendMessage } = useChat();\r\n\r\nsendMessage({\r\n  content: input,\r\n  data: { userId },  // Fresh on each send\r\n});\r\n```\r\n\r\n### 5. React Maximum Update Depth\r\n\r\n**Cause**: Infinite loop in useEffect.\r\n\r\n**Solution**:\r\n```typescript\r\n// ❌ WRONG\r\nuseEffect(() => {\r\n  saveMessages(messages);\r\n}, [messages, saveMessages]); // saveMessages triggers re-render!\r\n\r\n// ✅ CORRECT\r\nuseEffect(() => {\r\n  saveMessages(messages);\r\n}, [messages]); // Only depend on messages\r\n```\r\n\r\nSee `references/top-ui-errors.md` for 7 more common errors.\r\n\r\n---",
    "useChat Hook - Complete Reference": "### Basic Usage (v5 Pattern)\r\n\r\n```tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\nimport { useState, FormEvent } from 'react';\r\n\r\nexport default function ChatComponent() {\r\n  const { messages, sendMessage, isLoading, error } = useChat({\r\n    api: '/api/chat',\r\n  });\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    sendMessage({ content: input });\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {messages.map(message => (\r\n          <div\r\n            key={message.id}\r\n            className={message.role === 'user' ? 'text-right' : 'text-left'}\r\n          >\r\n            <div className=\"inline-block p-2 rounded bg-gray-100\">\r\n              {message.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {isLoading && <div className=\"text-gray-500\">AI is thinking...</div>}\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <form onSubmit={handleSubmit} className=\"p-4 border-t\">\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message...\"\r\n          disabled={isLoading}\r\n          className=\"w-full p-2 border rounded\"\r\n        />\r\n      </form>\r\n\r\n      {/* Error */}\r\n      {error && <div className=\"text-red-500 p-4\">{error.message}</div>}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### Full API Reference\r\n\r\n```typescript\r\nconst {\r\n  // Messages\r\n  messages,           // Message[] - Chat history\r\n  setMessages,        // (messages: Message[]) => void - Update messages\r\n\r\n  // Actions\r\n  sendMessage,        // (message: { content: string }) => void - Send message (v5)\r\n  reload,             // () => void - Reload last response\r\n  stop,               // () => void - Stop current generation\r\n\r\n  // State\r\n  isLoading,          // boolean - Is AI responding?\r\n  error,              // Error | undefined - Error if any\r\n\r\n  // Data\r\n  data,               // any[] - Custom data from stream\r\n  metadata,           // object - Response metadata\r\n} = useChat({\r\n  // Required\r\n  api: '/api/chat',   // API endpoint\r\n\r\n  // Optional\r\n  id: 'chat-1',       // Chat ID for persistence\r\n  initialMessages: [], // Initial messages (controlled mode)\r\n\r\n  // Callbacks\r\n  onFinish: (message, options) => {},  // Called when response completes\r\n  onError: (error) => {},              // Called on error\r\n\r\n  // Configuration\r\n  headers: {},        // Custom headers\r\n  body: {},           // Additional body data\r\n  credentials: 'same-origin', // Fetch credentials\r\n\r\n  // Streaming\r\n  streamProtocol: 'data', // 'data' | 'text' (default: 'data')\r\n});\r\n```\r\n\r\n### v4 → v5 Breaking Changes\r\n\r\n**CRITICAL: useChat no longer manages input state in v5!**\r\n\r\n**v4 (OLD - DON'T USE):**\r\n```tsx\r\nconst { messages, input, handleInputChange, handleSubmit, append } = useChat();\r\n\r\n<form onSubmit={handleSubmit}>\r\n  <input value={input} onChange={handleInputChange} />\r\n</form>\r\n```\r\n\r\n**v5 (NEW - CORRECT):**\r\n```tsx\r\nconst { messages, sendMessage } = useChat();\r\nconst [input, setInput] = useState('');\r\n\r\n<form onSubmit={(e) => {\r\n  e.preventDefault();\r\n  sendMessage({ content: input });\r\n  setInput('');\r\n}}>\r\n  <input value={input} onChange={(e) => setInput(e.target.value)} />\r\n</form>\r\n```\r\n\r\n**Summary of v5 Changes:**\r\n1. **Input management removed**: `input`, `handleInputChange`, `handleSubmit` no longer exist\r\n2. **`append()` → `sendMessage()`**: New method for sending messages\r\n3. **`onResponse` removed**: Use `onFinish` instead\r\n4. **`initialMessages` → controlled mode**: Use `messages` prop for full control\r\n5. **`maxSteps` removed**: Handle on server-side only\r\n\r\nSee `references/use-chat-migration.md` for complete migration guide.\r\n\r\n### Tool Calling in UI\r\n\r\nWhen your API uses tools, useChat automatically handles tool invocations in the message stream:\r\n\r\n```tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\n\r\nexport default function ChatWithTools() {\r\n  const { messages } = useChat({ api: '/api/chat' });\r\n\r\n  return (\r\n    <div>\r\n      {messages.map(message => (\r\n        <div key={message.id}>\r\n          {/* Text content */}\r\n          {message.content && <p>{message.content}</p>}\r\n\r\n          {/* Tool invocations */}\r\n          {message.toolInvocations?.map((tool, idx) => (\r\n            <div key={idx} className=\"bg-blue-50 p-2 rounded my-2\">\r\n              <div className=\"font-bold\">Tool: {tool.toolName}</div>\r\n              <div className=\"text-sm\">\r\n                <strong>Args:</strong> {JSON.stringify(tool.args, null, 2)}\r\n              </div>\r\n              {tool.result && (\r\n                <div className=\"text-sm\">\r\n                  <strong>Result:</strong> {JSON.stringify(tool.result, null, 2)}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### File Attachments\r\n\r\nUpload files (images, PDFs, etc.) alongside messages:\r\n\r\n```tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\nimport { useState, FormEvent } from 'react';\r\n\r\nexport default function ChatWithAttachments() {\r\n  const { messages, sendMessage, isLoading } = useChat({ api: '/api/chat' });\r\n  const [input, setInput] = useState('');\r\n  const [files, setFiles] = useState<FileList | null>(null);\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    sendMessage({\r\n      content: input,\r\n      experimental_attachments: files\r\n        ? Array.from(files).map(file => ({\r\n            name: file.name,\r\n            contentType: file.type,\r\n            url: URL.createObjectURL(file),\r\n          }))\r\n        : undefined,\r\n    });\r\n\r\n    setInput('');\r\n    setFiles(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Messages */}\r\n      {messages.map(m => (\r\n        <div key={m.id}>\r\n          {m.content}\r\n          {m.experimental_attachments?.map((att, idx) => (\r\n            <div key={idx}>\r\n              <img src={att.url} alt={att.name} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n\r\n      {/* Input */}\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          onChange={(e) => setFiles(e.target.files)}\r\n          accept=\"image/*\"\r\n        />\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n        />\r\n        <button type=\"submit\" disabled={isLoading}>Send</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### Message Persistence\r\n\r\nSave and load chat history to localStorage:\r\n\r\n```tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function PersistentChat() {\r\n  const chatId = 'my-chat-1';\r\n\r\n  const { messages, setMessages, sendMessage } = useChat({\r\n    api: '/api/chat',\r\n    id: chatId,\r\n    initialMessages: loadMessages(chatId),\r\n  });\r\n\r\n  // Save messages whenever they change\r\n  useEffect(() => {\r\n    saveMessages(chatId, messages);\r\n  }, [messages, chatId]);\r\n\r\n  return (\r\n    <div>\r\n      {messages.map(m => (\r\n        <div key={m.id}>{m.role}: {m.content}</div>\r\n      ))}\r\n      {/* Input form... */}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper functions\r\nfunction loadMessages(chatId: string) {\r\n  const stored = localStorage.getItem(`chat-${chatId}`);\r\n  return stored ? JSON.parse(stored) : [];\r\n}\r\n\r\nfunction saveMessages(chatId: string, messages: any[]) {\r\n  localStorage.setItem(`chat-${chatId}`, JSON.stringify(messages));\r\n}\r\n```\r\n\r\n---",
    "Quick Start (5 Minutes)": "### Installation\r\n\r\n```bash\r\nnpm install ai @ai-sdk/openai\r\n```\r\n\r\n### Basic Chat Component (v5)\r\n\r\n```tsx\r\n// app/chat/page.tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\nimport { useState, FormEvent } from 'react';\r\n\r\nexport default function Chat() {\r\n  const { messages, sendMessage, isLoading } = useChat({\r\n    api: '/api/chat',\r\n  });\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    sendMessage({ content: input });\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {messages.map(m => (\r\n          <div key={m.id}>\r\n            <strong>{m.role}:</strong> {m.content}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message...\"\r\n          disabled={isLoading}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### API Route (Next.js App Router)\r\n\r\n```typescript\r\n// app/api/chat/route.ts\r\nimport { streamText } from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\n\r\nexport async function POST(req: Request) {\r\n  const { messages } = await req.json();\r\n\r\n  const result = streamText({\r\n    model: openai('gpt-4-turbo'),\r\n    messages,\r\n  });\r\n\r\n  return result.toDataStreamResponse();\r\n}\r\n```\r\n\r\n**Result**: A functional chat interface with streaming AI responses in ~10 lines of frontend code.\r\n\r\n---",
    "Next.js Integration": "### App Router Complete Example\r\n\r\n**Directory Structure:**\r\n```\r\napp/\r\n├── api/\r\n│   └── chat/\r\n│       └── route.ts      # Chat API endpoint\r\n├── chat/\r\n│   └── page.tsx          # Chat page\r\n└── layout.tsx\r\n```\r\n\r\n**Chat Page:**\r\n```tsx\r\n// app/chat/page.tsx\r\n'use client';\r\nimport { useChat } from 'ai/react';\r\nimport { useState, FormEvent, useRef, useEffect } from 'react';\r\n\r\nexport default function ChatPage() {\r\n  const { messages, sendMessage, isLoading, error } = useChat({\r\n    api: '/api/chat',\r\n  });\r\n  const [input, setInput] = useState('');\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Auto-scroll to bottom\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    sendMessage({ content: input });\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen max-w-2xl mx-auto\">\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map(message => (\r\n          <div\r\n            key={message.id}\r\n            className={`flex ${\r\n              message.role === 'user' ? 'justify-end' : 'justify-start'\r\n            }`}\r\n          >\r\n            <div\r\n              className={`max-w-[70%] p-3 rounded-lg ${\r\n                message.role === 'user'\r\n                  ? 'bg-blue-500 text-white'\r\n                  : 'bg-gray-200 text-gray-900'\r\n              }`}\r\n            >\r\n              {message.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {isLoading && (\r\n          <div className=\"flex justify-start\">\r\n            <div className=\"bg-gray-200 p-3 rounded-lg\">\r\n              <div className=\"flex space-x-2\">\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"></div>\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-100\"></div>\r\n                <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-200\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Error */}\r\n      {error && (\r\n        <div className=\"p-4 bg-red-50 border-t border-red-200 text-red-700\">\r\n          Error: {error.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Input */}\r\n      <form onSubmit={handleSubmit} className=\"p-4 border-t\">\r\n        <div className=\"flex space-x-2\">\r\n          <input\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            placeholder=\"Type a message...\"\r\n            disabled={isLoading}\r\n            className=\"flex-1 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading || !input.trim()}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n          >\r\n            Send\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n**API Route:**\r\n```typescript\r\n// app/api/chat/route.ts\r\nimport { streamText } from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\n\r\nexport async function POST(req: Request) {\r\n  const { messages } = await req.json();\r\n\r\n  const result = streamText({\r\n    model: openai('gpt-4-turbo'),\r\n    messages,\r\n    system: 'You are a helpful AI assistant.',\r\n    maxOutputTokens: 1000,\r\n  });\r\n\r\n  return result.toDataStreamResponse();\r\n}\r\n```\r\n\r\n### Pages Router Complete Example\r\n\r\n**Directory Structure:**\r\n```\r\npages/\r\n├── api/\r\n│   └── chat.ts           # Chat API endpoint\r\n└── chat.tsx              # Chat page\r\n```\r\n\r\n**Chat Page:**\r\n```tsx\r\n// pages/chat.tsx\r\nimport { useChat } from 'ai/react';\r\nimport { useState, FormEvent } from 'react';\r\n\r\nexport default function ChatPage() {\r\n  const { messages, sendMessage, isLoading } = useChat({\r\n    api: '/api/chat',\r\n  });\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    sendMessage({ content: input });\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">AI Chat</h1>\r\n\r\n      <div className=\"border rounded p-4 h-96 overflow-y-auto mb-4\">\r\n        {messages.map(m => (\r\n          <div key={m.id} className=\"mb-4\">\r\n            <strong>{m.role === 'user' ? 'You' : 'AI'}:</strong> {m.content}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"flex space-x-2\">\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message...\"\r\n          disabled={isLoading}\r\n          className=\"flex-1 p-2 border rounded\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isLoading}\r\n          className=\"px-4 py-2 bg-blue-500 text-white rounded\"\r\n        >\r\n          Send\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n**API Route:**\r\n```typescript\r\n// pages/api/chat.ts\r\nimport type { NextApiRequest, NextApiResponse } from 'next';\r\nimport { streamText } from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\n\r\nexport default async function handler(\r\n  req: NextApiRequest,\r\n  res: NextApiResponse\r\n) {\r\n  const { messages } = req.body;\r\n\r\n  const result = streamText({\r\n    model: openai('gpt-4-turbo'),\r\n    messages,\r\n  });\r\n\r\n  // Pages Router uses pipeDataStreamToResponse\r\n  return result.pipeDataStreamToResponse(res);\r\n}\r\n```\r\n\r\n**Key Difference**: App Router uses `toDataStreamResponse()`, Pages Router uses `pipeDataStreamToResponse()`.\r\n\r\n---",
    "Links to Official Documentation": "**Core UI Hooks:**\r\n- AI SDK UI Overview: https://ai-sdk.dev/docs/ai-sdk-ui/overview\r\n- useChat: https://ai-sdk.dev/docs/ai-sdk-ui/chatbot\r\n- useCompletion: https://ai-sdk.dev/docs/ai-sdk-ui/completion\r\n- useObject: https://ai-sdk.dev/docs/ai-sdk-ui/object-generation\r\n\r\n**Advanced Topics (Link Only):**\r\n- Generative UI (RSC): https://ai-sdk.dev/docs/ai-sdk-rsc/overview\r\n- Stream Protocols: https://ai-sdk.dev/docs/ai-sdk-ui/stream-protocols\r\n- Message Metadata: https://ai-sdk.dev/docs/ai-sdk-ui/message-metadata\r\n\r\n**Next.js Integration:**\r\n- Next.js App Router: https://ai-sdk.dev/docs/getting-started/nextjs-app-router\r\n- Next.js Pages Router: https://ai-sdk.dev/docs/getting-started/nextjs-pages-router\r\n\r\n**Migration & Troubleshooting:**\r\n- v4→v5 Migration: https://ai-sdk.dev/docs/migration-guides/migration-guide-5-0\r\n- Troubleshooting: https://ai-sdk.dev/docs/troubleshooting\r\n- Common Issues: https://ai-sdk.dev/docs/troubleshooting/common-issues\r\n\r\n**Vercel Deployment:**\r\n- Vercel Functions: https://vercel.com/docs/functions\r\n- Streaming on Vercel: https://vercel.com/docs/functions/streaming\r\n\r\n---",
    "useCompletion Hook - Complete Reference": "### Basic Usage\r\n\r\n```tsx\r\n'use client';\r\nimport { useCompletion } from 'ai/react';\r\nimport { useState, FormEvent } from 'react';\r\n\r\nexport default function Completion() {\r\n  const { completion, complete, isLoading, error } = useCompletion({\r\n    api: '/api/completion',\r\n  });\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    complete(input);\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Enter a prompt...\"\r\n          rows={4}\r\n          className=\"w-full p-2 border rounded\"\r\n        />\r\n        <button type=\"submit\" disabled={isLoading}>\r\n          {isLoading ? 'Generating...' : 'Generate'}\r\n        </button>\r\n      </form>\r\n\r\n      {completion && (\r\n        <div className=\"mt-4 p-4 bg-gray-50 rounded\">\r\n          <h3>Result:</h3>\r\n          <p>{completion}</p>\r\n        </div>\r\n      )}\r\n\r\n      {error && <div className=\"text-red-500\">{error.message}</div>}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n### Full API Reference\r\n\r\n```typescript\r\nconst {\r\n  completion,         // string - Current completion text\r\n  complete,           // (prompt: string) => void - Trigger completion\r\n  setCompletion,      // (completion: string) => void - Update completion\r\n  isLoading,          // boolean - Is generating?\r\n  error,              // Error | undefined - Error if any\r\n  stop,               // () => void - Stop generation\r\n} = useCompletion({\r\n  api: '/api/completion',\r\n  id: 'completion-1',\r\n\r\n  // Callbacks\r\n  onFinish: (prompt, completion) => {},\r\n  onError: (error) => {},\r\n\r\n  // Configuration\r\n  headers: {},\r\n  body: {},\r\n});\r\n```\r\n\r\n### API Route for useCompletion\r\n\r\n```typescript\r\n// app/api/completion/route.ts\r\nimport { streamText } from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\n\r\nexport async function POST(req: Request) {\r\n  const { prompt } = await req.json();\r\n\r\n  const result = streamText({\r\n    model: openai('gpt-3.5-turbo'),\r\n    prompt,\r\n    maxOutputTokens: 500,\r\n  });\r\n\r\n  return result.toDataStreamResponse();\r\n}\r\n```\r\n\r\n---"
  }
}