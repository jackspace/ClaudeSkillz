{
  "description": "Complete browser automation with Playwright. Auto-detects dev servers, writes clean test scripts to /tmp. Test pages, fill forms, take screenshots, check responsive design, validate UX, test login flows, check links, automate any browser task. Use when user wants to test websites, automate browser interactions, validate web functionality, or perform any browser-based testing.",
  "metadata": {
    "version": "4.0.0",
    "author": "Claude Assistant",
    "tags": "[testing, automation, browser, e2e, playwright, web-testing]"
  },
  "content": "General-purpose browser automation skill. I'll write custom Playwright code for any automation task you request and execute it via the universal executor.\r\n\r\n**CRITICAL WORKFLOW - Follow these steps in order:**\r\n\r\n1. **Auto-detect dev servers** - For localhost testing, ALWAYS run server detection FIRST:\r\n   ```bash\r\n   cd $SKILL_DIR && node -e \"require('./lib/helpers').detectDevServers().then(servers => console.log(JSON.stringify(servers)))\"\r\n   ```\r\n   - If **1 server found**: Use it automatically, inform user\r\n   - If **multiple servers found**: Ask user which one to test\r\n   - If **no servers found**: Ask for URL or offer to help start dev server\r\n\r\n2. **Write scripts to /tmp** - NEVER write test files to skill directory; always use `/tmp/playwright-test-*.js`\r\n\r\n3. **Use visible browser by default** - Always use `headless: false` unless user specifically requests headless mode\r\n\r\n4. **Parameterize URLs** - Always make URLs configurable via environment variable or constant at top of script\r\n\r\n\r\nFor quick one-off tasks, you can execute code inline without creating files:\r\n\r\n```bash",
  "name": "Playwright Browser Automation",
  "id": "playwright-skill_playwright",
  "sections": {
    "Execution Pattern": "**Step 1: Detect dev servers (for localhost testing)**\r\n\r\n```bash\r\ncd $SKILL_DIR && node -e \"require('./lib/helpers').detectDevServers().then(s => console.log(JSON.stringify(s)))\"\r\n```\r\n\r\n**Step 2: Write test script to /tmp with URL parameter**\r\n\r\n```javascript\r\n// /tmp/playwright-test-page.js\r\nconst { chromium } = require('playwright');\r\n\r\n// Parameterized URL (detected or user-provided)\r\nconst TARGET_URL = 'http://localhost:3001'; // <-- Auto-detected or from user\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false });\r\n  const page = await browser.newPage();\r\n\r\n  await page.goto(TARGET_URL);\r\n  console.log('Page loaded:', await page.title());\r\n\r\n  await page.screenshot({ path: '/tmp/screenshot.png', fullPage: true });\r\n  console.log('ðŸ“¸ Screenshot saved to /tmp/screenshot.png');\r\n\r\n  await browser.close();\r\n})();\r\n```\r\n\r\n**Step 3: Execute from skill directory**\r\n\r\n```bash\r\ncd $SKILL_DIR && node run.js /tmp/playwright-test-page.js\r\n```",
    "Common Patterns": "### Test a Page (Multiple Viewports)\r\n\r\n```javascript\r\n// /tmp/playwright-test-responsive.js\r\nconst { chromium } = require('playwright');\r\n\r\nconst TARGET_URL = 'http://localhost:3001'; // Auto-detected\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false, slowMo: 100 });\r\n  const page = await browser.newPage();\r\n\r\n  // Desktop test\r\n  await page.setViewportSize({ width: 1920, height: 1080 });\r\n  await page.goto(TARGET_URL);\r\n  console.log('Desktop - Title:', await page.title());\r\n  await page.screenshot({ path: '/tmp/desktop.png', fullPage: true });\r\n\r\n  // Mobile test\r\n  await page.setViewportSize({ width: 375, height: 667 });\r\n  await page.screenshot({ path: '/tmp/mobile.png', fullPage: true });\r\n\r\n  await browser.close();\r\n})();\r\n```\r\n\r\n### Test Login Flow\r\n\r\n```javascript\r\n// /tmp/playwright-test-login.js\r\nconst { chromium } = require('playwright');\r\n\r\nconst TARGET_URL = 'http://localhost:3001'; // Auto-detected\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false });\r\n  const page = await browser.newPage();\r\n\r\n  await page.goto(`${TARGET_URL}/login`);\r\n\r\n  await page.fill('input[name=\"email\"]', 'test@example.com');\r\n  await page.fill('input[name=\"password\"]', 'password123');\r\n  await page.click('button[type=\"submit\"]');\r\n\r\n  // Wait for redirect\r\n  await page.waitForURL('**/dashboard');\r\n  console.log('âœ… Login successful, redirected to dashboard');\r\n\r\n  await browser.close();\r\n})();\r\n```\r\n\r\n### Fill and Submit Form\r\n\r\n```javascript\r\n// /tmp/playwright-test-form.js\r\nconst { chromium } = require('playwright');\r\n\r\nconst TARGET_URL = 'http://localhost:3001'; // Auto-detected\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false, slowMo: 50 });\r\n  const page = await browser.newPage();\r\n\r\n  await page.goto(`${TARGET_URL}/contact`);\r\n\r\n  await page.fill('input[name=\"name\"]', 'John Doe');\r\n  await page.fill('input[name=\"email\"]', 'john@example.com');\r\n  await page.fill('textarea[name=\"message\"]', 'Test message');\r\n  await page.click('button[type=\"submit\"]');\r\n\r\n  // Verify submission\r\n  await page.waitForSelector('.success-message');\r\n  console.log('âœ… Form submitted successfully');\r\n\r\n  await browser.close();\r\n})();\r\n```\r\n\r\n### Check for Broken Links\r\n\r\n```javascript\r\nconst { chromium } = require('playwright');\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false });\r\n  const page = await browser.newPage();\r\n\r\n  await page.goto('http://localhost:3000');\r\n\r\n  const links = await page.locator('a[href^=\"http\"]').all();\r\n  const results = { working: 0, broken: [] };\r\n\r\n  for (const link of links) {\r\n    const href = await link.getAttribute('href');\r\n    try {\r\n      const response = await page.request.head(href);\r\n      if (response.ok()) {\r\n        results.working++;\r\n      } else {\r\n        results.broken.push({ url: href, status: response.status() });\r\n      }\r\n    } catch (e) {\r\n      results.broken.push({ url: href, error: e.message });\r\n    }\r\n  }\r\n\r\n  console.log(`âœ… Working links: ${results.working}`);\r\n  console.log(`âŒ Broken links:`, results.broken);\r\n\r\n  await browser.close();\r\n})();\r\n```\r\n\r\n### Take Screenshot with Error Handling\r\n\r\n```javascript\r\nconst { chromium } = require('playwright');\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false });\r\n  const page = await browser.newPage();\r\n\r\n  try {\r\n    await page.goto('http://localhost:3000', {\r\n      waitUntil: 'networkidle',\r\n      timeout: 10000\r\n    });\r\n\r\n    await page.screenshot({\r\n      path: '/tmp/screenshot.png',\r\n      fullPage: true\r\n    });\r\n\r\n    console.log('ðŸ“¸ Screenshot saved to /tmp/screenshot.png');\r\n  } catch (error) {\r\n    console.error('âŒ Error:', error.message);\r\n  } finally {\r\n    await browser.close();\r\n  }\r\n})();\r\n```\r\n\r\n### Test Responsive Design\r\n\r\n```javascript\r\n// /tmp/playwright-test-responsive-full.js\r\nconst { chromium } = require('playwright');\r\n\r\nconst TARGET_URL = 'http://localhost:3001'; // Auto-detected\r\n\r\n(async () => {\r\n  const browser = await chromium.launch({ headless: false });\r\n  const page = await browser.newPage();\r\n\r\n  const viewports = [\r\n    { name: 'Desktop', width: 1920, height: 1080 },\r\n    { name: 'Tablet', width: 768, height: 1024 },\r\n    { name: 'Mobile', width: 375, height: 667 }\r\n  ];\r\n\r\n  for (const viewport of viewports) {\r\n    console.log(`Testing ${viewport.name} (${viewport.width}x${viewport.height})`);\r\n\r\n    await page.setViewportSize({\r\n      width: viewport.width,\r\n      height: viewport.height\r\n    });\r\n\r\n    await page.goto(TARGET_URL);\r\n    await page.waitForTimeout(1000);\r\n\r\n    await page.screenshot({\r\n      path: `/tmp/${viewport.name.toLowerCase()}.png`,\r\n      fullPage: true\r\n    });\r\n  }\r\n\r\n  console.log('âœ… All viewports tested');\r\n  await browser.close();\r\n})();\r\n```",
    "Example Usage": "```\r\nUser: \"Test if the marketing page looks good\"\r\n\r\nClaude: I'll test the marketing page across multiple viewports. Let me first detect running servers...\r\n[Runs: detectDevServers()]\r\n[Output: Found server on port 3001]\r\nI found your dev server running on http://localhost:3001\r\n\r\n[Writes custom automation script to /tmp/playwright-test-marketing.js with URL parameterized]\r\n[Runs: cd $SKILL_DIR && node run.js /tmp/playwright-test-marketing.js]\r\n[Shows results with screenshots from /tmp/]\r\n```\r\n\r\n```\r\nUser: \"Check if login redirects correctly\"\r\n\r\nClaude: I'll test the login flow. First, let me check for running servers...\r\n[Runs: detectDevServers()]\r\n[Output: Found servers on ports 3000 and 3001]\r\nI found 2 dev servers. Which one should I test?\r\n- http://localhost:3000\r\n- http://localhost:3001\r\n\r\nUser: \"Use 3001\"\r\n\r\n[Writes login automation to /tmp/playwright-test-login.js]\r\n[Runs: cd $SKILL_DIR && node run.js /tmp/playwright-test-login.js]\r\n[Reports: âœ… Login successful, redirected to /dashboard]\r\n```",
    "Advanced Usage": "For comprehensive Playwright API documentation, see [API_REFERENCE.md](API_REFERENCE.md):\r\n\r\n- Selectors & Locators best practices\r\n- Network interception & API mocking\r\n- Authentication & session management\r\n- Visual regression testing\r\n- Mobile device emulation\r\n- Performance testing\r\n- Debugging techniques\r\n- CI/CD integration",
    "Setup (First Time)": "```bash\r\ncd $SKILL_DIR\r\nnpm run setup\r\n```\r\n\r\nThis installs Playwright and Chromium browser. Only needed once.",
    "Notes": "- Each automation is custom-written for your specific request\r\n- Not limited to pre-built scripts - any browser task possible\r\n- Auto-detects running dev servers to eliminate hardcoded URLs\r\n- Test scripts written to `/tmp` for automatic cleanup (no clutter)\r\n- Code executes reliably with proper module resolution via `run.js`\r\n- Progressive disclosure - API_REFERENCE.md loaded only when advanced features needed",
    "Inline Execution (Simple Tasks)": "cd $SKILL_DIR && node run.js \"\r\nconst browser = await chromium.launch({ headless: false });\r\nconst page = await browser.newPage();\r\nawait page.goto('http://localhost:3001');\r\nawait page.screenshot({ path: '/tmp/quick-screenshot.png', fullPage: true });\r\nconsole.log('Screenshot saved');\r\nawait browser.close();\r\n\"\r\n```\r\n\r\n**When to use inline vs files:**\r\n- **Inline**: Quick one-off tasks (screenshot, check if element exists, get page title)\r\n- **Files**: Complex tests, responsive design checks, anything user might want to re-run",
    "Troubleshooting": "**Playwright not installed:**\r\n```bash\r\ncd $SKILL_DIR && npm run setup\r\n```\r\n\r\n**Module not found:**\r\nEnsure running from skill directory via `run.js` wrapper\r\n\r\n**Browser doesn't open:**\r\nCheck `headless: false` and ensure display available\r\n\r\n**Element not found:**\r\nAdd wait: `await page.waitForSelector('.element', { timeout: 10000 })`",
    "Available Helpers": "Optional utility functions in `lib/helpers.js`:\r\n\r\n```javascript\r\nconst helpers = require('./lib/helpers');\r\n\r\n// Detect running dev servers (CRITICAL - use this first!)\r\nconst servers = await helpers.detectDevServers();\r\nconsole.log('Found servers:', servers);\r\n\r\n// Safe click with retry\r\nawait helpers.safeClick(page, 'button.submit', { retries: 3 });\r\n\r\n// Safe type with clear\r\nawait helpers.safeType(page, '#username', 'testuser');\r\n\r\n// Take timestamped screenshot\r\nawait helpers.takeScreenshot(page, 'test-result');\r\n\r\n// Handle cookie banners\r\nawait helpers.handleCookieBanner(page);\r\n\r\n// Extract table data\r\nconst data = await helpers.extractTableData(page, 'table.results');\r\n```\r\n\r\nSee `lib/helpers.js` for full list.",
    "How It Works": "1. You describe what you want to test/automate\r\n2. I auto-detect running dev servers (or ask for URL if testing external site)\r\n3. I write custom Playwright code in `/tmp/playwright-test-*.js` (won't clutter your project)\r\n4. I execute it via: `cd $SKILL_DIR && node run.js /tmp/playwright-test-*.js`\r\n5. Results displayed in real-time, browser window visible for debugging\r\n6. Test files auto-cleaned from /tmp by your OS",
    "Tips": "- **CRITICAL: Detect servers FIRST** - Always run `detectDevServers()` before writing test code for localhost testing\r\n- **Use /tmp for test files** - Write to `/tmp/playwright-test-*.js`, never to skill directory or user's project\r\n- **Parameterize URLs** - Put detected/provided URL in a `TARGET_URL` constant at the top of every script\r\n- **DEFAULT: Visible browser** - Always use `headless: false` unless user explicitly asks for headless mode\r\n- **Headless mode** - Only use `headless: true` when user specifically requests \"headless\" or \"background\" execution\r\n- **Slow down:** Use `slowMo: 100` to make actions visible and easier to follow\r\n- **Wait strategies:** Use `waitForURL`, `waitForSelector`, `waitForLoadState` instead of fixed timeouts\r\n- **Error handling:** Always use try-catch for robust automation\r\n- **Console output:** Use `console.log()` to track progress and show what's happening"
  }
}