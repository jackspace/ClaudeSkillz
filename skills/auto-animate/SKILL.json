{
  "description": "|",
  "metadata": {
    "license": "MIT"
  },
  "references": {
    "files": [
      "references/auto-animate-vs-motion.md",
      "references/css-conflicts.md",
      "references/example-reference.md",
      "references/ssr-patterns.md"
    ]
  },
  "content": "**Status**: Production Ready ✅\r\n**Last Updated**: 2025-11-07\r\n**Dependencies**: None (works with any React setup)\r\n**Latest Versions**: @formkit/auto-animate@0.9.0\r\n\r\n---",
  "name": "auto-animate",
  "id": "auto-animate",
  "sections": {
    "Accessibility": "AutoAnimate respects `prefers-reduced-motion` **automatically**:\r\n\r\n```css\r\n/* User's system preference */\r\n@media (prefers-reduced-motion: reduce) {\r\n  /* AutoAnimate disables animations automatically */\r\n}\r\n```\r\n\r\n**Critical**: Never set `disrespectUserMotionPreference: true` - this breaks accessibility.\r\n\r\n---",
    "Known Issues Prevention": "This skill prevents **10+** documented issues:\r\n\r\n### Issue #1: SSR/Next.js Import Errors\r\n**Error**: \"Can't import the named export 'useEffect' from non EcmaScript module\"\r\n**Source**: https://github.com/formkit/auto-animate/issues/55\r\n**Why It Happens**: AutoAnimate uses DOM APIs not available on server\r\n**Prevention**: Use dynamic imports (see `templates/vite-ssr-safe.tsx`)\r\n\r\n### Issue #2: Conditional Parent Rendering\r\n**Error**: Animations don't work when parent is conditional\r\n**Source**: https://github.com/formkit/auto-animate/issues/8\r\n**Why It Happens**: Ref can't attach to non-existent element\r\n**Prevention**:\r\n```tsx\r\n// ❌ Wrong\r\n{showList && <ul ref={parent}>...</ul>}\r\n\r\n// ✅ Correct\r\n<ul ref={parent}>{showList && items.map(...)}</ul>\r\n```\r\n\r\n### Issue #3: Missing Unique Keys\r\n**Error**: Items don't animate correctly or flash\r\n**Source**: Official docs\r\n**Why It Happens**: React can't track which items changed\r\n**Prevention**: Always use unique, stable keys (`key={item.id}`)\r\n\r\n### Issue #4: Flexbox Width Issues\r\n**Error**: Elements snap to width instead of animating smoothly\r\n**Source**: Official docs\r\n**Why It Happens**: `flex-grow: 1` waits for surrounding content\r\n**Prevention**: Use explicit width instead of flex-grow for animated elements\r\n\r\n### Issue #5: Table Row Display Issues\r\n**Error**: Table structure breaks when removing rows\r\n**Source**: https://github.com/formkit/auto-animate/issues/7\r\n**Why It Happens**: Display: table-row conflicts with animations\r\n**Prevention**: Apply to `<tbody>` instead of individual rows, or use div-based layouts\r\n\r\n### Issue #6: Jest Testing Errors\r\n**Error**: \"Cannot find module '@formkit/auto-animate/react'\"\r\n**Source**: https://github.com/formkit/auto-animate/issues/29\r\n**Why It Happens**: Jest doesn't resolve ESM exports correctly\r\n**Prevention**: Configure `moduleNameMapper` in jest.config.js\r\n\r\n### Issue #7: esbuild Compatibility\r\n**Error**: \"Path '.' not exported by package\"\r\n**Source**: https://github.com/formkit/auto-animate/issues/36\r\n**Why It Happens**: ESM/CommonJS condition mismatch\r\n**Prevention**: Configure esbuild to handle ESM modules properly\r\n\r\n### Issue #8: CSS Position Side Effects\r\n**Error**: Layout breaks after adding AutoAnimate\r\n**Source**: Official docs\r\n**Why It Happens**: Parent automatically gets `position: relative`\r\n**Prevention**: Account for position change in CSS or set explicitly\r\n\r\n### Issue #9: Vue/Nuxt Registration Errors\r\n**Error**: \"Failed to resolve directive: auto-animate\"\r\n**Source**: https://github.com/formkit/auto-animate/issues/43\r\n**Why It Happens**: Plugin not registered correctly\r\n**Prevention**: Proper plugin setup in Vue/Nuxt config (see references/)\r\n\r\n### Issue #10: Angular ESM Issues\r\n**Error**: Build fails with \"ESM-only package\"\r\n**Source**: https://github.com/formkit/auto-animate/issues/72\r\n**Why It Happens**: CommonJS build environment\r\n**Prevention**: Configure ng-packagr for Angular Package Format\r\n\r\n---",
    "Production Example": "This skill is based on production testing:\r\n\r\n- **Bundle Size**: 3.28 KB gzipped\r\n- **Setup Time**: 2 minutes (vs 15 min with Motion)\r\n- **Errors**: 0 (all 10 known issues prevented)\r\n- **Validation**: ✅ Works with Vite, Tailwind v4, Cloudflare Workers, React 19\r\n\r\n**Tested Scenarios:**\r\n- ✅ Filter/sort lists\r\n- ✅ Accordion components\r\n- ✅ Toast notifications\r\n- ✅ Form validation messages\r\n- ✅ SSR/Cloudflare Workers\r\n- ✅ Accessibility (prefers-reduced-motion)\r\n\r\n---",
    "When to Use AutoAnimate vs Motion": "### Use AutoAnimate When:\r\n- ✅ Simple list transitions (add/remove/sort)\r\n- ✅ Accordion expand/collapse\r\n- ✅ Toast notifications fade in/out\r\n- ✅ Form validation messages appear/disappear\r\n- ✅ Zero configuration preferred\r\n- ✅ Small bundle size critical (3.28 KB)\r\n- ✅ Applying to existing/3rd-party code\r\n- ✅ \"Good enough\" animations acceptable\r\n\r\n### Use Motion When:\r\n- ✅ Complex choreographed animations\r\n- ✅ Gesture controls (drag, swipe, hover)\r\n- ✅ Scroll-based animations\r\n- ✅ Spring physics animations\r\n- ✅ SVG path animations\r\n- ✅ Keyframe control needed\r\n- ✅ Animation variants/orchestration\r\n- ✅ Custom easing curves\r\n\r\n**Rule of Thumb**: Use AutoAnimate for 90% of cases, Motion for hero/interactive animations.\r\n\r\n---",
    "Complete Setup Checklist": "- [ ] Installed `@formkit/auto-animate@0.9.0`\r\n- [ ] Using React 19+ (or Vue/Svelte)\r\n- [ ] Added ref to parent element\r\n- [ ] Parent element always rendered (not conditional)\r\n- [ ] List items have unique, stable keys\r\n- [ ] Tested with `prefers-reduced-motion`\r\n- [ ] SSR-safe if using Cloudflare Workers/Next.js\r\n- [ ] No flexbox width issues\r\n- [ ] Dev server runs without errors\r\n- [ ] Production build succeeds\r\n\r\n---\r\n\r\n**Questions? Issues?**\r\n\r\n1. Check `templates/` for working examples\r\n2. Check `references/auto-animate-vs-motion.md` for library comparison\r\n3. Check `references/ssr-patterns.md` for SSR workarounds\r\n4. Check official docs: https://auto-animate.formkit.com\r\n5. Check GitHub issues: https://github.com/formkit/auto-animate/issues\r\n\r\n---\r\n\r\n**Production Ready?** ✅ Yes - 13.6k stars, actively maintained, zero dependencies.",
    "Critical Rules": "### Always Do\r\n\r\n✅ **Use unique, stable keys** - `key={item.id}` not `key={index}`\r\n✅ **Keep parent in DOM** - Parent ref element always rendered\r\n✅ **Client-only for SSR** - Dynamic import for server environments\r\n✅ **Respect accessibility** - Keep `disrespectUserMotionPreference: false`\r\n✅ **Test with motion disabled** - Verify UI works without animations\r\n✅ **Use explicit width** - Avoid flex-grow on animated elements\r\n✅ **Apply to tbody for tables** - Not individual rows\r\n\r\n### Never Do\r\n\r\n❌ **Conditional parent** - `{show && <ul ref={parent}>}`\r\n❌ **Index as key** - `key={index}` breaks animations\r\n❌ **Ignore SSR** - Will break in Cloudflare Workers/Next.js\r\n❌ **Force animations** - `disrespectUserMotionPreference: true` breaks accessibility\r\n❌ **Animate tables directly** - Use tbody or div-based layout\r\n❌ **Skip unique keys** - Required for proper animation\r\n❌ **Complex animations** - Use Motion instead\r\n\r\n---",
    "Quick Start (2 Minutes)": "### 1. Install AutoAnimate\r\n\r\n```bash\r\npnpm add @formkit/auto-animate\r\n```\r\n\r\n**Why this matters:**\r\n- Only 3.28 KB gzipped (vs 22 KB for Motion)\r\n- Zero dependencies\r\n- Framework-agnostic (React, Vue, Svelte, vanilla JS)\r\n\r\n### 2. Add to Your Component\r\n\r\n```tsx\r\nimport { useAutoAnimate } from \"@formkit/auto-animate/react\";\r\n\r\nexport function MyList() {\r\n  const [parent] = useAutoAnimate(); // 1. Get ref\r\n\r\n  return (\r\n    <ul ref={parent}> {/* 2. Attach to parent */}\r\n      {items.map(item => (\r\n        <li key={item.id}>{item.text}</li> {/* 3. That's it! */}\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n```\r\n\r\n**CRITICAL:**\r\n- ✅ Always use unique, stable keys for list items\r\n- ✅ Parent element must always be rendered (not conditional)\r\n- ✅ AutoAnimate respects `prefers-reduced-motion` automatically\r\n- ✅ Works on add, remove, AND reorder operations\r\n\r\n### 3. Use in Production (SSR-Safe)\r\n\r\nFor Cloudflare Workers or Next.js:\r\n\r\n```tsx\r\n// Use client-only import to prevent SSR errors\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport function useAutoAnimateSafe<T extends HTMLElement>() {\r\n  const [parent, setParent] = useState<T | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\" && parent) {\r\n      import(\"@formkit/auto-animate\").then(({ default: autoAnimate }) => {\r\n        autoAnimate(parent);\r\n      });\r\n    }\r\n  }, [parent]);\r\n\r\n  return [parent, setParent] as const;\r\n}\r\n```\r\n\r\n---",
    "Troubleshooting": "### Problem: Animations not working\r\n**Solution**: Check these common issues:\r\n1. Is parent element always in DOM? (not conditional)\r\n2. Do items have unique, stable keys?\r\n3. Is ref attached to immediate parent of animated children?\r\n\r\n### Problem: SSR/Next.js errors\r\n**Solution**: Use dynamic import:\r\n```tsx\r\nuseEffect(() => {\r\n  if (typeof window !== \"undefined\") {\r\n    import(\"@formkit/auto-animate\").then(({ default: autoAnimate }) => {\r\n      autoAnimate(parent);\r\n    });\r\n  }\r\n}, [parent]);\r\n```\r\n\r\n### Problem: Items flash instead of animating\r\n**Solution**: Add unique keys: `key={item.id}` not `key={index}`\r\n\r\n### Problem: Flexbox width issues\r\n**Solution**: Use explicit width instead of `flex-grow: 1`\r\n\r\n### Problem: Table rows don't animate\r\n**Solution**: Apply ref to `<tbody>`, not individual `<tr>` elements\r\n\r\n---",
    "Official Documentation": "- **Official Site**: https://auto-animate.formkit.com\r\n- **GitHub**: https://github.com/formkit/auto-animate\r\n- **npm**: https://www.npmjs.com/package/@formkit/auto-animate\r\n- **React Docs**: https://auto-animate.formkit.com/react\r\n- **Video Tutorial**: Laracasts video (see README)\r\n\r\n---",
    "Package Versions (Verified 2025-11-07)": "```json\r\n{\r\n  \"dependencies\": {\r\n    \"@formkit/auto-animate\": \"^0.9.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"react\": \"^19.2.0\",\r\n    \"vite\": \"^6.0.0\"\r\n  }\r\n}\r\n```\r\n\r\n---",
    "Using Bundled Resources": "### Templates (templates/)\r\n\r\nCopy-paste ready examples:\r\n\r\n- `react-basic.tsx` - Simple list with add/remove/shuffle\r\n- `react-typescript.tsx` - Typed setup with custom config\r\n- `filter-sort-list.tsx` - Animated filtering and sorting\r\n- `accordion.tsx` - Expandable sections\r\n- `toast-notifications.tsx` - Fade in/out messages\r\n- `form-validation.tsx` - Error messages animation\r\n- `vite-ssr-safe.tsx` - Cloudflare Workers/SSR pattern\r\n\r\n### References (references/)\r\n\r\n- `auto-animate-vs-motion.md` - Decision guide for which to use\r\n- `css-conflicts.md` - Flexbox, table, and position gotchas\r\n- `ssr-patterns.md` - Next.js, Nuxt, Workers workarounds\r\n\r\n### Scripts (scripts/)\r\n\r\n- `init-auto-animate.sh` - Automated setup script\r\n\r\n---",
    "Configuration": "AutoAnimate is zero-config by default. Optional customization:\r\n\r\n```tsx\r\nimport { useAutoAnimate } from \"@formkit/auto-animate/react\";\r\n\r\nconst [parent] = useAutoAnimate({\r\n  duration: 250, // milliseconds (default: 250)\r\n  easing: \"ease-in-out\", // CSS easing (default: \"ease-in-out\")\r\n  // disrespectUserMotionPreference: false, // Keep false!\r\n});\r\n```\r\n\r\n**Recommendation**: Use defaults unless you have specific design requirements.\r\n\r\n---",
    "Cloudflare Workers Compatibility": "AutoAnimate works perfectly with Cloudflare Workers Static Assets:\r\n\r\n✅ **Client-side only** - Runs in browser, not Worker runtime\r\n✅ **No Node.js deps** - Pure browser code\r\n✅ **Edge-friendly** - 3.28 KB gzipped\r\n✅ **SSR-safe** - Use dynamic imports (see templates/)\r\n\r\n**Vite Config**:\r\n```typescript\r\nexport default defineConfig({\r\n  plugins: [react(), cloudflare()],\r\n  ssr: {\r\n    external: [\"@formkit/auto-animate\"],\r\n  },\r\n});\r\n```\r\n\r\n---"
  }
}