{
  "description": "Persistent browser automation via Playwright daemon. Keep a browser window open and send it commands (navigate, execute JS, inspect console). Perfect for interactive debugging, development, and testing web applications. Use when you need to interact with a browser repeatedly without opening/closing it.",
  "metadata": {
    "version": "6.0.0",
    "author": "noiv",
    "tags": "[browser, automation, debugging, playwright, daemon, console-logs]"
  },
  "references": {
    "files": [
      "META_COMMANDS.md"
    ]
  },
  "content": "Persistent browser daemon that keeps Chrome open and accepts commands via file-based IPC.\r\n\r\n\r\n### Start the daemon (once per session)\r\n\r\n```bash\r\ncd ~/.claude/skills/playwright-skill\r\nnode browser-daemon.js\r\n```\r\n\r\nOr ask: \"Start the browser daemon in the background\"\r\n\r\nThe browser window opens and stays open.\r\n\r\n### Send commands\r\n\r\nUse absolute paths (cleaner, no directory changes):\r\n\r\n```bash\r\n~/.claude/skills/playwright-skill/browser-client.js navigate \"http://localhost:8080/...\"\r\n\r\n~/.claude/skills/playwright-skill/browser-client.js exec \"document.title\"\r\n~/.claude/skills/playwright-skill/browser-client.js exec \"document.querySelectorAll('div').length\"\r\n\r\n~/.claude/skills/playwright-skill/browser-client.js console\r\n~/.claude/skills/playwright-skill/browser-client.js console-clear\r\n\r\n~/.claude/skills/playwright-skill/browser-client.js status",
  "name": "Browser Daemon",
  "id": "playwright-skill",
  "sections": {
    "Quick Start": "~/.claude/skills/playwright-skill/browser-client.js resize 1920 1080\r\n```\r\n\r\nBoth scripts have shebangs and are executable, so they can be called directly.",
    "Architecture": "```\r\nClaude (Bash tool)\r\n    ↓\r\nbrowser-client.js (writes .browser-command)\r\n    ↓\r\nbrowser-daemon.js (polls, executes, writes .browser-result)\r\n    ↓\r\nChrome Browser (Playwright-controlled)\r\n```\r\n\r\n**IPC Files:**\r\n- `.browser-command` - Command input (JSON)\r\n- `.browser-result` - Command output (JSON)\r\n- `.browser-ready` - Ready signal (exists when daemon is running)\r\n\r\nFiles created/deleted automatically during operation.",
    "Advanced Capabilities": "See `META_COMMANDS.md` for comprehensive reference of Playwright's meta-level capabilities beyond basic testing:\r\n- Page events (console, network, dialogs, workers, frames, lifecycle)\r\n- Content capture (screenshots, PDFs, HTML, video)\r\n- Network control (interception, mocking, HAR replay, WebSockets)\r\n- Script injection and Node.js function exposure\r\n- Performance metrics and garbage collection\r\n- Chrome DevTools Protocol (CDP) access for low-level browser control\r\n- Browser context events and meta methods",
    "Troubleshooting": "**Daemon not responding:**\r\n```bash\r\nls ~/.claude/skills/playwright-skill/.browser-ready\r\ncd ~/.claude/skills/playwright-skill && node browser-daemon.js\r\n```\r\n\r\n**Commands timing out:**\r\n- Check if browser window is still open\r\n- Kill daemon and restart\r\n- Clean up stuck files: `rm -f .browser-command .browser-result`\r\n\r\n**Browser window closed:**\r\n- Kill daemon (Ctrl+C)\r\n- Restart: `node browser-daemon.js`\r\n- Or send any command - lazy restart will trigger automatically",
    "Integration Notes": "When user requests browser interaction:\r\n1. Check if daemon is running (`.browser-ready` file exists)\r\n2. If not, offer to start as background task\r\n3. Use `browser-client.js` commands to perform actions\r\n4. Report results back to user\r\n\r\nUser can request additional features - the codebase is straightforward and well-documented for extensions.",
    "Daemon Behavior": "- Launches Chrome (not Chromium) for H.264 codec support\r\n- Viewport set to full available screen size on startup\r\n- Automatically captures all console output (log, warn, error, debug, pageerror)\r\n- Polls for commands every 100ms\r\n- Lazy restart: When browser is closed and command is sent, daemon detects closure, restarts browser, restores last URL, then executes command",
    "Commands": "### navigate\r\nNavigate to URL and wait for page load.\r\n```bash\r\nnode browser-client.js navigate \"http://localhost:8080/page\"\r\n```\r\nReturns: `{ success: true, url: string, title: string }`\r\n\r\n### exec\r\nExecute JavaScript in browser context.\r\n```bash\r\nnode browser-client.js exec \"document.querySelectorAll('div').length\"\r\n```\r\nReturns: `{ success: true, result: any }`\r\n\r\n### console\r\nGet all captured console logs.\r\n```bash\r\nnode browser-client.js console\r\n```\r\nReturns: `{ success: true, logs: [{ type, text, location }] }`\r\n\r\n### console-clear\r\nClear console log buffer.\r\n```bash\r\nnode browser-client.js console-clear\r\n```\r\nReturns: `{ success: true }`\r\n\r\n### status\r\nCheck daemon status and current page info.\r\n```bash\r\nnode browser-client.js status\r\n```\r\nReturns: `{ success: true, url, title, consoleLogsCount }`\r\n\r\n### resize\r\nResize browser viewport.\r\n```bash\r\nnode browser-client.js resize 1920 1080\r\n```\r\nReturns: `{ success: true, width, height }`",
    "Important Quirks": "**Manual window resizing does NOT work:**\r\n- Playwright controls viewport independently from window\r\n- Manually resizing browser window does NOT change viewport\r\n- Window resize does NOT trigger JavaScript resize events\r\n- Use `resize` command instead: `node browser-client.js resize 1024 768`\r\n\r\n**DevTools overlay:**\r\n- Opening DevTools does NOT resize viewport - overlays on top\r\n- Does NOT trigger resize events\r\n- Does NOT change `window.innerWidth/Height`\r\n\r\n**Viewport vs Window:**\r\n- `window.innerWidth/Height` - The viewport (controlled by Playwright)\r\n- `window.outerWidth/Height` - The window size\r\n- Only viewport can be changed via `resize` command",
    "Browser Configuration": "```javascript\r\nchromium.launch({\r\n  channel: 'chrome',      // Use Google Chrome, not Chromium\r\n  headless: false,        // Visible window\r\n  args: ['--start-maximized']\r\n})\r\n```",
    "Use Cases": "**Interactive development:** Keep browser open while testing changes, reload and check console without manual interaction.\r\n\r\n**Debugging console logs:** Track down log sources with automatic source location capture.\r\n\r\n**Inspecting page state:** Query DOM, check element counts, inspect computed styles via JavaScript execution.\r\n\r\n**Testing workflows:** Automate multi-step browser interactions (navigate, fill forms, submit, check results).",
    "Setup (First Time)": "```bash\r\ncd ~/.claude/skills/playwright-skill\r\nnpm install\r\n```\r\n\r\nThis installs Playwright and downloads Chrome browser."
  }
}