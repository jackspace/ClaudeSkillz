{
  "description": "Comprehensive toolkit for protein language models including ESM3 (generative multimodal protein design across sequence, structure, and function) and ESM C (efficient protein embeddings and representations). Use this skill when working with protein sequences, structures, or function prediction; designing novel proteins; generating protein embeddings; performing inverse folding; or conducting protein engineering tasks. Supports both local model usage and cloud-based Forge API for scalable inference.",
  "references": {
    "files": [
      "references/esm-c-api.md",
      "references/esm3-api.md",
      "references/forge-api.md",
      "references/workflows.md"
    ]
  },
  "content": "### 1. Protein Sequence Generation with ESM3\r\n\r\nGenerate novel protein sequences with desired properties using multimodal generative modeling.\r\n\r\n**When to use:**\r\n- Designing proteins with specific functional properties\r\n- Completing partial protein sequences\r\n- Generating variants of existing proteins\r\n- Creating proteins with desired structural characteristics\r\n\r\n**Basic usage:**\r\n\r\n```python\r\nfrom esm.models.esm3 import ESM3\r\nfrom esm.sdk.api import ESM3InferenceClient, ESMProtein, GenerationConfig\r\n\r\nmodel: ESM3InferenceClient = ESM3.from_pretrained(\"esm3-sm-open-v1\").to(\"cuda\")\r\n\r\nprotein = ESMProtein(sequence=\"MPRT___KEND\")  # '_' represents masked positions\r\n\r\nprotein = model.generate(protein, GenerationConfig(track=\"sequence\", num_steps=8))\r\nprint(protein.sequence)\r\n```\r\n\r\n**For remote/cloud usage via Forge API:**\r\n\r\n```python\r\nfrom esm.sdk.forge import ESM3ForgeInferenceClient\r\nfrom esm.sdk.api import ESMProtein, GenerationConfig\r\n\r\nmodel = ESM3ForgeInferenceClient(model=\"esm3-medium-2024-08\", url=\"https://forge.evolutionaryscale.ai\", token=\"<token>\")\r\n\r\nprotein = model.generate(protein, GenerationConfig(track=\"sequence\", num_steps=8))\r\n```\r\n\r\nSee `references/esm3-api.md` for detailed ESM3 model specifications, advanced generation configurations, and multimodal prompting examples.\r\n\r\n### 2. Structure Prediction and Inverse Folding\r\n\r\nUse ESM3's structure track for structure prediction from sequence or inverse folding (sequence design from structure).\r\n\r\n**Structure prediction:**\r\n\r\n```python\r\nfrom esm.sdk.api import ESM3InferenceClient, ESMProtein, GenerationConfig\r\n\r\nprotein = ESMProtein(sequence=\"MPRTKEINDAGLIVHSP...\")\r\nprotein_with_structure = model.generate(\r\n    protein,\r\n    GenerationConfig(track=\"structure\", num_steps=protein.sequence.count(\"_\"))\r\n)\r\n\r\ncoordinates = protein_with_structure.coordinates  # 3D coordinates\r\npdb_string = protein_with_structure.to_pdb()\r\n```\r\n\r\n**Inverse folding (sequence from structure):**\r\n\r\n```python\r\nprotein_with_structure = ESMProtein.from_pdb(\"target_structure.pdb\")\r\nprotein_with_structure.sequence = None  # Remove sequence\r\n\r\ndesigned_protein = model.generate(\r\n    protein_with_structure,\r\n    GenerationConfig(track=\"sequence\", num_steps=50, temperature=0.7)\r\n)\r\n```\r\n\r\n### 3. Protein Embeddings with ESM C\r\n\r\nGenerate high-quality embeddings for downstream tasks like function prediction, classification, or similarity analysis.\r\n\r\n**When to use:**\r\n- Extracting protein representations for machine learning\r\n- Computing sequence similarities\r\n- Feature extraction for protein classification\r\n- Transfer learning for protein-related tasks\r\n\r\n**Basic usage:**\r\n\r\n```python\r\nfrom esm.models.esmc import ESMC\r\nfrom esm.sdk.api import ESMProtein\r\n\r\nmodel = ESMC.from_pretrained(\"esmc-300m\").to(\"cuda\")\r\n\r\nprotein = ESMProtein(sequence=\"MPRTKEINDAGLIVHSP...\")\r\nprotein_tensor = model.encode(protein)\r\n\r\nembeddings = model.forward(protein_tensor)\r\n```\r\n\r\n**Batch processing:**\r\n\r\n```python\r\nproteins = [\r\n    ESMProtein(sequence=\"MPRTKEIND...\"),\r\n    ESMProtein(sequence=\"AGLIVHSPQ...\"),\r\n    ESMProtein(sequence=\"KTEFLNDGR...\")\r\n]\r\n\r\nembeddings_list = [model.logits(model.forward(model.encode(p))) for p in proteins]\r\n```\r\n\r\nSee `references/esm-c-api.md` for ESM C model details, efficiency comparisons, and advanced embedding strategies.\r\n\r\n### 4. Function Conditioning and Annotation\r\n\r\nUse ESM3's function track to generate proteins with specific functional annotations or predict function from sequence.\r\n\r\n**Function-conditioned generation:**\r\n\r\n```python\r\nfrom esm.sdk.api import ESMProtein, FunctionAnnotation, GenerationConfig\r\n\r\nprotein = ESMProtein(\r\n    sequence=\"_\" * 200,  # Generate 200 residue protein\r\n    function_annotations=[\r\n        FunctionAnnotation(label=\"fluorescent_protein\", start=50, end=150)\r\n    ]\r\n)\r\n\r\nfunctional_protein = model.generate(\r\n    protein,\r\n    GenerationConfig(track=\"sequence\", num_steps=200)\r\n)\r\n```\r\n\r\n### 5. Chain-of-Thought Generation\r\n\r\nIteratively refine protein designs using ESM3's chain-of-thought generation approach.\r\n\r\n```python\r\nfrom esm.sdk.api import GenerationConfig\r\n\r\nprotein = ESMProtein(sequence=\"MPRT\" + \"_\" * 100 + \"KEND\")\r\n\r\nconfig = GenerationConfig(track=\"structure\", num_steps=50)\r\nprotein = model.generate(protein, config)\r\n\r\nconfig = GenerationConfig(track=\"sequence\", num_steps=50, temperature=0.5)\r\nprotein = model.generate(protein, config)\r\n\r\nconfig = GenerationConfig(track=\"function\", num_steps=20)\r\nprotein = model.generate(protein, config)\r\n```\r\n\r\n### 6. Batch Processing with Forge API\r\n\r\nProcess multiple proteins efficiently using Forge's async executor.\r\n\r\n```python\r\nfrom esm.sdk.forge import ESM3ForgeInferenceClient\r\nimport asyncio\r\n\r\nclient = ESM3ForgeInferenceClient(model=\"esm3-medium-2024-08\", token=\"<token>\")\r\n\r\nasync def batch_generate(proteins_list):\r\n    tasks = [\r\n        client.async_generate(protein, GenerationConfig(track=\"sequence\"))\r\n        for protein in proteins_list\r\n    ]\r\n    return await asyncio.gather(*tasks)",
  "name": "esm",
  "id": "scientific-pkg-esm",
  "sections": {
    "Best Practices": "**For generation tasks:**\r\n- Start with smaller models for prototyping (`esm3-sm-open-v1`)\r\n- Use temperature parameter to control diversity (0.0 = deterministic, 1.0 = diverse)\r\n- Implement iterative refinement with chain-of-thought for complex designs\r\n- Validate generated sequences with structure prediction or wet-lab experiments\r\n\r\n**For embedding tasks:**\r\n- Batch process sequences when possible for efficiency\r\n- Cache embeddings for repeated analyses\r\n- Normalize embeddings when computing similarities\r\n- Use appropriate model size based on downstream task requirements\r\n\r\n**For production deployment:**\r\n- Use Forge API for scalability and latest models\r\n- Implement error handling and retry logic for API calls\r\n- Monitor token usage and implement rate limiting\r\n- Consider AWS SageMaker deployment for dedicated infrastructure",
    "Installation": "**Basic installation:**\r\n\r\n```bash\r\npip install esm\r\n```\r\n\r\n**With Flash Attention (recommended for faster inference):**\r\n\r\n```bash\r\npip install esm\r\npip install flash-attn --no-build-isolation\r\n```\r\n\r\n**For Forge API access:**\r\n\r\n```bash\r\npip install esm  # SDK includes Forge client\r\n```\r\n\r\nNo additional dependencies needed. Obtain Forge API token at https://forge.evolutionaryscale.ai",
    "Resources and Documentation": "- **GitHub Repository:** https://github.com/evolutionaryscale/esm\r\n- **Forge Platform:** https://forge.evolutionaryscale.ai\r\n- **Scientific Paper:** Hayes et al., Science (2025) - https://www.science.org/doi/10.1126/science.ads0018\r\n- **Blog Posts:**\r\n  - ESM3 Release: https://www.evolutionaryscale.ai/blog/esm3-release\r\n  - ESM C Launch: https://www.evolutionaryscale.ai/blog/esm-cambrian\r\n- **Community:** Slack community at https://bit.ly/3FKwcWd\r\n- **Model Weights:** HuggingFace EvolutionaryScale organization",
    "Overview": "ESM provides state-of-the-art protein language models for understanding, generating, and designing proteins. This skill enables working with two model families: ESM3 for generative protein design across sequence, structure, and function, and ESM C for efficient protein representation learning and embeddings.",
    "Model Selection Guide": "**ESM3 Models (Generative):**\r\n- `esm3-sm-open-v1` (1.4B) - Open weights, local usage, good for experimentation\r\n- `esm3-medium-2024-08` (7B) - Best balance of quality and speed (Forge only)\r\n- `esm3-large-2024-03` (98B) - Highest quality, slower (Forge only)\r\n\r\n**ESM C Models (Embeddings):**\r\n- `esmc-300m` (30 layers) - Lightweight, fast inference\r\n- `esmc-600m` (36 layers) - Balanced performance\r\n- `esmc-6b` (80 layers) - Maximum representation quality\r\n\r\n**Selection criteria:**\r\n- **Local development/testing:** Use `esm3-sm-open-v1` or `esmc-300m`\r\n- **Production quality:** Use `esm3-medium-2024-08` via Forge\r\n- **Maximum accuracy:** Use `esm3-large-2024-03` or `esmc-6b`\r\n- **High throughput:** Use Forge API with batch executor\r\n- **Cost optimization:** Use smaller models, implement caching strategies",
    "Responsible Use": "ESM is designed for beneficial applications in protein engineering, drug discovery, and scientific research. Follow the Responsible Biodesign Framework (https://responsiblebiodesign.ai/) when designing novel proteins. Consider biosafety and ethical implications of protein designs before experimental validation.",
    "Core Capabilities": "proteins = [ESMProtein(sequence=f\"MPRT{'_' * 50}KEND\") for _ in range(10)]\r\nresults = asyncio.run(batch_generate(proteins))\r\n```\r\n\r\nSee `references/forge-api.md` for detailed Forge API documentation, authentication, rate limits, and batch processing patterns.",
    "Common Workflows": "For detailed examples and complete workflows, see `references/workflows.md` which includes:\r\n- Novel GFP design with chain-of-thought\r\n- Protein variant generation and screening\r\n- Structure-based sequence optimization\r\n- Function prediction pipelines\r\n- Embedding-based clustering and analysis",
    "References": "This skill includes comprehensive reference documentation:\r\n\r\n- `references/esm3-api.md` - ESM3 model architecture, API reference, generation parameters, and multimodal prompting\r\n- `references/esm-c-api.md` - ESM C model details, embedding strategies, and performance optimization\r\n- `references/forge-api.md` - Forge platform documentation, authentication, batch processing, and deployment\r\n- `references/workflows.md` - Complete examples and common workflow patterns\r\n\r\nThese references contain detailed API specifications, parameter descriptions, and advanced usage patterns. Load them as needed for specific tasks."
  }
}