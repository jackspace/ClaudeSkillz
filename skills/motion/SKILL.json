{
  "description": "",
  "references": {
    "files": [
      "references/common-patterns.md",
      "references/motion-vs-auto-animate.md",
      "references/nextjs-integration.md",
      "references/performance-optimization.md"
    ]
  },
  "content": "---\r\nname: motion\r\ndescription: |\r\n  Production-ready setup for Motion (formerly Framer Motion) - the most popular React animation library with 30,200+ GitHub stars. Motion provides declarative animations, gesture controls, scroll-based effects, spring physics, layout animations, and SVG manipulation.\r\n\r\n  This skill should be used when building UIs that need complex animations beyond simple list transitions: gesture controls (drag, hover, tap), scroll-linked animations, parallax effects, shared element transitions, SVG path morphing, spring physics, or orchestrated animation sequences.\r\n\r\n  Use when: Adding drag-and-drop interactions, creating scroll-triggered animations, implementing modal dialogs with sophisticated transitions, building carousels with momentum, animating page/route transitions, creating hero sections with parallax, implementing accordion components with smooth expand/collapse, or optimizing animation bundle size with LazyMotion.\r\n\r\n  **Important**: For simple list add/remove/sort animations, use the `auto-animate` skill instead (3.28 KB vs 34 KB bundle). Motion is designed for complex interactive animations that require fine-grained control.\r\n\r\nlicense: MIT\r\n---\r\n\r\n\r\n### Latest Stable Version\r\n\r\n```bash\r\npnpm add motion\r\n\r\nnpm install motion\r\n\r\nyarn add motion\r\n```\r\n\r\n**Current Version**: 12.23.24 (verified 2025-11-07)\r\n\r\n**Alternative for Cloudflare Workers**:\r\n```bash\r\n\r\n### 1. Reduce Bundle Size with LazyMotion\r\n\r\n**Problem**: Full `motion` component is ~34 KB minified+gzipped.\r\n\r\n**Solution**: Use `LazyMotion` + `m` component for 4.6 KB:\r\n\r\n```tsx\r\nimport { LazyMotion, domAnimation, m } from \"motion/react\"\r\n\r\nfunction App() {\r\n  return (\r\n    <LazyMotion features={domAnimation}>\r\n      {/* Use 'm' instead of 'motion' */}\r\n      <m.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n      >\r\n        Only 4.6 KB!\r\n      </m.div>\r\n    </LazyMotion>\r\n  )\r\n}\r\n```\r\n\r\n**How it works**: Loads animation features on-demand instead of bundling everything.\r\n\r\n**Alternative (Smallest)**: `useAnimate` mini (2.3 KB):\r\n```tsx\r\nimport { useAnimate } from \"motion/react\"\r\n\r\nfunction Component() {\r\n  const [scope, animate] = useAnimate()\r\n\r\n  return <div ref={scope}>Smallest possible React animation</div>\r\n}\r\n```\r\n\r\n### 2. Hardware Acceleration\r\n\r\n**Add `willChange` for transforms:**\r\n```tsx\r\n<motion.div\r\n  style={{ willChange: \"transform\" }}\r\n  animate={{ x: 100, rotate: 45 }}\r\n/>\r\n```\r\n\r\n**Also add for**: `opacity`, `backgroundColor`, `clipPath`, `filter`\r\n\r\n**How it works**: Tells browser to optimize for animation, uses GPU compositing.\r\n\r\n### 3. Large Lists → Use Virtualization\r\n\r\n**Problem**: Animating 50-100+ items causes severe slowdown.\r\n\r\n**Solutions:**\r\n```bash\r\npnpm add react-window\r\npnpm add react-virtuoso",
  "name": "motion",
  "id": "motion",
  "sections": {
    "Performance Optimization": "pnpm add @tanstack/react-virtual\r\n```\r\n\r\n**Pattern:**\r\n```tsx\r\nimport { FixedSizeList } from 'react-window'\r\nimport { motion } from 'motion/react'\r\n\r\n<FixedSizeList\r\n  height={600}\r\n  itemCount={1000}\r\n  itemSize={50}\r\n>\r\n  {({ index, style }) => (\r\n    <motion.div style={style} layout>\r\n      Item {index}\r\n    </motion.div>\r\n  )}\r\n</FixedSizeList>\r\n```\r\n\r\n**Why**: Only renders visible items, reduces DOM updates and memory usage.\r\n\r\n### 4. Use `layout` Prop for FLIP Animations\r\n\r\nAutomatically animates layout changes without JavaScript calculation:\r\n\r\n```tsx\r\n<motion.div layout>\r\n  {isExpanded ? <LargeContent /> : <SmallContent />}\r\n</motion.div>\r\n```\r\n\r\n**Performance**: Hardware-accelerated via transforms, no reflow/repaint.\r\n\r\n---",
    "Scripts": "This skill includes 2 automation scripts:\r\n\r\n- **init-motion.sh** - One-command setup with framework detection (Vite, Next.js, Cloudflare Workers)\r\n- **optimize-bundle.sh** - Convert existing Motion code to LazyMotion for smaller bundle\r\n\r\nSee `scripts/` directory for automation tools.\r\n\r\n---",
    "Overview": "Motion (package: `motion`, formerly `framer-motion`) is the industry-standard React animation library used in production by thousands of applications. With 30,200+ GitHub stars and 300+ official examples, it provides a declarative API for creating sophisticated animations with minimal code.\r\n\r\n**Key Capabilities:**\r\n- **Gestures**: drag, hover, tap, pan, focus with cross-device support\r\n- **Scroll Animations**: viewport-triggered, scroll-linked, parallax effects\r\n- **Layout Animations**: FLIP technique for smooth layout changes, shared element transitions\r\n- **Spring Physics**: Natural, customizable motion with physics-based easing\r\n- **SVG**: Path morphing, line drawing, attribute animation\r\n- **Exit Animations**: AnimatePresence for unmounting transitions\r\n- **Performance**: Hardware-accelerated, ScrollTimeline API, bundle optimization (2.3 KB - 34 KB)\r\n\r\n**Production Tested**: React 19, Next.js 15, Vite 6, Tailwind v4\r\n\r\n---",
    "Installation": "pnpm add framer-motion\r\n```\r\n\r\n### Package Information\r\n\r\n- **Bundle Size**:\r\n  - Full `motion` component: ~34 KB minified+gzipped\r\n  - `LazyMotion` + `m` component: ~4.6 KB\r\n  - `useAnimate` mini: 2.3 KB (smallest React animation library)\r\n  - `useAnimate` hybrid: 17 KB\r\n- **Dependencies**: React 18+ or React 19+\r\n- **TypeScript**: Native support included (no @types package needed)\r\n\r\n---",
    "References": "This skill includes 4 comprehensive reference guides:\r\n\r\n- **motion-vs-auto-animate.md** - Decision guide: when to use Motion vs AutoAnimate\r\n- **performance-optimization.md** - Bundle size, LazyMotion, virtualization, hardware acceleration\r\n- **nextjs-integration.md** - App Router vs Pages Router, \"use client\", known issues\r\n- **common-patterns.md** - Top 15 patterns with full code examples\r\n\r\nSee `references/` directory for detailed guides.\r\n\r\n---",
    "Related Skills": "- **auto-animate** - For simple list add/remove/sort animations (3.28 KB vs 34 KB)\r\n- **tailwind-v4-shadcn** - Styling integration\r\n- **nextjs** - Next.js App Router patterns\r\n- **cloudflare-worker-base** - Deployment (note: use framer-motion for Cloudflare)\r\n\r\n---",
    "Comparison: Motion vs AutoAnimate": "| Aspect | AutoAnimate | Motion |\r\n|--------|-------------|--------|\r\n| **Bundle Size** | 3.28 KB | 2.3 KB (mini) - 34 KB (full) |\r\n| **Use Case** | Simple list animations | Complex gestures, scroll, layout |\r\n| **API** | Zero-config, 1 line | Declarative props, verbose |\r\n| **Setup** | Single ref | Motion components + props |\r\n| **Gestures** | ❌ Not supported | ✅ Drag, hover, tap, pan |\r\n| **Scroll Animations** | ❌ Not supported | ✅ Parallax, scroll-linked |\r\n| **Layout Animations** | ❌ Not supported | ✅ FLIP, shared elements |\r\n| **SVG** | ❌ Not supported | ✅ Path morphing, line drawing |\r\n| **Cloudflare Workers** | ✅ Full support | ⚠️ Use framer-motion instead |\r\n| **Accessibility** | ✅ Auto prefers-reduced-motion | ✅ Manual MotionConfig |\r\n\r\n**Rule of Thumb**: Use AutoAnimate for 90% of cases (list animations), Motion for 10% (complex interactions).\r\n\r\nSee `references/motion-vs-auto-animate.md` for detailed comparison.\r\n\r\n---",
    "Core Concepts": "### 1. The `motion` Component\r\n\r\nTransform any HTML/SVG element into an animatable component:\r\n\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\n\r\n// Basic animation\r\n<motion.div\r\n  initial={{ opacity: 0, y: 20 }}\r\n  animate={{ opacity: 1, y: 0 }}\r\n  transition={{ duration: 0.5 }}\r\n>\r\n  Content fades in and slides up\r\n</motion.div>\r\n\r\n// Gesture controls\r\n<motion.button\r\n  whileHover={{ scale: 1.1 }}\r\n  whileTap={{ scale: 0.95 }}\r\n>\r\n  Click me\r\n</motion.button>\r\n```\r\n\r\n**Props:**\r\n- `initial`: Starting state (object or variant name)\r\n- `animate`: Target state (object or variant name)\r\n- `exit`: Unmounting state (requires AnimatePresence)\r\n- `transition`: Timing/easing configuration\r\n- `whileHover`, `whileTap`, `whileFocus`: Gesture states\r\n- `whileInView`: Viewport-triggered animation\r\n- `drag`: Enable dragging (\"x\", \"y\", or true for both)\r\n- `layout`: Enable FLIP layout animations\r\n\r\n### 2. Variants (Animation Orchestration)\r\n\r\nNamed animation states that propagate through component tree:\r\n\r\n```tsx\r\nconst container = {\r\n  hidden: { opacity: 0 },\r\n  show: {\r\n    opacity: 1,\r\n    transition: {\r\n      staggerChildren: 0.1, // Delay between each child\r\n      delayChildren: 0.2,   // Initial delay before children\r\n    }\r\n  }\r\n}\r\n\r\nconst item = {\r\n  hidden: { opacity: 0, y: 20 },\r\n  show: { opacity: 1, y: 0 }\r\n}\r\n\r\n<motion.ul variants={container} initial=\"hidden\" animate=\"show\">\r\n  {items.map(item => (\r\n    <motion.li key={item.id} variants={item}>\r\n      {item.text}\r\n    </motion.li>\r\n  ))}\r\n</motion.ul>\r\n```\r\n\r\n**Benefits:**\r\n- Clean, declarative API\r\n- Automatic choreography (stagger, delay, sequence)\r\n- Reusable animation states\r\n- Reduced prop drilling\r\n\r\n### 3. AnimatePresence (Exit Animations)\r\n\r\nEnables animations when components unmount:\r\n\r\n```tsx\r\nimport { AnimatePresence } from \"motion/react\"\r\n\r\n<AnimatePresence>\r\n  {isVisible && (\r\n    <motion.div\r\n      key=\"modal\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n    >\r\n      Modal content\r\n    </motion.div>\r\n  )}\r\n</AnimatePresence>\r\n```\r\n\r\n**Critical Rules:**\r\n- AnimatePresence **must stay mounted** (don't wrap in conditional)\r\n- All children **must have unique `key` props**\r\n- AnimatePresence **wraps the conditional**, not the other way around\r\n\r\n**Common Mistake** (exit animation won't play):\r\n```tsx\r\n// ❌ Wrong - AnimatePresence unmounts with condition\r\n{isVisible && (\r\n  <AnimatePresence>\r\n    <motion.div>Content</motion.div>\r\n  </AnimatePresence>\r\n)}\r\n\r\n// ✅ Correct - AnimatePresence stays mounted\r\n<AnimatePresence>\r\n  {isVisible && <motion.div key=\"unique\">Content</motion.div>}\r\n</AnimatePresence>\r\n```\r\n\r\n### 4. Layout Animations (FLIP)\r\n\r\nAutomatically animate layout changes:\r\n\r\n```tsx\r\n<motion.div layout>\r\n  {isExpanded ? <FullContent /> : <Summary />}\r\n</motion.div>\r\n```\r\n\r\n**How it works:**\r\n- Calculates **F**irst position before change\r\n- Applies change immediately (**L**ast position)\r\n- **I**nverts transform to match first position\r\n- **P**lays animation to last position\r\n\r\n**Special Props:**\r\n- `layoutId`: Connect separate elements for shared transitions\r\n- `layoutScroll`: Fix animations in scrollable containers\r\n- `layoutRoot`: Fix animations in fixed-position elements\r\n\r\n### 5. Scroll Animations\r\n\r\n#### Viewport-Triggered (whileInView)\r\n```tsx\r\n<motion.div\r\n  initial={{ opacity: 0, y: 50 }}\r\n  whileInView={{ opacity: 1, y: 0 }}\r\n  viewport={{ once: true, margin: \"-100px\" }}\r\n>\r\n  Fades in when 100px from entering viewport\r\n</motion.div>\r\n```\r\n\r\n#### Scroll-Linked (useScroll)\r\n```tsx\r\nimport { useScroll, useTransform } from \"motion/react\"\r\n\r\nconst { scrollYProgress } = useScroll()\r\nconst y = useTransform(scrollYProgress, [0, 1], [0, -300])\r\n\r\n<motion.div style={{ y }}>\r\n  Moves up 300px as user scrolls page\r\n</motion.div>\r\n```\r\n\r\n**Performance**: Uses native ScrollTimeline API when available for hardware acceleration.\r\n\r\n### 6. Gestures\r\n\r\n```tsx\r\n<motion.div\r\n  drag=\"x\"\r\n  dragConstraints={{ left: -200, right: 200 }}\r\n  dragElastic={0.2}\r\n  dragMomentum={false}\r\n  onDragEnd={(event, info) => console.log(info.offset.x)}\r\n>\r\n  Drag me horizontally\r\n</motion.div>\r\n```\r\n\r\n**Available Gestures:**\r\n- `whileHover`: Mouse enter/leave (fixes sticky :hover on touch)\r\n- `whileTap`: Pointer down (works on touch and mouse)\r\n- `whileFocus`: Keyboard focus\r\n- `whileDrag`: While dragging\r\n- `whileInView`: While in viewport\r\n- `drag`: Enable dragging with constraints and momentum\r\n\r\n### 7. Spring Physics\r\n\r\nNatural, physics-based easing:\r\n\r\n```tsx\r\n<motion.div\r\n  animate={{ x: 100 }}\r\n  transition={{\r\n    type: \"spring\",\r\n    stiffness: 100,  // Higher = more sudden\r\n    damping: 10,     // Higher = less oscillation (0 = infinite)\r\n    mass: 1,         // Higher = more lethargic\r\n  }}\r\n/>\r\n```\r\n\r\n**Presets:**\r\n- Default: `{ stiffness: 100, damping: 10 }`\r\n- Bouncy: `{ stiffness: 300, damping: 10 }`\r\n- Smooth: `{ stiffness: 100, damping: 20 }`\r\n\r\n---",
    "Templates": "This skill includes 5 production-ready templates in the `templates/` directory:\r\n\r\n1. **motion-vite-basic.tsx** - Basic Vite + React + TypeScript setup with common animations\r\n2. **motion-nextjs-client.tsx** - Next.js App Router pattern with client component wrapper\r\n3. **scroll-parallax.tsx** - Scroll animations, parallax, and viewport triggers\r\n4. **ui-components.tsx** - Modal, accordion, carousel, tabs with shared underline\r\n5. **layout-transitions.tsx** - FLIP layout animations and shared element transitions\r\n\r\nCopy templates into your project and customize as needed.\r\n\r\n---",
    "When to Use This Skill": "### ✅ Use Motion When:\r\n\r\n**Complex Interactions**:\r\n- Drag-and-drop interfaces (sortable lists, kanban boards, sliders)\r\n- Hover states with scale/rotation/color changes\r\n- Tap feedback with bounce/squeeze effects\r\n- Pan gestures for mobile-friendly controls\r\n\r\n**Scroll-Based Animations**:\r\n- Hero sections with parallax layers\r\n- Scroll-triggered reveals (fade in as elements enter viewport)\r\n- Progress bars linked to scroll position\r\n- Sticky headers with scroll-dependent transforms\r\n\r\n**Layout Transitions**:\r\n- Shared element transitions between routes (card → detail page)\r\n- Expand/collapse with automatic height animation\r\n- Grid/list view switching with smooth repositioning\r\n- Tab navigation with animated underline\r\n\r\n**Advanced Features**:\r\n- SVG line drawing animations\r\n- Path morphing between shapes\r\n- Spring physics for natural bounce\r\n- Orchestrated sequences (staggered reveals)\r\n- Modal dialogs with backdrop blur\r\n\r\n**Bundle Optimization**:\r\n- Need 2.3 KB animation library (useAnimate mini)\r\n- Want to reduce Motion from 34 KB to 4.6 KB (LazyMotion)\r\n\r\n### ❌ Don't Use Motion When:\r\n\r\n**Simple List Animations** → Use `auto-animate` skill instead:\r\n- Todo list add/remove (auto-animate: 3.28 KB vs motion: 34 KB)\r\n- Search results filtering\r\n- Shopping cart items\r\n- Notification toasts\r\n- Basic accordions without gestures\r\n\r\n**Static Content**:\r\n- No user interaction or animations needed\r\n- Server-rendered content without client interactivity\r\n\r\n**Cloudflare Workers Deployment** → **Known Issue**:\r\n- Motion has build compatibility issues with Wrangler (GitHub issue #2918)\r\n- **Workaround**: Use `framer-motion` v12.23.24 instead (same API, works with Workers)\r\n\r\n**3D Animations** → Use dedicated 3D library:\r\n- Three.js for WebGL\r\n- React Three Fiber for React + Three.js\r\n\r\n---",
    "Official Documentation": "- **Official Site**: https://motion.dev\r\n- **React Docs**: https://motion.dev/docs/react\r\n- **GitHub**: https://github.com/motiondivision/motion (30,200+ stars)\r\n- **Examples**: https://motion.dev/examples (300+ examples with source code)\r\n- **npm Package**: https://www.npmjs.com/package/motion\r\n\r\n---",
    "Integration Guides": "### Vite + React + TypeScript\r\n\r\n**Installation:**\r\n```bash\r\npnpm create vite my-app --template react-ts\r\ncd my-app\r\npnpm add motion\r\n```\r\n\r\n**Import:**\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\n```\r\n\r\n**Example Component:**\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\n\r\nexport function AnimatedButton() {\r\n  return (\r\n    <motion.button\r\n      whileHover={{ scale: 1.1 }}\r\n      whileTap={{ scale: 0.95 }}\r\n      className=\"px-4 py-2 bg-blue-600 text-white rounded\"\r\n    >\r\n      Hover and click me\r\n    </motion.button>\r\n  )\r\n}\r\n```\r\n\r\n**No Vite configuration needed** - works out of the box.\r\n\r\n### Next.js App Router (Recommended Pattern)\r\n\r\n**Key Requirement**: Motion only works in **Client Components** (not Server Components).\r\n\r\n**Step 1: Create Client Component Wrapper**\r\n\r\n`src/components/motion-client.tsx`:\r\n```tsx\r\n\"use client\"\r\n\r\n// Optimized import for Next.js (reduces client JS)\r\nimport * as motion from \"motion/react-client\"\r\n\r\nexport { motion }\r\n```\r\n\r\n**Step 2: Use in Server Components**\r\n\r\n`src/app/page.tsx`:\r\n```tsx\r\nimport { motion } from \"@/components/motion-client\"\r\n\r\nexport default function Page() {\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n    >\r\n      This works in Server Component (wrapper is client)\r\n    </motion.div>\r\n  )\r\n}\r\n```\r\n\r\n**Alternative: Direct Client Component**\r\n```tsx\r\n\"use client\"\r\n\r\nimport { motion } from \"motion/react\"\r\n\r\nexport function AnimatedCard() {\r\n  return <motion.div>...</motion.div>\r\n}\r\n```\r\n\r\n**Known Issues (Next.js 15 + React 19)**:\r\n- Most compatibility issues marked COMPLETED (update to latest)\r\n- AnimatePresence may fail with soft navigation\r\n- Reorder component incompatible with Next.js routing\r\n\r\n### Next.js Pages Router\r\n\r\nWorks without modifications:\r\n\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\n\r\nexport default function Page() {\r\n  return <motion.div>No \"use client\" needed</motion.div>\r\n}\r\n```\r\n\r\n### Tailwind CSS Integration\r\n\r\n**Best Practice**: Let each library do what it does best.\r\n\r\n- **Tailwind**: Static and responsive styling via `className`\r\n- **Motion**: Animations via motion props\r\n\r\n```tsx\r\n<motion.button\r\n  className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n  whileHover={{ scale: 1.1 }}\r\n  whileTap={{ scale: 0.95 }}\r\n>\r\n  Tailwind styles + Motion animations\r\n</motion.button>\r\n```\r\n\r\n**⚠️ Remove Tailwind Transitions**: Causes stuttering/conflicts.\r\n```tsx\r\n// ❌ Wrong - Tailwind transition conflicts with Motion\r\n<motion.div className=\"transition-all duration-300\" animate={{ x: 100 }} />\r\n\r\n// ✅ Correct - Remove Tailwind transition\r\n<motion.div animate={{ x: 100 }} />\r\n```\r\n\r\n**Why**: Motion uses inline styles or native browser animations, both override Tailwind's CSS transitions.\r\n\r\n### Cloudflare Workers (⚠️ Compatibility Issue)\r\n\r\n**Problem**: Motion has build errors with Wrangler (GitHub issue #2918).\r\n\r\n**Workaround**: Use `framer-motion` v12.23.24 instead:\r\n```bash\r\npnpm add framer-motion\r\n```\r\n\r\n**Import stays the same:**\r\n```tsx\r\nimport { motion } from \"framer-motion\"\r\n```\r\n\r\n**Status**: Monitor GitHub issue for resolution. The API is identical between `motion` and `framer-motion` v12.x.\r\n\r\n---",
    "Token Efficiency Metrics": "| Approach | Tokens Used | Errors Encountered | Time to Complete |\r\n|----------|------------|-------------------|------------------|\r\n| **Manual Setup** | ~30,000 | 3-5 (AnimatePresence, Next.js, performance) | ~2-3 hours |\r\n| **With This Skill** | ~5,000 | 0 ✅ | ~20-30 min |\r\n| **Savings** | **~83%** | **100%** | **~85%** |\r\n\r\n**Errors Prevented**: 29+ documented errors = 100% prevention rate\r\n\r\n---",
    "Common Patterns": "### Pattern 1: Modal Dialog\r\n\r\n```tsx\r\nimport { motion, AnimatePresence } from \"motion/react\"\r\n\r\nfunction Modal({ isOpen, onClose, children }) {\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            key=\"backdrop\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={onClose}\r\n            className=\"fixed inset-0 bg-black/50 z-40\"\r\n          />\r\n\r\n          {/* Dialog */}\r\n          <motion.dialog\r\n            key=\"dialog\"\r\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            className=\"fixed inset-0 m-auto w-96 h-64 bg-white rounded-lg shadow-xl z-50\"\r\n          >\r\n            {children}\r\n          </motion.dialog>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n```\r\n\r\n### Pattern 2: Accordion\r\n\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\nimport { useState } from \"react\"\r\n\r\nfunction Accordion({ title, children }) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={() => setIsOpen(!isOpen)}>{title}</button>\r\n      <motion.div\r\n        initial={false}\r\n        animate={{ height: isOpen ? \"auto\" : 0 }}\r\n        style={{ overflow: \"hidden\" }}\r\n      >\r\n        <div className=\"p-4\">{children}</div>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\n### Pattern 3: Drag-and-Drop Carousel\r\n\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\nimport { useRef } from \"react\"\r\n\r\nfunction Carousel({ images }) {\r\n  const constraintsRef = useRef(null)\r\n\r\n  return (\r\n    <div ref={constraintsRef} className=\"overflow-hidden\">\r\n      <motion.div\r\n        drag=\"x\"\r\n        dragConstraints={constraintsRef}\r\n        dragElastic={0.1}\r\n        className=\"flex gap-4\"\r\n      >\r\n        {images.map(img => (\r\n          <motion.img\r\n            key={img.id}\r\n            src={img.url}\r\n            className=\"w-64 h-64 object-cover rounded-lg\"\r\n            whileHover={{ scale: 1.05 }}\r\n          />\r\n        ))}\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\n### Pattern 4: Scroll-Triggered Reveal\r\n\r\n```tsx\r\nimport { motion } from \"motion/react\"\r\n\r\nfunction FadeInSection({ children }) {\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 50 }}\r\n      whileInView={{ opacity: 1, y: 0 }}\r\n      viewport={{ once: true, margin: \"-100px\" }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      {children}\r\n    </motion.div>\r\n  )\r\n}\r\n```\r\n\r\n### Pattern 5: Parallax Hero\r\n\r\n```tsx\r\nimport { useScroll, useTransform, motion } from \"motion/react\"\r\n\r\nfunction ParallaxHero() {\r\n  const { scrollYProgress } = useScroll()\r\n\r\n  const y1 = useTransform(scrollYProgress, [0, 1], [0, -300])\r\n  const y2 = useTransform(scrollYProgress, [0, 1], [0, -150])\r\n\r\n  return (\r\n    <div className=\"relative h-screen overflow-hidden\">\r\n      <motion.div style={{ y: y1 }} className=\"absolute inset-0\">\r\n        <img src=\"/background.jpg\" className=\"w-full h-full object-cover\" />\r\n      </motion.div>\r\n      <motion.div style={{ y: y2 }} className=\"relative z-10\">\r\n        <h1>Hero Title</h1>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\nSee `references/common-patterns.md` for 10+ more patterns with full code.\r\n\r\n---",
    "Accessibility": "### Respect `prefers-reduced-motion`\r\n\r\n**User Settings Locations:**\r\n- macOS: System Settings → Accessibility → Display → Reduce motion\r\n- Windows: Settings → Ease of Access → Display → Show animations\r\n- iOS: Settings → Accessibility → Motion\r\n- Android 9+: Settings → Accessibility → Remove animations\r\n\r\n**Implementation:**\r\n```tsx\r\nimport { MotionConfig } from \"motion/react\"\r\n\r\n<MotionConfig reducedMotion=\"user\">\r\n  <App />\r\n</MotionConfig>\r\n```\r\n\r\n**What it does:**\r\n- When user enables reduced motion, Motion uses instant transitions\r\n- `reducedMotion` value is `\"user\"` (respects OS setting)\r\n- Can override with `\"always\"` (force instant) or `\"never\"` (ignore setting)\r\n\r\n**⚠️ Known Issue**: `reducedMotion` doesn't affect AnimatePresence components (GitHub issue #1567).\r\n\r\n**Workaround:**\r\n```tsx\r\nconst prefersReducedMotion = window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\r\n\r\n<AnimatePresence>\r\n  {isVisible && (\r\n    <motion.div\r\n      initial={{ opacity: prefersReducedMotion ? 1 : 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: prefersReducedMotion ? 1 : 0 }}\r\n      transition={{ duration: prefersReducedMotion ? 0 : 0.3 }}\r\n    >\r\n      Content\r\n    </motion.div>\r\n  )}\r\n</AnimatePresence>\r\n```\r\n\r\n### Keyboard Support\r\n\r\nMotion gestures work with keyboard:\r\n```tsx\r\n<motion.button\r\n  whileFocus={{ scale: 1.1 }}\r\n  whileTap={{ scale: 0.95 }}\r\n  tabIndex={0}\r\n>\r\n  Keyboard accessible\r\n</motion.button>\r\n```\r\n\r\n**Focus states:**\r\n- `whileFocus`: Triggered by Tab key or programmatic focus\r\n- Works with screen readers\r\n- Respects browser focus ring\r\n\r\n---",
    "Package Versions (Verified 2025-11-07)": "| Package | Version | Status |\r\n|---------|---------|--------|\r\n| motion | 12.23.24 | ✅ Latest stable |\r\n| framer-motion | 12.23.24 | ✅ Alternative for Cloudflare |\r\n| react | 19.2.0 | ✅ Latest stable |\r\n| vite | 6.0.0 | ✅ Latest stable |\r\n\r\n---",
    "Contributing": "Found an issue or have a suggestion?\r\n- Open an issue: https://github.com/jezweb/claude-skills/issues\r\n- See templates and references for detailed examples\r\n\r\n---\r\n\r\n**Production Tested**: ✅ React 19 + Next.js 15 + Vite 6 + Tailwind v4\r\n**Token Savings**: ~83%\r\n**Error Prevention**: 100% (29+ documented errors prevented)\r\n**Bundle Size**: 2.3 KB (mini) - 34 KB (full), optimizable to 4.6 KB with LazyMotion\r\n**Accessibility**: MotionConfig reducedMotion support\r\n**Ready to use!** Install with `./scripts/install-skill.sh motion`",
    "Known Issues & Solutions": "### Issue 1: AnimatePresence Exit Not Working\r\n\r\n**Symptom**: Components disappear instantly without exit animation.\r\n\r\n**Cause**: AnimatePresence wrapped in conditional or missing `key` props.\r\n\r\n**Solution**:\r\n```tsx\r\n// ❌ Wrong\r\n{isVisible && (\r\n  <AnimatePresence>\r\n    <motion.div>Content</motion.div>\r\n  </AnimatePresence>\r\n)}\r\n\r\n// ✅ Correct\r\n<AnimatePresence>\r\n  {isVisible && <motion.div key=\"unique\">Content</motion.div>}\r\n</AnimatePresence>\r\n```\r\n\r\n### Issue 2: Large List Performance\r\n\r\n**Symptom**: 50-100+ animated items cause severe slowdown, browser freezes.\r\n\r\n**Solution**: Use virtualization:\r\n```bash\r\npnpm add react-window\r\n```\r\n\r\nSee `references/performance-optimization.md` for full guide.\r\n\r\n### Issue 3: Tailwind Transitions Conflict\r\n\r\n**Symptom**: Animations stutter or don't work.\r\n\r\n**Solution**: Remove `transition-*` classes:\r\n```tsx\r\n// ❌ Wrong\r\n<motion.div className=\"transition-all\" animate={{ x: 100 }} />\r\n\r\n// ✅ Correct\r\n<motion.div animate={{ x: 100 }} />\r\n```\r\n\r\n### Issue 4: Next.js \"use client\" Missing\r\n\r\n**Symptom**: Build fails with \"motion is not defined\" or SSR errors.\r\n\r\n**Solution**: Add `\"use client\"` directive:\r\n```tsx\r\n\"use client\"\r\n\r\nimport { motion } from \"motion/react\"\r\n```\r\n\r\nSee `references/nextjs-integration.md` for App Router patterns.\r\n\r\n### Issue 5: Scrollable Container Layout Animations\r\n\r\n**Symptom**: Incomplete transitions when removing items from scrolled containers.\r\n\r\n**Solution**: Add `layoutScroll` prop:\r\n```tsx\r\n<motion.div layoutScroll className=\"overflow-auto\">\r\n  {items.map(item => (\r\n    <motion.div key={item.id} layout>\r\n      {item.content}\r\n    </motion.div>\r\n  ))}\r\n</motion.div>\r\n```\r\n\r\n### Issue 6: Cloudflare Workers Build Errors\r\n\r\n**Symptom**: Wrangler build fails when using `motion` package.\r\n\r\n**Solution**: Use `framer-motion` v12.23.24 instead:\r\n```bash\r\npnpm add framer-motion\r\n```\r\n\r\nGitHub issue: #2918 (monitor for resolution)\r\n\r\n### Issue 7: Fixed Position Layout Animations\r\n\r\n**Symptom**: Layout animations in fixed elements have incorrect positioning.\r\n\r\n**Solution**: Add `layoutRoot` prop:\r\n```tsx\r\n<motion.div layoutRoot className=\"fixed top-0 left-0\">\r\n  <motion.div layout>Content</motion.div>\r\n</motion.div>\r\n```\r\n\r\n### Issue 8: layoutId + AnimatePresence Unmounting\r\n\r\n**Symptom**: Elements with `layoutId` inside AnimatePresence fail to unmount.\r\n\r\n**Solution**: Wrap in `LayoutGroup` or avoid mixing exit + layout animations:\r\n```tsx\r\nimport { LayoutGroup } from \"motion/react\"\r\n\r\n<LayoutGroup>\r\n  <AnimatePresence>\r\n    {items.map(item => (\r\n      <motion.div key={item.id} layoutId={item.id}>\r\n        {item.content}\r\n      </motion.div>\r\n    ))}\r\n  </AnimatePresence>\r\n</LayoutGroup>\r\n```\r\n\r\n### Issue 9: Reduced Motion Not Working with AnimatePresence\r\n\r\n**Symptom**: MotionConfig reducedMotion doesn't disable AnimatePresence animations.\r\n\r\n**Solution**: Manual check:\r\n```tsx\r\nconst prefersReducedMotion = window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\r\n\r\n<motion.div\r\n  initial={{ opacity: prefersReducedMotion ? 1 : 0 }}\r\n  animate={{ opacity: 1 }}\r\n  transition={{ duration: prefersReducedMotion ? 0 : 0.3 }}\r\n/>\r\n```\r\n\r\nGitHub issue: #1567\r\n\r\n### Issue 10: Reorder Component in Next.js\r\n\r\n**Symptom**: Reorder component doesn't work with Next.js routing, random stuck states.\r\n\r\n**Solution**: Use alternative drag-to-reorder implementations or avoid Reorder in Next.js.\r\n\r\nGitHub issues: #2183, #2101\r\n\r\nSee `references/nextjs-integration.md` for full Next.js troubleshooting guide.\r\n\r\n---"
  }
}