{
  "description": "Work with MongoDB (document database, BSON documents, aggregation pipelines, Atlas cloud) and PostgreSQL (relational database, SQL queries, psql CLI, pgAdmin). Use when designing database schemas, writing queries and aggregations, optimizing indexes for performance, performing database migrations, configuring replication and sharding, implementing backup and restore strategies, managing database users and permissions, analyzing query performance, or administering production databases.",
  "metadata": {
    "license": "MIT"
  },
  "references": {
    "files": [
      "references/mongodb-aggregation.md",
      "references/mongodb-atlas.md",
      "references/mongodb-crud.md",
      "references/mongodb-indexing.md",
      "references/postgresql-administration.md",
      "references/postgresql-performance.md",
      "references/postgresql-psql-cli.md",
      "references/postgresql-queries.md"
    ]
  },
  "content": "Unified guide for working with MongoDB (document-oriented) and PostgreSQL (relational) databases. Choose the right database for your use case and master both systems.\r\n\r\n\r\n### MongoDB Setup\r\n\r\n```bash\r\n\r\n\r\nmongodb+srv://user:pass@cluster.mongodb.net/db\r\n\r\nmongosh \"mongodb+srv://cluster.mongodb.net/mydb\"\r\n\r\ndb.users.insertOne({ name: \"Alice\", age: 30 })\r\ndb.users.find({ age: { $gte: 18 } })\r\ndb.users.updateOne({ name: \"Alice\" }, { $set: { age: 31 } })\r\ndb.users.deleteOne({ name: \"Alice\" })\r\n```\r\n\r\n### PostgreSQL Setup\r\n\r\n```bash\r\nsudo apt-get install postgresql postgresql-contrib\r\n\r\nsudo systemctl start postgresql\r\n\r\npsql -U postgres -d mydb\r\n\r\n\r\nDatabase utility scripts in `scripts/`:\r\n- **db_migrate.py** - Generate and apply migrations for both databases\r\n- **db_backup.py** - Backup and restore MongoDB and PostgreSQL\r\n- **db_performance_check.py** - Analyze slow queries and recommend indexes\r\n\r\n```bash\r\npython scripts/db_migrate.py --db mongodb --generate \"add_user_index\"\r\n\r\npython scripts/db_backup.py --db postgres --output /backups/",
  "name": "databases",
  "id": "databases_mrgoonie",
  "sections": {
    "Common Operations": "### Create/Insert\r\n```javascript\r\n// MongoDB\r\ndb.users.insertOne({ name: \"Bob\", email: \"bob@example.com\" })\r\ndb.users.insertMany([{ name: \"Alice\" }, { name: \"Charlie\" }])\r\n```\r\n\r\n```sql\r\n-- PostgreSQL\r\nINSERT INTO users (name, email) VALUES ('Bob', 'bob@example.com');\r\nINSERT INTO users (name, email) VALUES ('Alice', NULL), ('Charlie', NULL);\r\n```\r\n\r\n### Read/Query\r\n```javascript\r\n// MongoDB\r\ndb.users.find({ age: { $gte: 18 } })\r\ndb.users.findOne({ email: \"bob@example.com\" })\r\n```\r\n\r\n```sql\r\n-- PostgreSQL\r\nSELECT * FROM users WHERE age >= 18;\r\nSELECT * FROM users WHERE email = 'bob@example.com' LIMIT 1;\r\n```\r\n\r\n### Update\r\n```javascript\r\n// MongoDB\r\ndb.users.updateOne({ name: \"Bob\" }, { $set: { age: 25 } })\r\ndb.users.updateMany({ status: \"pending\" }, { $set: { status: \"active\" } })\r\n```\r\n\r\n```sql\r\n-- PostgreSQL\r\nUPDATE users SET age = 25 WHERE name = 'Bob';\r\nUPDATE users SET status = 'active' WHERE status = 'pending';\r\n```\r\n\r\n### Delete\r\n```javascript\r\n// MongoDB\r\ndb.users.deleteOne({ name: \"Bob\" })\r\ndb.users.deleteMany({ status: \"deleted\" })\r\n```\r\n\r\n```sql\r\n-- PostgreSQL\r\nDELETE FROM users WHERE name = 'Bob';\r\nDELETE FROM users WHERE status = 'deleted';\r\n```\r\n\r\n### Indexing\r\n```javascript\r\n// MongoDB\r\ndb.users.createIndex({ email: 1 })\r\ndb.users.createIndex({ status: 1, createdAt: -1 })\r\n```\r\n\r\n```sql\r\n-- PostgreSQL\r\nCREATE INDEX idx_users_email ON users(email);\r\nCREATE INDEX idx_users_status_created ON users(status, created_at DESC);\r\n```",
    "Reference Navigation": "### MongoDB References\r\n- **[mongodb-crud.md](references/mongodb-crud.md)** - CRUD operations, query operators, atomic updates\r\n- **[mongodb-aggregation.md](references/mongodb-aggregation.md)** - Aggregation pipeline, stages, operators, patterns\r\n- **[mongodb-indexing.md](references/mongodb-indexing.md)** - Index types, compound indexes, performance optimization\r\n- **[mongodb-atlas.md](references/mongodb-atlas.md)** - Atlas cloud setup, clusters, monitoring, search\r\n\r\n### PostgreSQL References\r\n- **[postgresql-queries.md](references/postgresql-queries.md)** - SELECT, JOINs, subqueries, CTEs, window functions\r\n- **[postgresql-psql-cli.md](references/postgresql-psql-cli.md)** - psql commands, meta-commands, scripting\r\n- **[postgresql-performance.md](references/postgresql-performance.md)** - EXPLAIN, query optimization, vacuum, indexes\r\n- **[postgresql-administration.md](references/postgresql-administration.md)** - User management, backups, replication, maintenance",
    "Database Selection Guide": "### Choose MongoDB When:\r\n- Schema flexibility: frequent structure changes, heterogeneous data\r\n- Document-centric: natural JSON/BSON data model\r\n- Horizontal scaling: need to shard across multiple servers\r\n- High write throughput: IoT, logging, real-time analytics\r\n- Nested/hierarchical data: embedded documents preferred\r\n- Rapid prototyping: schema evolution without migrations\r\n\r\n**Best for:** Content management, catalogs, IoT time series, real-time analytics, mobile apps, user profiles\r\n\r\n### Choose PostgreSQL When:\r\n- Strong consistency: ACID transactions critical\r\n- Complex relationships: many-to-many joins, referential integrity\r\n- SQL requirement: team expertise, reporting tools, BI systems\r\n- Data integrity: strict schema validation, constraints\r\n- Mature ecosystem: extensive tooling, extensions\r\n- Complex queries: window functions, CTEs, analytical workloads\r\n\r\n**Best for:** Financial systems, e-commerce transactions, ERP, CRM, data warehousing, analytics\r\n\r\n### Both Support:\r\n- JSON/JSONB storage and querying\r\n- Full-text search capabilities\r\n- Geospatial queries and indexing\r\n- Replication and high availability\r\n- ACID transactions (MongoDB 4.0+)\r\n- Strong security features",
    "Key Differences Summary": "| Feature | MongoDB | PostgreSQL |\r\n|---------|---------|------------|\r\n| Data Model | Document (JSON/BSON) | Relational (Tables/Rows) |\r\n| Schema | Flexible, dynamic | Strict, predefined |\r\n| Query Language | MongoDB Query Language | SQL |\r\n| Joins | $lookup (limited) | Native, optimized |\r\n| Transactions | Multi-document (4.0+) | Native ACID |\r\n| Scaling | Horizontal (sharding) | Vertical (primary), Horizontal (extensions) |\r\n| Indexes | Single, compound, text, geo, etc | B-tree, hash, GiST, GIN, etc |",
    "Best Practices": "**MongoDB:**\r\n- Use embedded documents for 1-to-few relationships\r\n- Reference documents for 1-to-many or many-to-many\r\n- Index frequently queried fields\r\n- Use aggregation pipeline for complex transformations\r\n- Enable authentication and TLS in production\r\n- Use Atlas for managed hosting\r\n\r\n**PostgreSQL:**\r\n- Normalize schema to 3NF, denormalize for performance\r\n- Use foreign keys for referential integrity\r\n- Index foreign keys and frequently filtered columns\r\n- Use EXPLAIN ANALYZE to optimize queries\r\n- Regular VACUUM and ANALYZE maintenance\r\n- Connection pooling (pgBouncer) for web apps",
    "When to Use This Skill": "Use when:\r\n- Designing database schemas and data models\r\n- Writing queries (SQL or MongoDB query language)\r\n- Building aggregation pipelines or complex joins\r\n- Optimizing indexes and query performance\r\n- Implementing database migrations\r\n- Setting up replication, sharding, or clustering\r\n- Configuring backups and disaster recovery\r\n- Managing database users and permissions\r\n- Analyzing slow queries and performance issues\r\n- Administering production database deployments",
    "Resources": "- MongoDB: https://www.mongodb.com/docs/\r\n- PostgreSQL: https://www.postgresql.org/docs/\r\n- MongoDB University: https://learn.mongodb.com/\r\n- PostgreSQL Tutorial: https://www.postgresqltutorial.com/",
    "Python Utilities": "python scripts/db_performance_check.py --db mongodb --threshold 100ms\r\n```",
    "Quick Start": "CREATE TABLE users (id SERIAL PRIMARY KEY, name TEXT, age INT);\r\nINSERT INTO users (name, age) VALUES ('Alice', 30);\r\nSELECT * FROM users WHERE age >= 18;\r\nUPDATE users SET age = 31 WHERE name = 'Alice';\r\nDELETE FROM users WHERE name = 'Alice';\r\n```"
  }
}