{
  "description": "|",
  "metadata": {
    "license": "MIT"
  },
  "references": {
    "files": [
      "references/deployment-guide.md",
      "references/example-reference.md",
      "references/mdx-components.md",
      "references/schema-patterns.md",
      "references/transform-cookbook.md"
    ]
  },
  "content": "**Status**: Production Ready ✅\r\n**Last Updated**: 2025-11-07\r\n**Dependencies**: None\r\n**Latest Versions**: @content-collections/core@0.12.0, @content-collections/vite@0.2.7, zod@3.23.8\r\n\r\n---\r\n\r\n\r\n### 1. Install Dependencies\r\n\r\n```bash\r\npnpm add -D @content-collections/core @content-collections/vite zod\r\n```\r\n\r\n### 2. Configure TypeScript Path Alias\r\n\r\nAdd to `tsconfig.json`:\r\n\r\n```json\r\n{\r\n  \"compilerOptions\": {\r\n    \"paths\": {\r\n      \"content-collections\": [\"./.content-collections/generated\"]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n###\r\n\r\n 3. Configure Vite Plugin\r\n\r\nAdd to `vite.config.ts`:\r\n\r\n```typescript\r\nimport { defineConfig } from \"vite\";\r\nimport react from \"@vitejs/plugin-react\";\r\nimport contentCollections from \"@content-collections/vite\";\r\n\r\nexport default defineConfig({\r\n  plugins: [\r\n    react(),\r\n    contentCollections(), // MUST come after react()\r\n  ],\r\n});\r\n```\r\n\r\n### 4. Update .gitignore\r\n\r\n```\r\n.content-collections/\r\n```\r\n\r\n### 5. Create Collection Config\r\n\r\nCreate `content-collections.ts` in project root:\r\n\r\n```typescript\r\nimport { defineCollection, defineConfig } from \"@content-collections/core\";\r\nimport { z } from \"zod\";\r\n\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  directory: \"content/posts\",\r\n  include: \"*.md\",\r\n  schema: z.object({\r\n    title: z.string(),\r\n    date: z.string(),\r\n    description: z.string(),\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nexport default defineConfig({\r\n  collections: [posts],\r\n});\r\n```\r\n\r\n### 6. Create Content Directory\r\n\r\n```bash\r\nmkdir -p content/posts\r\n```\r\n\r\nCreate `content/posts/first-post.md`:\r\n\r\n```markdown\r\n---\r\ntitle: My First Post\r\ndate: 2025-11-07\r\ndescription: Introduction to Content Collections\r\n---",
  "name": "content-collections",
  "id": "content-collections",
  "sections": {
    "What is Content Collections?": "Content Collections transforms local content files (Markdown/MDX) into **type-safe TypeScript data** with automatic validation at build time.\r\n\r\n**Problem it solves**: Manual content parsing, lack of type safety, runtime errors from invalid frontmatter.\r\n\r\n**How it works**:\r\n1. Define collections in `content-collections.ts` (name, directory, Zod schema)\r\n2. CLI/plugin scans filesystem, parses frontmatter, validates against schema\r\n3. Generates TypeScript modules in `.content-collections/generated/`\r\n4. Import collections: `import { allPosts } from \"content-collections\"`\r\n\r\n**Perfect for**: Blogs, documentation sites, content-heavy apps with Cloudflare Workers, Vite, Next.js.\r\n\r\n---",
    "Quick Start (5 Minutes)": "Content goes here...\r\n```\r\n\r\n### 7. Import and Use\r\n\r\n```typescript\r\nimport { allPosts } from \"content-collections\";\r\n\r\nconsole.log(allPosts); // Fully typed!\r\n```\r\n\r\n**Result**: Type-safe content with autocomplete, validation, and HMR.\r\n\r\n---",
    "Known Issues Prevention": "### Issue #1: Module not found: 'content-collections'\r\n\r\n**Error**: `Cannot find module 'content-collections' or its corresponding type declarations`\r\n\r\n**Why it happens**: Missing TypeScript path alias configuration.\r\n\r\n**Prevention**:\r\n\r\nAdd to `tsconfig.json`:\r\n```json\r\n{\r\n  \"compilerOptions\": {\r\n    \"paths\": {\r\n      \"content-collections\": [\"./.content-collections/generated\"]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nRestart TypeScript server in VS Code: `Cmd+Shift+P` → \"TypeScript: Restart TS Server\"\r\n\r\n**Source**: Common user error\r\n\r\n---\r\n\r\n### Issue #2: Vite Constant Restart Loop\r\n\r\n**Error**: Dev server continuously restarts, infinite loop.\r\n\r\n**Why it happens**: Vite watching `.content-collections` directory changes, which triggers regeneration.\r\n\r\n**Prevention**:\r\n\r\n1. Add to `.gitignore`:\r\n```\r\n.content-collections/\r\n```\r\n\r\n2. Add to `vite.config.ts` (if still happening):\r\n```typescript\r\nexport default defineConfig({\r\n  server: {\r\n    watch: {\r\n      ignored: [\"**/.content-collections/**\"],\r\n    },\r\n  },\r\n});\r\n```\r\n\r\n**Source**: GitHub Issue #591 (TanStack Start)\r\n\r\n---\r\n\r\n### Issue #3: Transform Types Not Reflected\r\n\r\n**Error**: TypeScript types don't match transformed documents.\r\n\r\n**Why it happens**: TypeScript doesn't automatically infer transform function return type.\r\n\r\n**Prevention**:\r\n\r\nExplicitly type your transform return:\r\n\r\n```typescript\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  // ... schema\r\n  transform: (post): PostWithSlug => ({ // Type the return!\r\n    ...post,\r\n    slug: post._meta.path.replace(/\\.md$/, \"\"),\r\n  }),\r\n});\r\n\r\ntype PostWithSlug = {\r\n  // ... schema fields\r\n  slug: string;\r\n};\r\n```\r\n\r\n**Source**: GitHub Issue #396\r\n\r\n---\r\n\r\n### Issue #4: Collection Not Updating on File Change\r\n\r\n**Error**: New content files not appearing in collection.\r\n\r\n**Why it happens**: Glob pattern doesn't match, or dev server needs restart.\r\n\r\n**Prevention**:\r\n\r\n1. Verify glob pattern matches your files:\r\n```typescript\r\ninclude: \"*.md\"        // Only root files\r\ninclude: \"**/*.md\"     // All nested files\r\ninclude: \"posts/*.md\"  // Only posts/ folder\r\n```\r\n\r\n2. Restart dev server after adding new files outside watched patterns\r\n3. Check file actually saved (watch for editor issues)\r\n\r\n**Source**: Common user error\r\n\r\n---\r\n\r\n### Issue #5: MDX Type Errors with Shiki\r\n\r\n**Error**: `esbuild errors with shiki langAlias` or compilation failures.\r\n\r\n**Why it happens**: Version incompatibility between Shiki and Content Collections.\r\n\r\n**Prevention**:\r\n\r\nUse compatible versions:\r\n\r\n```json\r\n{\r\n  \"devDependencies\": {\r\n    \"@content-collections/mdx\": \"^0.2.2\",\r\n    \"shiki\": \"^1.0.0\"\r\n  }\r\n}\r\n```\r\n\r\nCheck official compatibility matrix in docs before upgrading Shiki.\r\n\r\n**Source**: GitHub Issue #598 (Next.js 15)\r\n\r\n---\r\n\r\n### Issue #6: Custom Path Aliases in MDX Imports Fail\r\n\r\n**Error**: MDX imports with `@` alias don't resolve.\r\n\r\n**Why it happens**: MDX compiler doesn't respect tsconfig path aliases.\r\n\r\n**Prevention**:\r\n\r\nUse relative paths in MDX imports:\r\n\r\n```mdx\r\n<!-- ❌ Won't work -->\r\nimport Component from \"@/components/Component\"\r\n\r\n<!-- ✅ Works -->\r\nimport Component from \"../../components/Component\"\r\n```\r\n\r\nOr configure files appender (advanced, see references/transform-cookbook.md).\r\n\r\n**Source**: GitHub Issue #547\r\n\r\n---\r\n\r\n### Issue #7: Unclear Validation Error Messages\r\n\r\n**Error**: Cryptic Zod validation errors like \"Expected string, received undefined\".\r\n\r\n**Why it happens**: Zod errors aren't formatted for content context.\r\n\r\n**Prevention**:\r\n\r\nAdd custom error messages to schema:\r\n\r\n```typescript\r\nschema: z.object({\r\n  title: z.string({\r\n    required_error: \"Title is required in frontmatter\",\r\n    invalid_type_error: \"Title must be a string\",\r\n  }),\r\n  date: z.string().refine(\r\n    (val) => !isNaN(Date.parse(val)),\r\n    \"Date must be valid ISO date (YYYY-MM-DD)\"\r\n  ),\r\n})\r\n```\r\n\r\n**Source**: GitHub Issue #403\r\n\r\n---\r\n\r\n### Issue #8: Ctrl+C Doesn't Stop Process\r\n\r\n**Error**: Dev process hangs on exit, requires `kill -9`.\r\n\r\n**Why it happens**: File watcher not cleaning up properly.\r\n\r\n**Prevention**:\r\n\r\nThis is a known issue with the watcher. Workarounds:\r\n\r\n1. Use `kill -9 <pid>` when it hangs\r\n2. Use `content-collections watch` separately (not plugin) for more control\r\n3. Add cleanup handler in `vite.config.ts` (advanced)\r\n\r\n**Source**: GitHub Issue #546\r\n\r\n---",
    "Complete Setup Checklist": "- [ ] Installed `@content-collections/core` and `@content-collections/vite`\r\n- [ ] Installed `zod` for schema validation\r\n- [ ] Added path alias to `tsconfig.json`\r\n- [ ] Added `contentCollections()` to `vite.config.ts` (after react())\r\n- [ ] Added `.content-collections/` to `.gitignore`\r\n- [ ] Created `content-collections.ts` in project root\r\n- [ ] Created content directory (e.g., `content/posts/`)\r\n- [ ] Defined collection with Zod schema\r\n- [ ] Created first content file with frontmatter\r\n- [ ] Imported collection in React component\r\n- [ ] Verified types work (autocomplete)\r\n- [ ] Tested hot reloading (change content file)\r\n\r\n---\r\n\r\n**Questions? Issues?**\r\n\r\n1. Check `references/` directory for deep dives\r\n2. Verify path alias in tsconfig.json\r\n3. Check Vite plugin order (after react())\r\n4. Review known issues above\r\n5. Check official docs: https://www.content-collections.dev/docs",
    "React Component Integration": "### Using Collections in React\r\n\r\n```tsx\r\nimport { allPosts } from \"content-collections\";\r\n\r\nexport function BlogList() {\r\n  return (\r\n    <ul>\r\n      {allPosts.map((post) => (\r\n        <li key={post._meta.path}>\r\n          <h2>{post.title}</h2>\r\n          <p>{post.description}</p>\r\n          <time>{post.date}</time>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n```\r\n\r\n---\r\n\r\n### Rendering MDX Content\r\n\r\n```tsx\r\nimport { MDXContent } from \"@content-collections/mdx/react\";\r\n\r\nexport function BlogPost({ post }: { post: { mdx: string } }) {\r\n  return (\r\n    <article>\r\n      <MDXContent code={post.mdx} />\r\n    </article>\r\n  );\r\n}\r\n```\r\n\r\n---",
    "Cloudflare Workers Deployment": "Content Collections is **perfect for Cloudflare Workers** because:\r\n- Build-time only (no runtime filesystem access)\r\n- Outputs static JavaScript modules\r\n- No Node.js dependencies in generated code\r\n\r\n### Deployment Pattern\r\n\r\n```\r\nLocal Dev → content-collections build → vite build → wrangler deploy\r\n```\r\n\r\n### wrangler.toml\r\n\r\n```toml\r\nname = \"my-content-site\"\r\ncompatibility_date = \"2025-11-07\"\r\n\r\n[assets]\r\ndirectory = \"./dist\"\r\nbinding = \"ASSETS\"\r\n```\r\n\r\n### Build Script\r\n\r\n`package.json`:\r\n```json\r\n{\r\n  \"scripts\": {\r\n    \"dev\": \"vite\",\r\n    \"build\": \"vite build\",\r\n    \"deploy\": \"pnpm build && wrangler deploy\"\r\n  }\r\n}\r\n```\r\n\r\n**Note**: Vite plugin handles `content-collections build` automatically!\r\n\r\n---",
    "Critical Rules": "### ✅ Always Do:\r\n\r\n1. **Add path alias to tsconfig.json** - Required for imports to work\r\n2. **Add .content-collections to .gitignore** - Generated files shouldn't be committed\r\n3. **Use Standard Schema validators** - Zod, Valibot, ArkType supported\r\n4. **Include `content` field in schema** - Required for frontmatter parsing\r\n5. **Await compileMDX in transforms** - MDX compilation is async\r\n6. **Put contentCollections() after react() in Vite** - Plugin order matters\r\n\r\n### ❌ Never Do:\r\n\r\n1. **Commit .content-collections directory** - Always generated, never committed\r\n2. **Use non-standard validators** - Must support StandardSchema spec\r\n3. **Forget to restart dev server after config changes** - Required for new collections\r\n4. **Use sync transforms with async operations** - Transform must be async\r\n5. **Double-wrap path alias** - Use `content-collections` not `./content-collections`\r\n6. **Import from wrong package** - `@content-collections/core` for config, `content-collections` for data\r\n\r\n---",
    "Configuration Patterns": "### Basic Blog Collection\r\n\r\n```typescript\r\nimport { defineCollection, defineConfig } from \"@content-collections/core\";\r\nimport { z } from \"zod\";\r\n\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  directory: \"content/posts\",\r\n  include: \"*.md\",\r\n  schema: z.object({\r\n    title: z.string(),\r\n    date: z.string(),\r\n    description: z.string(),\r\n    tags: z.array(z.string()).optional(),\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nexport default defineConfig({\r\n  collections: [posts],\r\n});\r\n```\r\n\r\n---\r\n\r\n### Multi-Collection Setup\r\n\r\n```typescript\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  directory: \"content/posts\",\r\n  include: \"*.md\",\r\n  schema: z.object({\r\n    title: z.string(),\r\n    date: z.string(),\r\n    description: z.string(),\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nconst docs = defineCollection({\r\n  name: \"docs\",\r\n  directory: \"content/docs\",\r\n  include: \"**/*.md\", // Nested folders\r\n  schema: z.object({\r\n    title: z.string(),\r\n    category: z.string(),\r\n    order: z.number().optional(),\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nexport default defineConfig({\r\n  collections: [posts, docs],\r\n});\r\n```\r\n\r\n---\r\n\r\n### Transform Functions (Computed Fields)\r\n\r\n```typescript\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  directory: \"content/posts\",\r\n  include: \"*.md\",\r\n  schema: z.object({\r\n    title: z.string(),\r\n    date: z.string(),\r\n    content: z.string(),\r\n  }),\r\n  transform: (post) => ({\r\n    ...post,\r\n    slug: post._meta.path.replace(/\\.md$/, \"\"),\r\n    readingTime: Math.ceil(post.content.split(/\\s+/).length / 200),\r\n    year: new Date(post.date).getFullYear(),\r\n  }),\r\n});\r\n```\r\n\r\n---\r\n\r\n### MDX with React Components\r\n\r\n```typescript\r\nimport { compileMDX } from \"@content-collections/mdx\";\r\n\r\nconst posts = defineCollection({\r\n  name: \"posts\",\r\n  directory: \"content/posts\",\r\n  include: \"*.mdx\",\r\n  schema: z.object({\r\n    title: z.string(),\r\n    date: z.string(),\r\n    content: z.string(),\r\n  }),\r\n  transform: async (post) => {\r\n    const mdx = await compileMDX(post.content, {\r\n      syntaxHighlighter: \"shiki\",\r\n      shikiOptions: {\r\n        theme: \"github-dark\",\r\n      },\r\n    });\r\n\r\n    return {\r\n      ...post,\r\n      mdx,\r\n      slug: post._meta.path.replace(/\\.mdx$/, \"\"),\r\n    };\r\n  },\r\n});\r\n```\r\n\r\n---",
    "Dependencies": "### Required\r\n\r\n```json\r\n{\r\n  \"devDependencies\": {\r\n    \"@content-collections/core\": \"^0.12.0\",\r\n    \"@content-collections/vite\": \"^0.2.7\",\r\n    \"zod\": \"^3.23.8\"\r\n  }\r\n}\r\n```\r\n\r\n### Optional (MDX)\r\n\r\n```json\r\n{\r\n  \"devDependencies\": {\r\n    \"@content-collections/markdown\": \"^0.1.4\",\r\n    \"@content-collections/mdx\": \"^0.2.2\",\r\n    \"shiki\": \"^1.0.0\"\r\n  }\r\n}\r\n```\r\n\r\n---",
    "Troubleshooting": "### Problem: TypeScript can't find 'content-collections'\r\n\r\n**Solution**: Add path alias to `tsconfig.json`, restart TS server.\r\n\r\n---\r\n\r\n### Problem: Vite keeps restarting\r\n\r\n**Solution**: Add `.content-collections/` to `.gitignore` and Vite watch ignore.\r\n\r\n---\r\n\r\n### Problem: Changes not reflecting\r\n\r\n**Solution**: Restart dev server, verify glob pattern, check file saved.\r\n\r\n---\r\n\r\n### Problem: MDX compilation errors\r\n\r\n**Solution**: Check Shiki version compatibility, verify MDX syntax.\r\n\r\n---\r\n\r\n### Problem: Validation errors unclear\r\n\r\n**Solution**: Add custom error messages to Zod schema.\r\n\r\n---",
    "Official Documentation": "- **Official Site**: https://www.content-collections.dev\r\n- **Documentation**: https://www.content-collections.dev/docs\r\n- **GitHub**: https://github.com/sdorra/content-collections\r\n- **Vite Plugin**: https://www.content-collections.dev/docs/vite\r\n- **MDX Integration**: https://www.content-collections.dev/docs/mdx\r\n\r\n---",
    "Package Versions (Verified 2025-11-07)": "| Package | Version | Status |\r\n|---------|---------|--------|\r\n| @content-collections/core | 0.12.0 | ✅ Latest stable |\r\n| @content-collections/vite | 0.2.7 | ✅ Latest stable |\r\n| @content-collections/mdx | 0.2.2 | ✅ Latest stable |\r\n| @content-collections/markdown | 0.1.4 | ✅ Latest stable |\r\n| zod | 3.23.8 | ✅ Latest stable |\r\n\r\n---",
    "Using Bundled Resources": "### Templates (templates/)\r\n\r\nCopy-paste ready configuration files:\r\n\r\n- `content-collections.ts` - Basic blog setup\r\n- `content-collections-multi.ts` - Multiple collections\r\n- `content-collections-mdx.ts` - MDX with syntax highlighting\r\n- `tsconfig.json` - Complete TypeScript config\r\n- `vite.config.ts` - Vite plugin setup\r\n- `blog-post.md` - Example content file\r\n- `BlogList.tsx` - React list component\r\n- `BlogPost.tsx` - React MDX render component\r\n- `wrangler.toml` - Cloudflare Workers config\r\n\r\n### References (references/)\r\n\r\nDeep-dive documentation for advanced topics:\r\n\r\n- `schema-patterns.md` - Common Zod schema patterns\r\n- `transform-cookbook.md` - Transform function recipes\r\n- `mdx-components.md` - MDX + React integration\r\n- `deployment-guide.md` - Cloudflare Workers setup\r\n\r\n**When to load**: Claude should load these when you need advanced patterns beyond basic setup.\r\n\r\n### Scripts (scripts/)\r\n\r\n- `init-content-collections.sh` - One-command automated setup\r\n\r\n---"
  }
}