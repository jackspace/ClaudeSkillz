{
  "description": "|",
  "metadata": {
    "license": "MIT"
  },
  "references": {
    "files": [
      "references/common-hooks.md",
      "references/example-reference.md",
      "references/github-auto-updates.md",
      "references/security-checklist.md"
    ]
  },
  "content": "**Status**: Production Ready\r\n**Last Updated**: 2025-11-06\r\n**Dependencies**: None (WordPress 5.9+, PHP 7.4+)\r\n**Latest Versions**: WordPress 6.7+, PHP 8.0+ recommended\r\n\r\n---\r\n\r\n\r\n### Templates (templates/)\r\n\r\nUse these production-ready templates to scaffold plugins quickly:\r\n\r\n- `templates/plugin-simple/` - Simple plugin with functions\r\n- `templates/plugin-oop/` - Object-oriented plugin structure\r\n- `templates/plugin-psr4/` - Modern PSR-4 plugin with Composer\r\n- `templates/examples/meta-box.php` - Meta box implementation\r\n- `templates/examples/settings-page.php` - Settings API page\r\n- `templates/examples/custom-post-type.php` - CPT registration\r\n- `templates/examples/rest-endpoint.php` - REST API endpoint\r\n- `templates/examples/ajax-handler.php` - AJAX implementation\r\n\r\n**When Claude should use these**: When creating new plugins or implementing specific functionality patterns.\r\n\r\n### Scripts (scripts/)\r\n\r\n- `scripts/scaffold-plugin.sh` - Interactive plugin scaffolding\r\n- `scripts/check-security.sh` - Security audit for common issues\r\n- `scripts/validate-headers.sh` - Verify plugin headers\r\n\r\n**Example Usage:**\r\n```bash\r\n./scripts/scaffold-plugin.sh my-plugin simple\r\n\r\n./scripts/check-security.sh my-plugin.php\r\n\r\n\r\n### Enabling GitHub Auto-Updates\r\n\r\nPlugins hosted outside WordPress.org can still provide automatic updates using **Plugin Update Checker** by YahnisElsts. This is the recommended solution for most use cases.\r\n\r\n**Quick Start:**\r\n\r\n```php\r\n// 1. Install library (git submodule or Composer)\r\ngit submodule add https://github.com/YahnisElsts/plugin-update-checker.git\r\n\r\n// 2. Add to main plugin file\r\nrequire plugin_dir_path( __FILE__ ) . 'plugin-update-checker/plugin-update-checker.php';\r\nuse YahnisElsts\\PluginUpdateChecker\\v5\\PucFactory;\r\n\r\n$updateChecker = PucFactory::buildUpdateChecker(\r\n    'https://github.com/yourusername/your-plugin/',\r\n    __FILE__,\r\n    'your-plugin-slug'\r\n);\r\n\r\n// Use GitHub Releases (recommended)\r\n$updateChecker->getVcsApi()->enableReleaseAssets();\r\n\r\n// For private repos, use token from wp-config.php\r\nif ( defined( 'YOUR_PLUGIN_GITHUB_TOKEN' ) ) {\r\n    $updateChecker->setAuthentication( YOUR_PLUGIN_GITHUB_TOKEN );\r\n}\r\n```\r\n\r\n**Deployment:**\r\n\r\n```bash\r\ngit add my-plugin.php\r\ngit commit -m \"Bump version to 1.0.1\"\r\ngit tag 1.0.1\r\ngit push origin main\r\ngit push origin 1.0.1",
  "name": "wordpress-plugin-core",
  "id": "wordpress-plugin-core",
  "sections": {
    "Complete Setup Checklist": "Use this checklist to verify your plugin:\r\n\r\n- [ ] Plugin header complete with all fields\r\n- [ ] ABSPATH check at top of every PHP file\r\n- [ ] All functions/classes use unique prefix\r\n- [ ] All forms have nonce verification\r\n- [ ] All user input is sanitized\r\n- [ ] All output is escaped\r\n- [ ] All database queries use $wpdb->prepare()\r\n- [ ] Capability checks (not just is_admin())\r\n- [ ] Custom post types flush rewrite rules on activation\r\n- [ ] Deactivation hook only clears temporary data\r\n- [ ] uninstall.php handles permanent cleanup\r\n- [ ] Text domain matches plugin slug\r\n- [ ] Scripts/styles only load where needed\r\n- [ ] WP_DEBUG enabled during development\r\n- [ ] Tested with Query Monitor for performance\r\n- [ ] No deprecated function warnings\r\n- [ ] Works with latest WordPress version\r\n\r\n---\r\n\r\n**Questions? Issues?**\r\n\r\n1. Check `references/common-errors.md` for extended troubleshooting\r\n2. Verify all steps in the security foundation\r\n3. Check official docs: https://developer.wordpress.org/plugins/\r\n4. Enable WP_DEBUG and check debug.log\r\n5. Use Query Monitor plugin to debug hooks and queries",
    "Known Issues Prevention": "This skill prevents **20** documented issues:\r\n\r\n### Issue #1: SQL Injection\r\n**Error**: Database compromised via unescaped user input\r\n**Source**: https://patchstack.com/articles/sql-injection/ (15% of all vulnerabilities)\r\n**Why It Happens**: Direct concatenation of user input into SQL queries\r\n**Prevention**: Always use `$wpdb->prepare()` with placeholders\r\n\r\n```php\r\n// VULNERABLE\r\n$wpdb->query( \"DELETE FROM {$wpdb->prefix}table WHERE id = {$_GET['id']}\" );\r\n\r\n// SECURE\r\n$wpdb->query( $wpdb->prepare( \"DELETE FROM {$wpdb->prefix}table WHERE id = %d\", $_GET['id'] ) );\r\n```\r\n\r\n### Issue #2: XSS (Cross-Site Scripting)\r\n**Error**: Malicious JavaScript executed in user browsers\r\n**Source**: https://patchstack.com (35% of all vulnerabilities)\r\n**Why It Happens**: Outputting unsanitized user data to HTML\r\n**Prevention**: Always escape output with context-appropriate function\r\n\r\n```php\r\n// VULNERABLE\r\necho $_POST['name'];\r\necho '<div class=\"' . $_POST['class'] . '\">';\r\n\r\n// SECURE\r\necho esc_html( $_POST['name'] );\r\necho '<div class=\"' . esc_attr( $_POST['class'] ) . '\">';\r\n```\r\n\r\n### Issue #3: CSRF (Cross-Site Request Forgery)\r\n**Error**: Unauthorized actions performed on behalf of users\r\n**Source**: https://blog.nintechnet.com/25-wordpress-plugins-vulnerable-to-csrf-attacks/\r\n**Why It Happens**: No verification that requests originated from your site\r\n**Prevention**: Use nonces with `wp_nonce_field()` and `wp_verify_nonce()`\r\n\r\n```php\r\n// VULNERABLE\r\nif ( $_POST['action'] == 'delete' ) {\r\n    delete_user( $_POST['user_id'] );\r\n}\r\n\r\n// SECURE\r\nif ( ! wp_verify_nonce( $_POST['nonce'], 'mypl_delete_user' ) ) {\r\n    wp_die( 'Security check failed' );\r\n}\r\ndelete_user( absint( $_POST['user_id'] ) );\r\n```\r\n\r\n### Issue #4: Missing Capability Checks\r\n**Error**: Regular users can access admin functions\r\n**Source**: WordPress Security Review Guidelines\r\n**Why It Happens**: Using `is_admin()` instead of `current_user_can()`\r\n**Prevention**: Always check capabilities, not just admin context\r\n\r\n```php\r\n// VULNERABLE\r\nif ( is_admin() ) {\r\n    // Any logged-in user can trigger this\r\n}\r\n\r\n// SECURE\r\nif ( current_user_can( 'manage_options' ) ) {\r\n    // Only administrators can trigger this\r\n}\r\n```\r\n\r\n### Issue #5: Direct File Access\r\n**Error**: PHP files executed outside WordPress context\r\n**Source**: WordPress Plugin Handbook\r\n**Why It Happens**: No ABSPATH check at top of file\r\n**Prevention**: Add ABSPATH check to every PHP file\r\n\r\n```php\r\n// Add to top of EVERY PHP file\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n```\r\n\r\n### Issue #6: Prefix Collision\r\n**Error**: Functions/classes conflict with other plugins\r\n**Source**: WordPress Coding Standards\r\n**Why It Happens**: Generic names without unique prefix\r\n**Prevention**: Use 4-5 character prefix on ALL global code\r\n\r\n```php\r\n// CAUSES CONFLICTS\r\nfunction init() {}\r\nclass Settings {}\r\nadd_option( 'api_key', $value );\r\n\r\n// SAFE\r\nfunction mypl_init() {}\r\nclass MyPL_Settings {}\r\nadd_option( 'mypl_api_key', $value );\r\n```\r\n\r\n### Issue #7: Rewrite Rules Not Flushed\r\n**Error**: Custom post types return 404 errors\r\n**Source**: WordPress Plugin Handbook\r\n**Why It Happens**: Forgot to flush rewrite rules after registering CPT\r\n**Prevention**: Flush on activation, clear on deactivation\r\n\r\n```php\r\nfunction mypl_activate() {\r\n    mypl_register_cpt();\r\n    flush_rewrite_rules();\r\n}\r\nregister_activation_hook( __FILE__, 'mypl_activate' );\r\n\r\nfunction mypl_deactivate() {\r\n    flush_rewrite_rules();\r\n}\r\nregister_deactivation_hook( __FILE__, 'mypl_deactivate' );\r\n```\r\n\r\n### Issue #8: Transients Not Cleaned\r\n**Error**: Database accumulates expired transients\r\n**Source**: WordPress Transients API Documentation\r\n**Why It Happens**: No cleanup on uninstall\r\n**Prevention**: Delete transients in uninstall.php\r\n\r\n```php\r\n// uninstall.php\r\nif ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {\r\n    exit;\r\n}\r\n\r\nglobal $wpdb;\r\n$wpdb->query( \"DELETE FROM {$wpdb->options} WHERE option_name LIKE '_transient_mypl_%'\" );\r\n$wpdb->query( \"DELETE FROM {$wpdb->options} WHERE option_name LIKE '_transient_timeout_mypl_%'\" );\r\n```\r\n\r\n### Issue #9: Scripts Loaded Everywhere\r\n**Error**: Performance degraded by unnecessary asset loading\r\n**Source**: WordPress Performance Best Practices\r\n**Why It Happens**: Enqueuing scripts/styles without conditional checks\r\n**Prevention**: Only load assets where needed\r\n\r\n```php\r\n// BAD - Loads on every page\r\nadd_action( 'wp_enqueue_scripts', function() {\r\n    wp_enqueue_script( 'mypl-script', $url );\r\n} );\r\n\r\n// GOOD - Only loads on specific page\r\nadd_action( 'wp_enqueue_scripts', function() {\r\n    if ( is_page( 'my-page' ) ) {\r\n        wp_enqueue_script( 'mypl-script', $url, array( 'jquery' ), '1.0', true );\r\n    }\r\n} );\r\n```\r\n\r\n### Issue #10: Missing Sanitization on Save\r\n**Error**: Malicious data stored in database\r\n**Source**: WordPress Data Validation\r\n**Why It Happens**: Saving $_POST data without sanitization\r\n**Prevention**: Always sanitize before saving\r\n\r\n```php\r\n// VULNERABLE\r\nupdate_option( 'mypl_setting', $_POST['value'] );\r\n\r\n// SECURE\r\nupdate_option( 'mypl_setting', sanitize_text_field( $_POST['value'] ) );\r\n```\r\n\r\n### Issue #11: Incorrect LIKE Queries\r\n**Error**: SQL syntax errors or injection vulnerabilities\r\n**Source**: WordPress $wpdb Documentation\r\n**Why It Happens**: LIKE wildcards not escaped properly\r\n**Prevention**: Use `$wpdb->esc_like()`\r\n\r\n```php\r\n// WRONG\r\n$search = '%' . $term . '%';\r\n\r\n// CORRECT\r\n$search = '%' . $wpdb->esc_like( $term ) . '%';\r\n$results = $wpdb->get_results( $wpdb->prepare( \"... WHERE title LIKE %s\", $search ) );\r\n```\r\n\r\n### Issue #12: Using extract()\r\n**Error**: Variable collision and security vulnerabilities\r\n**Source**: WordPress Coding Standards\r\n**Why It Happens**: extract() creates variables from array keys\r\n**Prevention**: Never use extract(), access array elements directly\r\n\r\n```php\r\n// DANGEROUS\r\nextract( $_POST );\r\n// Now $any_array_key becomes a variable\r\n\r\n// SAFE\r\n$name = isset( $_POST['name'] ) ? sanitize_text_field( $_POST['name'] ) : '';\r\n```\r\n\r\n### Issue #13: Missing Permission Callback in REST API\r\n**Error**: Endpoints accessible to everyone\r\n**Source**: WordPress REST API Handbook\r\n**Why It Happens**: No `permission_callback` specified\r\n**Prevention**: Always add permission_callback\r\n\r\n```php\r\n// VULNERABLE\r\nregister_rest_route( 'myplugin/v1', '/data', array(\r\n    'callback' => 'my_callback',\r\n) );\r\n\r\n// SECURE\r\nregister_rest_route( 'myplugin/v1', '/data', array(\r\n    'callback'            => 'my_callback',\r\n    'permission_callback' => function() {\r\n        return current_user_can( 'edit_posts' );\r\n    },\r\n) );\r\n```\r\n\r\n### Issue #14: Uninstall Hook Registered Repeatedly\r\n**Error**: Option written on every page load\r\n**Source**: WordPress Plugin Handbook\r\n**Why It Happens**: register_uninstall_hook() called in main flow\r\n**Prevention**: Use uninstall.php file instead\r\n\r\n```php\r\n// BAD - Runs on every page load\r\nregister_uninstall_hook( __FILE__, 'mypl_uninstall' );\r\n\r\n// GOOD - Use uninstall.php file (preferred method)\r\n// Create uninstall.php in plugin root\r\n```\r\n\r\n### Issue #15: Data Deleted on Deactivation\r\n**Error**: Users lose data when temporarily disabling plugin\r\n**Source**: WordPress Plugin Development Best Practices\r\n**Why It Happens**: Confusion about deactivation vs uninstall\r\n**Prevention**: Only delete data in uninstall.php, never on deactivation\r\n\r\n```php\r\n// WRONG - Deletes user data on deactivation\r\nregister_deactivation_hook( __FILE__, function() {\r\n    delete_option( 'mypl_user_settings' );\r\n} );\r\n\r\n// CORRECT - Only clear temporary data on deactivation\r\nregister_deactivation_hook( __FILE__, function() {\r\n    delete_transient( 'mypl_cache' );\r\n} );\r\n\r\n// CORRECT - Delete all data in uninstall.php\r\n```\r\n\r\n### Issue #16: Using Deprecated Functions\r\n**Error**: Plugin breaks on WordPress updates\r\n**Source**: WordPress Deprecated Functions List\r\n**Why It Happens**: Using functions removed in newer WordPress versions\r\n**Prevention**: Enable WP_DEBUG during development\r\n\r\n```php\r\n// In wp-config.php (development only)\r\ndefine( 'WP_DEBUG', true );\r\ndefine( 'WP_DEBUG_LOG', true );\r\ndefine( 'WP_DEBUG_DISPLAY', false );\r\n```\r\n\r\n### Issue #17: Text Domain Mismatch\r\n**Error**: Translations don't load\r\n**Source**: WordPress Internationalization\r\n**Why It Happens**: Text domain doesn't match plugin slug\r\n**Prevention**: Use exact plugin slug everywhere\r\n\r\n```php\r\n// Plugin header\r\n// Text Domain: my-plugin\r\n\r\n// In code - MUST MATCH EXACTLY\r\n__( 'Text', 'my-plugin' );\r\n_e( 'Text', 'my-plugin' );\r\n```\r\n\r\n### Issue #18: Missing Plugin Dependencies\r\n**Error**: Fatal error when required plugin is inactive\r\n**Source**: WordPress Plugin Dependencies\r\n**Why It Happens**: No check for required plugins\r\n**Prevention**: Check for dependencies on plugins_loaded\r\n\r\n```php\r\nadd_action( 'plugins_loaded', function() {\r\n    if ( ! class_exists( 'WooCommerce' ) ) {\r\n        add_action( 'admin_notices', function() {\r\n            echo '<div class=\"error\"><p>My Plugin requires WooCommerce.</p></div>';\r\n        } );\r\n        return;\r\n    }\r\n    // Initialize plugin\r\n} );\r\n```\r\n\r\n### Issue #19: Autosave Triggering Meta Save\r\n**Error**: Meta saved multiple times, performance issues\r\n**Source**: WordPress Post Meta\r\n**Why It Happens**: No autosave check in save_post hook\r\n**Prevention**: Check for DOING_AUTOSAVE constant\r\n\r\n```php\r\nadd_action( 'save_post', function( $post_id ) {\r\n    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {\r\n        return;\r\n    }\r\n\r\n    // Safe to save meta\r\n} );\r\n```\r\n\r\n### Issue #20: admin-ajax.php Performance\r\n**Error**: Slow AJAX responses\r\n**Source**: https://deliciousbrains.com/comparing-wordpress-rest-api-performance-admin-ajax-php/\r\n**Why It Happens**: admin-ajax.php loads entire WordPress core\r\n**Prevention**: Use REST API for new projects (10x faster)\r\n\r\n```php\r\n// OLD: admin-ajax.php (still works but slower)\r\nadd_action( 'wp_ajax_mypl_action', 'mypl_ajax_handler' );\r\n\r\n// NEW: REST API (10x faster, recommended)\r\nadd_action( 'rest_api_init', function() {\r\n    register_rest_route( 'myplugin/v1', '/endpoint', array(\r\n        'methods'             => 'POST',\r\n        'callback'            => 'mypl_rest_handler',\r\n        'permission_callback' => function() {\r\n            return current_user_can( 'edit_posts' );\r\n        },\r\n    ) );\r\n} );\r\n```\r\n\r\n---",
    "Plugin Architecture Patterns": "### Pattern 1: Simple Plugin (Functions Only)\r\n\r\n**When to use**: Small plugins with <5 functions, no complex state\r\n\r\n```php\r\n<?php\r\n/**\r\n * Plugin Name: Simple Plugin\r\n */\r\n\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n\r\nfunction mypl_init() {\r\n    // Your code here\r\n}\r\nadd_action( 'init', 'mypl_init' );\r\n\r\nfunction mypl_admin_menu() {\r\n    add_options_page(\r\n        'My Plugin',\r\n        'My Plugin',\r\n        'manage_options',\r\n        'my-plugin',\r\n        'mypl_settings_page'\r\n    );\r\n}\r\nadd_action( 'admin_menu', 'mypl_admin_menu' );\r\n\r\nfunction mypl_settings_page() {\r\n    ?>\r\n    <div class=\"wrap\">\r\n        <h1>My Plugin Settings</h1>\r\n    </div>\r\n    <?php\r\n}\r\n```\r\n\r\n### Pattern 2: OOP Plugin\r\n\r\n**When to use**: Medium plugins with related functionality, need organization\r\n\r\n```php\r\n<?php\r\n/**\r\n * Plugin Name: OOP Plugin\r\n */\r\n\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n\r\nclass MyPL_Plugin {\r\n\r\n    private static $instance = null;\r\n\r\n    public static function get_instance() {\r\n        if ( null === self::$instance ) {\r\n            self::$instance = new self();\r\n        }\r\n        return self::$instance;\r\n    }\r\n\r\n    private function __construct() {\r\n        $this->define_constants();\r\n        $this->init_hooks();\r\n    }\r\n\r\n    private function define_constants() {\r\n        define( 'MYPL_VERSION', '1.0.0' );\r\n        define( 'MYPL_PLUGIN_DIR', plugin_dir_path( __FILE__ ) );\r\n        define( 'MYPL_PLUGIN_URL', plugin_dir_url( __FILE__ ) );\r\n    }\r\n\r\n    private function init_hooks() {\r\n        add_action( 'init', array( $this, 'init' ) );\r\n        add_action( 'admin_menu', array( $this, 'admin_menu' ) );\r\n    }\r\n\r\n    public function init() {\r\n        // Initialization code\r\n    }\r\n\r\n    public function admin_menu() {\r\n        add_options_page(\r\n            'My Plugin',\r\n            'My Plugin',\r\n            'manage_options',\r\n            'my-plugin',\r\n            array( $this, 'settings_page' )\r\n        );\r\n    }\r\n\r\n    public function settings_page() {\r\n        ?>\r\n        <div class=\"wrap\">\r\n            <h1>My Plugin Settings</h1>\r\n        </div>\r\n        <?php\r\n    }\r\n}\r\n\r\n// Initialize plugin\r\nfunction mypl() {\r\n    return MyPL_Plugin::get_instance();\r\n}\r\nmypl();\r\n```\r\n\r\n### Pattern 3: PSR-4 Plugin (Modern, Recommended)\r\n\r\n**When to use**: Large/modern plugins, team development, 2025+ best practice\r\n\r\n**Directory Structure**:\r\n```\r\nmy-plugin/\r\n├── my-plugin.php       # Main file\r\n├── composer.json       # Autoloading config\r\n├── src/                # PSR-4 autoloaded classes\r\n│   ├── Admin.php\r\n│   ├── Frontend.php\r\n│   └── Settings.php\r\n├── languages/\r\n└── uninstall.php\r\n```\r\n\r\n**composer.json**:\r\n```json\r\n{\r\n    \"name\": \"my-vendor/my-plugin\",\r\n    \"autoload\": {\r\n        \"psr-4\": {\r\n            \"MyPlugin\\\\\": \"src/\"\r\n        }\r\n    },\r\n    \"require\": {\r\n        \"php\": \">=7.4\"\r\n    }\r\n}\r\n```\r\n\r\n**my-plugin.php**:\r\n```php\r\n<?php\r\n/**\r\n * Plugin Name: PSR-4 Plugin\r\n */\r\n\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n\r\n// Composer autoloader\r\nrequire_once __DIR__ . '/vendor/autoload.php';\r\n\r\nuse MyPlugin\\Admin;\r\nuse MyPlugin\\Frontend;\r\n\r\nclass MyPlugin {\r\n\r\n    private static $instance = null;\r\n\r\n    public static function get_instance() {\r\n        if ( null === self::$instance ) {\r\n            self::$instance = new self();\r\n        }\r\n        return self::$instance;\r\n    }\r\n\r\n    private function __construct() {\r\n        $this->init();\r\n    }\r\n\r\n    private function init() {\r\n        new Admin();\r\n        new Frontend();\r\n    }\r\n}\r\n\r\nMyPlugin::get_instance();\r\n```\r\n\r\n**src/Admin.php**:\r\n```php\r\n<?php\r\n\r\nnamespace MyPlugin;\r\n\r\nclass Admin {\r\n\r\n    public function __construct() {\r\n        add_action( 'admin_menu', array( $this, 'add_menu' ) );\r\n    }\r\n\r\n    public function add_menu() {\r\n        add_options_page(\r\n            'My Plugin',\r\n            'My Plugin',\r\n            'manage_options',\r\n            'my-plugin',\r\n            array( $this, 'settings_page' )\r\n        );\r\n    }\r\n\r\n    public function settings_page() {\r\n        ?>\r\n        <div class=\"wrap\">\r\n            <h1>My Plugin Settings</h1>\r\n        </div>\r\n        <?php\r\n    }\r\n}\r\n```\r\n\r\n---",
    "Critical Rules": "### Always Do\r\n\r\n✅ **Use unique prefix** (4-5 chars) for all global code (functions, classes, options, transients)\r\n✅ **Add ABSPATH check** to every PHP file: `if ( ! defined( 'ABSPATH' ) ) exit;`\r\n✅ **Check capabilities** (`current_user_can()`) not just `is_admin()`\r\n✅ **Verify nonces** for all forms and AJAX requests\r\n✅ **Use $wpdb->prepare()** for all database queries with user input\r\n✅ **Sanitize input** with `sanitize_*()` functions before saving\r\n✅ **Escape output** with `esc_*()` functions before displaying\r\n✅ **Flush rewrite rules** on activation when registering custom post types\r\n✅ **Use uninstall.php** for permanent cleanup (not deactivation hook)\r\n✅ **Follow WordPress Coding Standards** (tabs for indentation, Yoda conditions)\r\n\r\n### Never Do\r\n\r\n❌ **Never use extract()** - Creates security vulnerabilities\r\n❌ **Never trust $_POST/$_GET** without sanitization\r\n❌ **Never concatenate user input into SQL** - Always use prepare()\r\n❌ **Never use `is_admin()` alone** for permission checks\r\n❌ **Never output unsanitized data** - Always escape\r\n❌ **Never use generic function/class names** - Always prefix\r\n❌ **Never use short PHP tags** `<?` or `<?=` - Use `<?php` only\r\n❌ **Never delete user data on deactivation** - Only on uninstall\r\n❌ **Never register uninstall hook repeatedly** - Only once on activation\r\n❌ **Never use `register_uninstall_hook()` in main flow** - Use uninstall.php instead\r\n\r\n---",
    "Advanced Topics": "### Internationalization (i18n)\r\n\r\n```php\r\n// Load text domain\r\nfunction mypl_load_textdomain() {\r\n    load_plugin_textdomain( 'my-plugin', false, dirname( plugin_basename( __FILE__ ) ) . '/languages' );\r\n}\r\nadd_action( 'plugins_loaded', 'mypl_load_textdomain' );\r\n\r\n// Translatable strings\r\n__( 'Text', 'my-plugin' );  // Returns translated string\r\n_e( 'Text', 'my-plugin' );  // Echoes translated string\r\n_n( 'One item', '%d items', $count, 'my-plugin' );  // Plural forms\r\nesc_html__( 'Text', 'my-plugin' );  // Translate and escape\r\nesc_html_e( 'Text', 'my-plugin' );  // Translate, escape, and echo\r\n```\r\n\r\n### WP-CLI Commands\r\n\r\n```php\r\nif ( defined( 'WP_CLI' ) && WP_CLI ) {\r\n\r\n    class MyPL_CLI_Command {\r\n\r\n        /**\r\n         * Process data\r\n         *\r\n         * ## EXAMPLES\r\n         *\r\n         *     wp mypl process --limit=100\r\n         *\r\n         * @param array $args\r\n         * @param array $assoc_args\r\n         */\r\n        public function process( $args, $assoc_args ) {\r\n            $limit = isset( $assoc_args['limit'] ) ? absint( $assoc_args['limit'] ) : 10;\r\n\r\n            WP_CLI::line( \"Processing $limit items...\" );\r\n\r\n            // Process...\r\n\r\n            WP_CLI::success( 'Processing complete!' );\r\n        }\r\n    }\r\n\r\n    WP_CLI::add_command( 'mypl', 'MyPL_CLI_Command' );\r\n}\r\n```\r\n\r\n### Scheduled Events (Cron)\r\n\r\n```php\r\n// Schedule event on activation\r\nfunction mypl_activate() {\r\n    if ( ! wp_next_scheduled( 'mypl_daily_task' ) ) {\r\n        wp_schedule_event( time(), 'daily', 'mypl_daily_task' );\r\n    }\r\n}\r\nregister_activation_hook( __FILE__, 'mypl_activate' );\r\n\r\n// Clear event on deactivation\r\nfunction mypl_deactivate() {\r\n    wp_clear_scheduled_hook( 'mypl_daily_task' );\r\n}\r\nregister_deactivation_hook( __FILE__, 'mypl_deactivate' );\r\n\r\n// Hook to scheduled event\r\nfunction mypl_do_daily_task() {\r\n    // Perform task\r\n}\r\nadd_action( 'mypl_daily_task', 'mypl_do_daily_task' );\r\n```\r\n\r\n### Plugin Dependencies Check\r\n\r\n```php\r\nadd_action( 'admin_init', function() {\r\n    // Check for WooCommerce\r\n    if ( ! class_exists( 'WooCommerce' ) ) {\r\n        deactivate_plugins( plugin_basename( __FILE__ ) );\r\n\r\n        add_action( 'admin_notices', function() {\r\n            echo '<div class=\"error\"><p><strong>My Plugin</strong> requires WooCommerce to be installed and active.</p></div>';\r\n        } );\r\n\r\n        if ( isset( $_GET['activate'] ) ) {\r\n            unset( $_GET['activate'] );\r\n        }\r\n    }\r\n} );\r\n```\r\n\r\n---",
    "Dependencies": "**Required**:\r\n- WordPress 5.9+ (recommend 6.7+)\r\n- PHP 7.4+ (recommend 8.0+)\r\n\r\n**Optional**:\r\n- Composer 2.0+ - For PSR-4 autoloading\r\n- WP-CLI 2.0+ - For command-line plugin management\r\n- Query Monitor - For debugging and performance analysis\r\n\r\n---",
    "Common Patterns": "### Pattern 1: Custom Post Types\r\n\r\n```php\r\nfunction mypl_register_cpt() {\r\n    register_post_type( 'book', array(\r\n        'labels' => array(\r\n            'name'          => 'Books',\r\n            'singular_name' => 'Book',\r\n            'add_new_item'  => 'Add New Book',\r\n        ),\r\n        'public'       => true,\r\n        'has_archive'  => true,\r\n        'show_in_rest' => true,  // Gutenberg support\r\n        'supports'     => array( 'title', 'editor', 'thumbnail', 'excerpt' ),\r\n        'rewrite'      => array( 'slug' => 'books' ),\r\n        'menu_icon'    => 'dashicons-book',\r\n    ) );\r\n}\r\nadd_action( 'init', 'mypl_register_cpt' );\r\n\r\n// CRITICAL: Flush rewrite rules on activation\r\nfunction mypl_activate() {\r\n    mypl_register_cpt();\r\n    flush_rewrite_rules();\r\n}\r\nregister_activation_hook( __FILE__, 'mypl_activate' );\r\n\r\nfunction mypl_deactivate() {\r\n    flush_rewrite_rules();\r\n}\r\nregister_deactivation_hook( __FILE__, 'mypl_deactivate' );\r\n```\r\n\r\n### Pattern 2: Custom Taxonomies\r\n\r\n```php\r\nfunction mypl_register_taxonomy() {\r\n    register_taxonomy( 'genre', 'book', array(\r\n        'labels' => array(\r\n            'name'          => 'Genres',\r\n            'singular_name' => 'Genre',\r\n        ),\r\n        'hierarchical' => true,  // Like categories\r\n        'show_in_rest' => true,\r\n        'rewrite'      => array( 'slug' => 'genre' ),\r\n    ) );\r\n}\r\nadd_action( 'init', 'mypl_register_taxonomy' );\r\n```\r\n\r\n### Pattern 3: Meta Boxes\r\n\r\n```php\r\nfunction mypl_add_meta_box() {\r\n    add_meta_box(\r\n        'book_details',\r\n        'Book Details',\r\n        'mypl_meta_box_html',\r\n        'book',\r\n        'normal',\r\n        'high'\r\n    );\r\n}\r\nadd_action( 'add_meta_boxes', 'mypl_add_meta_box' );\r\n\r\nfunction mypl_meta_box_html( $post ) {\r\n    $isbn = get_post_meta( $post->ID, '_book_isbn', true );\r\n\r\n    wp_nonce_field( 'mypl_save_meta', 'mypl_meta_nonce' );\r\n    ?>\r\n    <label for=\"book_isbn\">ISBN:</label>\r\n    <input type=\"text\" id=\"book_isbn\" name=\"book_isbn\" value=\"<?php echo esc_attr( $isbn ); ?>\" />\r\n    <?php\r\n}\r\n\r\nfunction mypl_save_meta( $post_id ) {\r\n    // Security checks\r\n    if ( ! isset( $_POST['mypl_meta_nonce'] )\r\n         || ! wp_verify_nonce( $_POST['mypl_meta_nonce'], 'mypl_save_meta' ) ) {\r\n        return;\r\n    }\r\n\r\n    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {\r\n        return;\r\n    }\r\n\r\n    if ( ! current_user_can( 'edit_post', $post_id ) ) {\r\n        return;\r\n    }\r\n\r\n    // Save data\r\n    if ( isset( $_POST['book_isbn'] ) ) {\r\n        update_post_meta(\r\n            $post_id,\r\n            '_book_isbn',\r\n            sanitize_text_field( $_POST['book_isbn'] )\r\n        );\r\n    }\r\n}\r\nadd_action( 'save_post_book', 'mypl_save_meta' );\r\n```\r\n\r\n### Pattern 4: Settings API\r\n\r\n```php\r\nfunction mypl_add_menu() {\r\n    add_options_page(\r\n        'My Plugin Settings',\r\n        'My Plugin',\r\n        'manage_options',\r\n        'my-plugin',\r\n        'mypl_settings_page'\r\n    );\r\n}\r\nadd_action( 'admin_menu', 'mypl_add_menu' );\r\n\r\nfunction mypl_register_settings() {\r\n    register_setting( 'mypl_options', 'mypl_api_key', array(\r\n        'type'              => 'string',\r\n        'sanitize_callback' => 'sanitize_text_field',\r\n        'default'           => '',\r\n    ) );\r\n\r\n    add_settings_section(\r\n        'mypl_section',\r\n        'API Settings',\r\n        'mypl_section_callback',\r\n        'my-plugin'\r\n    );\r\n\r\n    add_settings_field(\r\n        'mypl_api_key',\r\n        'API Key',\r\n        'mypl_field_callback',\r\n        'my-plugin',\r\n        'mypl_section'\r\n    );\r\n}\r\nadd_action( 'admin_init', 'mypl_register_settings' );\r\n\r\nfunction mypl_section_callback() {\r\n    echo '<p>Configure your API settings.</p>';\r\n}\r\n\r\nfunction mypl_field_callback() {\r\n    $value = get_option( 'mypl_api_key' );\r\n    ?>\r\n    <input type=\"text\" name=\"mypl_api_key\" value=\"<?php echo esc_attr( $value ); ?>\" />\r\n    <?php\r\n}\r\n\r\nfunction mypl_settings_page() {\r\n    if ( ! current_user_can( 'manage_options' ) ) {\r\n        return;\r\n    }\r\n    ?>\r\n    <div class=\"wrap\">\r\n        <h1><?php echo esc_html( get_admin_page_title() ); ?></h1>\r\n        <form method=\"post\" action=\"options.php\">\r\n            <?php\r\n            settings_fields( 'mypl_options' );\r\n            do_settings_sections( 'my-plugin' );\r\n            submit_button();\r\n            ?>\r\n        </form>\r\n    </div>\r\n    <?php\r\n}\r\n```\r\n\r\n### Pattern 5: REST API Endpoints\r\n\r\n```php\r\nadd_action( 'rest_api_init', function() {\r\n    register_rest_route( 'myplugin/v1', '/data', array(\r\n        'methods'             => WP_REST_Server::READABLE,\r\n        'callback'            => 'mypl_rest_callback',\r\n        'permission_callback' => function() {\r\n            return current_user_can( 'edit_posts' );\r\n        },\r\n        'args'                => array(\r\n            'id' => array(\r\n                'required'          => true,\r\n                'validate_callback' => function( $param ) {\r\n                    return is_numeric( $param );\r\n                },\r\n                'sanitize_callback' => 'absint',\r\n            ),\r\n        ),\r\n    ) );\r\n} );\r\n\r\nfunction mypl_rest_callback( $request ) {\r\n    $id = $request->get_param( 'id' );\r\n\r\n    // Process...\r\n\r\n    return new WP_REST_Response( array(\r\n        'success' => true,\r\n        'data'    => $data,\r\n    ), 200 );\r\n}\r\n```\r\n\r\n### Pattern 6: AJAX Handlers (Legacy)\r\n\r\n```php\r\n// Enqueue script with localized data\r\nfunction mypl_enqueue_ajax_script() {\r\n    wp_enqueue_script( 'mypl-ajax', plugins_url( 'js/ajax.js', __FILE__ ), array( 'jquery' ), '1.0', true );\r\n\r\n    wp_localize_script( 'mypl-ajax', 'mypl_ajax_object', array(\r\n        'ajaxurl' => admin_url( 'admin-ajax.php' ),\r\n        'nonce'   => wp_create_nonce( 'mypl-ajax-nonce' ),\r\n    ) );\r\n}\r\nadd_action( 'wp_enqueue_scripts', 'mypl_enqueue_ajax_script' );\r\n\r\n// AJAX handler (logged-in users)\r\nfunction mypl_ajax_handler() {\r\n    check_ajax_referer( 'mypl-ajax-nonce', 'nonce' );\r\n\r\n    $data = sanitize_text_field( $_POST['data'] );\r\n\r\n    // Process...\r\n\r\n    wp_send_json_success( array( 'message' => 'Success' ) );\r\n}\r\nadd_action( 'wp_ajax_mypl_action', 'mypl_ajax_handler' );\r\n\r\n// AJAX handler (logged-out users)\r\nadd_action( 'wp_ajax_nopriv_mypl_action', 'mypl_ajax_handler' );\r\n```\r\n\r\n**JavaScript (js/ajax.js)**:\r\n```javascript\r\njQuery(document).ready(function($) {\r\n    $('#my-button').on('click', function() {\r\n        $.ajax({\r\n            url: mypl_ajax_object.ajaxurl,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'mypl_action',\r\n                nonce: mypl_ajax_object.nonce,\r\n                data: 'value'\r\n            },\r\n            success: function(response) {\r\n                console.log(response.data.message);\r\n            }\r\n        });\r\n    });\r\n});\r\n```\r\n\r\n### Pattern 7: Custom Database Tables\r\n\r\n```php\r\nfunction mypl_create_tables() {\r\n    global $wpdb;\r\n\r\n    $table_name = $wpdb->prefix . 'mypl_data';\r\n    $charset_collate = $wpdb->get_charset_collate();\r\n\r\n    $sql = \"CREATE TABLE $table_name (\r\n        id bigint(20) NOT NULL AUTO_INCREMENT,\r\n        user_id bigint(20) NOT NULL,\r\n        data text NOT NULL,\r\n        created datetime DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n        PRIMARY KEY  (id),\r\n        KEY user_id (user_id)\r\n    ) $charset_collate;\";\r\n\r\n    require_once ABSPATH . 'wp-admin/includes/upgrade.php';\r\n    dbDelta( $sql );\r\n\r\n    add_option( 'mypl_db_version', '1.0' );\r\n}\r\n\r\n// Create tables on activation\r\nregister_activation_hook( __FILE__, 'mypl_create_tables' );\r\n```\r\n\r\n### Pattern 8: Transients for Caching\r\n\r\n```php\r\nfunction mypl_get_expensive_data() {\r\n    // Try to get cached data\r\n    $data = get_transient( 'mypl_expensive_data' );\r\n\r\n    if ( false === $data ) {\r\n        // Not cached - regenerate\r\n        $data = perform_expensive_operation();\r\n\r\n        // Cache for 12 hours\r\n        set_transient( 'mypl_expensive_data', $data, 12 * HOUR_IN_SECONDS );\r\n    }\r\n\r\n    return $data;\r\n}\r\n\r\n// Clear cache when data changes\r\nfunction mypl_clear_cache() {\r\n    delete_transient( 'mypl_expensive_data' );\r\n}\r\nadd_action( 'save_post', 'mypl_clear_cache' );\r\n```\r\n\r\n---",
    "The 5-Step Security Foundation": "WordPress plugin security has THREE components that must ALL be present:\r\n\r\n### Step 1: Use Unique Prefix for Everything\r\n\r\n**Why**: Prevents naming conflicts with other plugins and WordPress core.\r\n\r\n**Rules**:\r\n- 4-5 characters minimum\r\n- Apply to: functions, classes, constants, options, transients, meta keys, global variables\r\n- Avoid: `wp_`, `__`, `_`, \"WordPress\"\r\n\r\n```php\r\n// GOOD\r\nfunction mypl_function_name() {}\r\nclass MyPL_Class_Name {}\r\ndefine( 'MYPL_CONSTANT', 'value' );\r\nadd_option( 'mypl_option', 'value' );\r\nset_transient( 'mypl_cache', $data, HOUR_IN_SECONDS );\r\n\r\n// BAD\r\nfunction function_name() {}  // No prefix, will conflict\r\nclass Settings {}  // Too generic\r\n```\r\n\r\n### Step 2: Check Capabilities, Not Just Admin Status\r\n\r\n**ERROR**: Using `is_admin()` for permission checks\r\n\r\n```php\r\n// WRONG - Anyone can access admin area URLs\r\nif ( is_admin() ) {\r\n    // Delete user data - SECURITY HOLE\r\n}\r\n\r\n// CORRECT - Check user capability\r\nif ( current_user_can( 'manage_options' ) ) {\r\n    // Delete user data - Now secure\r\n}\r\n```\r\n\r\n**Common Capabilities**:\r\n- `manage_options` - Administrator\r\n- `edit_posts` - Editor/Author\r\n- `publish_posts` - Author\r\n- `edit_pages` - Editor\r\n- `read` - Subscriber\r\n\r\n### Step 3: The Security Trinity\r\n\r\n**Input → Processing → Output** each require different functions:\r\n\r\n```php\r\n// SANITIZATION (Input) - Clean user data\r\n$name = sanitize_text_field( $_POST['name'] );\r\n$email = sanitize_email( $_POST['email'] );\r\n$url = esc_url_raw( $_POST['url'] );\r\n$html = wp_kses_post( $_POST['content'] );  // Allow safe HTML\r\n$key = sanitize_key( $_POST['option'] );\r\n$ids = array_map( 'absint', $_POST['ids'] );  // Array of integers\r\n\r\n// VALIDATION (Logic) - Verify it meets requirements\r\nif ( ! is_email( $email ) ) {\r\n    wp_die( 'Invalid email' );\r\n}\r\n\r\n// ESCAPING (Output) - Make safe for display\r\necho esc_html( $name );\r\necho '<a href=\"' . esc_url( $url ) . '\">';\r\necho '<div class=\"' . esc_attr( $class ) . '\">';\r\necho '<textarea>' . esc_textarea( $content ) . '</textarea>';\r\n```\r\n\r\n**Critical Rule**: Sanitize on INPUT, escape on OUTPUT. Never trust user data.\r\n\r\n### Step 4: Nonces (CSRF Protection)\r\n\r\n**What**: One-time tokens that prove requests came from your site.\r\n\r\n**Form Pattern**:\r\n\r\n```php\r\n// Generate nonce in form\r\n<form method=\"post\">\r\n    <?php wp_nonce_field( 'mypl_action', 'mypl_nonce' ); ?>\r\n    <input type=\"text\" name=\"data\" />\r\n    <button type=\"submit\">Submit</button>\r\n</form>\r\n\r\n// Verify nonce in handler\r\nif ( ! isset( $_POST['mypl_nonce'] ) || ! wp_verify_nonce( $_POST['mypl_nonce'], 'mypl_action' ) ) {\r\n    wp_die( 'Security check failed' );\r\n}\r\n\r\n// Now safe to proceed\r\n$data = sanitize_text_field( $_POST['data'] );\r\n```\r\n\r\n**AJAX Pattern**:\r\n\r\n```javascript\r\n// JavaScript\r\njQuery.ajax({\r\n    url: ajaxurl,\r\n    data: {\r\n        action: 'mypl_ajax_action',\r\n        nonce: mypl_ajax_object.nonce,\r\n        data: formData\r\n    }\r\n});\r\n```\r\n\r\n```php\r\n// PHP Handler\r\nfunction mypl_ajax_handler() {\r\n    check_ajax_referer( 'mypl-ajax-nonce', 'nonce' );\r\n\r\n    // Safe to proceed\r\n    wp_send_json_success( array( 'message' => 'Success' ) );\r\n}\r\nadd_action( 'wp_ajax_mypl_ajax_action', 'mypl_ajax_handler' );\r\n\r\n// Localize script with nonce\r\nwp_localize_script( 'mypl-script', 'mypl_ajax_object', array(\r\n    'ajaxurl' => admin_url( 'admin-ajax.php' ),\r\n    'nonce'   => wp_create_nonce( 'mypl-ajax-nonce' ),\r\n) );\r\n```\r\n\r\n### Step 5: Prepared Statements for Database\r\n\r\n**CRITICAL**: Always use `$wpdb->prepare()` for queries with user input.\r\n\r\n```php\r\nglobal $wpdb;\r\n\r\n// WRONG - SQL Injection vulnerability\r\n$results = $wpdb->get_results( \"SELECT * FROM {$wpdb->prefix}table WHERE id = {$_GET['id']}\" );\r\n\r\n// CORRECT - Prepared statement\r\n$results = $wpdb->get_results(\r\n    $wpdb->prepare(\r\n        \"SELECT * FROM {$wpdb->prefix}table WHERE id = %d\",\r\n        $_GET['id']\r\n    )\r\n);\r\n```\r\n\r\n**Placeholders**:\r\n- `%s` - String\r\n- `%d` - Integer\r\n- `%f` - Float\r\n\r\n**LIKE Queries** (Special Case):\r\n\r\n```php\r\n$search = '%' . $wpdb->esc_like( $term ) . '%';\r\n$results = $wpdb->get_results(\r\n    $wpdb->prepare(\r\n        \"SELECT * FROM {$wpdb->prefix}posts WHERE post_title LIKE %s\",\r\n        $search\r\n    )\r\n);\r\n```\r\n\r\n---",
    "Troubleshooting": "### Problem: Plugin causes fatal error\r\n**Solution**:\r\n1. Enable WP_DEBUG in wp-config.php\r\n2. Check error log at wp-content/debug.log\r\n3. Verify all class/function names are prefixed\r\n4. Check for missing dependencies\r\n\r\n### Problem: 404 errors on custom post type pages\r\n**Solution**: Flush rewrite rules\r\n```php\r\n// Temporarily add to wp-admin\r\nflush_rewrite_rules();\r\n// Remove after visiting wp-admin once\r\n```\r\n\r\n### Problem: Nonce verification always fails\r\n**Solution**:\r\n1. Check nonce name matches in field and verification\r\n2. Verify using correct action name\r\n3. Ensure nonce hasn't expired (24 hour default)\r\n\r\n### Problem: AJAX returns 0 or -1\r\n**Solution**:\r\n1. Verify action name matches hook: `wp_ajax_{action}`\r\n2. Check nonce is being sent and verified\r\n3. Ensure handler function exists and is hooked correctly\r\n\r\n### Problem: Sanitization stripping HTML\r\n**Solution**: Use `wp_kses_post()` instead of `sanitize_text_field()` to allow safe HTML\r\n\r\n### Problem: Database queries not working\r\n**Solution**:\r\n1. Always use `$wpdb->prepare()` for queries with variables\r\n2. Check table name includes `$wpdb->prefix`\r\n3. Verify column names and syntax\r\n\r\n---",
    "Official Documentation": "- **WordPress Plugin Handbook**: https://developer.wordpress.org/plugins/\r\n- **WordPress Coding Standards**: https://developer.wordpress.org/coding-standards/\r\n- **WordPress REST API**: https://developer.wordpress.org/rest-api/\r\n- **WordPress Database Class ($wpdb)**: https://developer.wordpress.org/reference/classes/wpdb/\r\n- **WordPress Security**: https://developer.wordpress.org/apis/security/\r\n- **Settings API**: https://developer.wordpress.org/plugins/settings/settings-api/\r\n- **Custom Post Types**: https://developer.wordpress.org/plugins/post-types/\r\n- **Transients API**: https://developer.wordpress.org/apis/transients/\r\n- **Context7 Library ID**: /websites/developer_wordpress\r\n\r\n---",
    "Quick Start (10 Minutes)": "### 1. Choose Your Plugin Structure\r\n\r\nWordPress plugins can use three architecture patterns:\r\n\r\n- **Simple** (functions only) - For small plugins with <5 functions\r\n- **OOP** (Object-Oriented) - For medium plugins with related functionality\r\n- **PSR-4** (Namespaced + Composer autoload) - For large/modern plugins\r\n\r\n**Why this matters:**\r\n- Simple plugins are easiest to start but don't scale well\r\n- OOP provides organization without modern PHP features\r\n- PSR-4 is the modern standard (2025) and most maintainable\r\n\r\n### 2. Create Plugin Header\r\n\r\nEvery plugin MUST have a header comment in the main file:\r\n\r\n```php\r\n<?php\r\n/**\r\n * Plugin Name:       My Awesome Plugin\r\n * Plugin URI:        https://example.com/my-plugin/\r\n * Description:       Brief description of what this plugin does.\r\n * Version:           1.0.0\r\n * Requires at least: 5.9\r\n * Requires PHP:      7.4\r\n * Author:            Your Name\r\n * Author URI:        https://yoursite.com/\r\n * License:           GPL v2 or later\r\n * License URI:       https://www.gnu.org/licenses/gpl-2.0.html\r\n * Text Domain:       my-plugin\r\n * Domain Path:       /languages\r\n */\r\n\r\n// Exit if accessed directly\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n```\r\n\r\n**CRITICAL:**\r\n- Plugin Name is the ONLY required field\r\n- Text Domain must match plugin slug exactly (for translations)\r\n- Always add ABSPATH check to prevent direct file access\r\n\r\n### 3. Implement The Security Foundation\r\n\r\nBefore writing ANY functionality, implement these 5 security essentials:\r\n\r\n```php\r\n// 1. Unique Prefix (4-5 chars minimum)\r\ndefine( 'MYPL_VERSION', '1.0.0' );\r\n\r\nfunction mypl_init() {\r\n    // Your code\r\n}\r\nadd_action( 'init', 'mypl_init' );\r\n\r\n// 2. ABSPATH Check (every PHP file)\r\nif ( ! defined( 'ABSPATH' ) ) {\r\n    exit;\r\n}\r\n\r\n// 3. Nonces for Forms\r\n<input type=\"hidden\" name=\"mypl_nonce\" value=\"<?php echo wp_create_nonce( 'mypl_action' ); ?>\" />\r\n\r\n// 4. Sanitize Input, Escape Output\r\n$clean = sanitize_text_field( $_POST['input'] );\r\necho esc_html( $output );\r\n\r\n// 5. Prepared Statements for Database\r\nglobal $wpdb;\r\n$results = $wpdb->get_results(\r\n    $wpdb->prepare(\r\n        \"SELECT * FROM {$wpdb->prefix}table WHERE id = %d\",\r\n        $id\r\n    )\r\n);\r\n```\r\n\r\n---",
    "Using Bundled Resources": "./scripts/validate-headers.sh my-plugin.php\r\n```\r\n\r\n### References (references/)\r\n\r\nDetailed documentation that Claude can load when needed:\r\n\r\n- `references/security-checklist.md` - Complete security audit checklist\r\n- `references/hooks-reference.md` - Common WordPress hooks and filters\r\n- `references/sanitization-guide.md` - All sanitization/escaping functions\r\n- `references/wpdb-patterns.md` - Database query patterns\r\n- `references/common-errors.md` - Extended error prevention guide\r\n\r\n**When Claude should load these**: When dealing with security issues, choosing the right hook, sanitizing specific data types, writing database queries, or debugging common errors.\r\n\r\n---",
    "Distribution & Auto-Updates": "```\r\n\r\n**Key Features:**\r\n\r\n✅ Works with GitHub, GitLab, BitBucket, or custom servers\r\n✅ Supports public and private repositories\r\n✅ Uses GitHub Releases or tags for versioning\r\n✅ Secure HTTPS-based updates\r\n✅ Optional license key integration\r\n✅ Professional release notes and changelogs\r\n✅ ~100KB library footprint\r\n\r\n**Alternative Solutions:**\r\n\r\n1. **Git Updater** (user-installable plugin, no coding required)\r\n2. **Custom Update Server** (full control, requires hosting)\r\n3. **Freemius** (commercial, includes licensing and payments)\r\n\r\n**Comprehensive Resources:**\r\n\r\n- **Complete Guide**: See `references/github-auto-updates.md` (21 pages, all approaches)\r\n- **Implementation Examples**: See `examples/github-updater.php` (10 examples)\r\n- **Security Best Practices**: Checksums, signing, token storage, rate limiting\r\n- **Template Integration**: All 3 plugin templates include setup instructions\r\n\r\n**Security Considerations:**\r\n\r\n- ✅ Always use HTTPS for repository URLs\r\n- ✅ Never hardcode authentication tokens (use wp-config.php)\r\n- ✅ Implement license validation before offering updates\r\n- ✅ Optional: Add checksums for file verification\r\n- ✅ Rate limit update checks to avoid API throttling\r\n- ✅ Clear cached update data after installation\r\n\r\n**When to Use Each Approach:**\r\n\r\n| Use Case | Recommended Solution |\r\n|----------|---------------------|\r\n| Open source, public repo | Plugin Update Checker |\r\n| Private plugin, client work | Plugin Update Checker + private repo |\r\n| Commercial plugin | Freemius or Custom Server |\r\n| Multi-platform Git hosting | Git Updater |\r\n| Custom licensing needs | Custom Update Server |\r\n\r\n**ZIP Structure Requirement:**\r\n\r\n```\r\nplugin.zip\r\n└── my-plugin/       ← Plugin folder MUST be inside ZIP\r\n    ├── my-plugin.php\r\n    ├── readme.txt\r\n    └── ...\r\n```\r\n\r\nIncorrect structure will cause WordPress to create a random folder name and break the plugin!\r\n\r\n---"
  }
}