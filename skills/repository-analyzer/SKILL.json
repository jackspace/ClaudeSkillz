{
  "description": "Analyzes codebases to generate comprehensive documentation including structure, languages, frameworks, dependencies, design patterns, and technical debt. Use when user says \"analyze repository\", \"understand codebase\", \"document project\", or when exploring unfamiliar code.",
  "references": {
    "files": [
      "examples.md",
      "patterns.md"
    ]
  },
  "content": "### 1. Scan Repository Structure\r\n\r\n**Step 1: Get directory structure**\r\n```bash\r\ntree -L 3 -I 'node_modules|.git|dist|build'\r\n```\r\n\r\n**Step 2: Count files by type**\r\n```bash\r\nfind . -type f -name \"*.js\" | wc -l\r\nfind . -type f -name \"*.py\" | wc -l\r\nfind . -type f -name \"*.go\" | wc -l\r\n```\r\n\r\n**Step 3: Measure codebase size**\r\n```bash\r\ncloc . --exclude-dir=node_modules,.git,dist,build\r\n```\r\n\r\n### 2. Detect Technologies\r\n\r\n**Languages**: JavaScript, TypeScript, Python, Go, Rust, Java, etc.\r\n\r\n**Frameworks**:\r\n- **Frontend**: React, Vue, Angular, Svelte\r\n- **Backend**: Express, FastAPI, Django, Rails\r\n- **Mobile**: React Native, Flutter\r\n- **Desktop**: Electron, Tauri\r\n\r\n**Detection methods**:\r\n```javascript\r\nconst detectFramework = async () => {\r\n  // Check package.json\r\n  const packageJson = await readFile('package.json');\r\n  const dependencies = packageJson.dependencies || {};\r\n\r\n  if ('react' in dependencies) return 'React';\r\n  if ('vue' in dependencies) return 'Vue';\r\n  if ('express' in dependencies) return 'Express';\r\n\r\n  // Check requirements.txt\r\n  const requirements = await readFile('requirements.txt');\r\n  if (requirements.includes('fastapi')) return 'FastAPI';\r\n  if (requirements.includes('django')) return 'Django';\r\n\r\n  // Check go.mod\r\n  const goMod = await readFile('go.mod');\r\n  if (goMod.includes('gin-gonic')) return 'Gin';\r\n\r\n  return 'Unknown';\r\n};\r\n```\r\n\r\n### 3. Map Dependencies\r\n\r\n**For Node.js**:\r\n```bash\r\ncat package.json | jq '.dependencies'\r\ncat package.json | jq '.devDependencies'\r\n\r\nnpm outdated\r\n```\r\n\r\n**For Python**:\r\n```bash\r\ncat requirements.txt\r\n\r\npip list --outdated\r\n```\r\n\r\n**For Go**:\r\n```bash\r\ncat go.mod\r\n\r\ngo list -u -m all\r\n```\r\n\r\n### 4. Identify Architecture Patterns\r\n\r\n**Common patterns to detect**:\r\n\r\n- **MVC** (Model-View-Controller): `models/`, `views/`, `controllers/`\r\n- **Layered**: `api/`, `services/`, `repositories/`\r\n- **Feature-based**: `features/auth/`, `features/users/`\r\n- **Domain-driven**: `domain/`, `application/`, `infrastructure/`\r\n- **Microservices**: Multiple services in `services/` directory\r\n- **Monorepo**: Workspaces or packages structure\r\n\r\n**Detection logic**:\r\n```javascript\r\nconst detectArchitecture = (structure) => {\r\n  if (structure.includes('models') && structure.includes('views') && structure.includes('controllers')) {\r\n    return 'MVC Pattern';\r\n  }\r\n  if (structure.includes('features')) {\r\n    return 'Feature-based Architecture';\r\n  }\r\n  if (structure.includes('domain') && structure.includes('application')) {\r\n    return 'Domain-Driven Design';\r\n  }\r\n  if (structure.includes('services') && structure.includes('api-gateway')) {\r\n    return 'Microservices Architecture';\r\n  }\r\n  return 'Custom Architecture';\r\n};\r\n```\r\n\r\n### 5. Extract Technical Debt\r\n\r\n**Search for indicators**:\r\n```bash\r\ngrep -r \"TODO\" --include=\"*.js\" --include=\"*.py\" --include=\"*.go\"\r\n\r\ngrep -r \"FIXME\" --include=\"*.js\" --include=\"*.py\" --include=\"*.go\"\r\n\r\ngrep -r \"HACK\" --include=\"*.js\" --include=\"*.py\" --include=\"*.go\"\r\n\r\ngrep -r \"@deprecated\" --include=\"*.js\" --include=\"*.ts\"\r\n```\r\n\r\n**Complexity analysis**:\r\n```javascript\r\n// Identify long functions (potential refactor targets)\r\nconst analyzeFunctions = () => {\r\n  // Functions > 50 lines = high complexity\r\n  // Functions > 100 lines = very high complexity\r\n  // Cyclomatic complexity > 10 = needs refactoring\r\n};\r\n```\r\n\r\n### 6. Generate Documentation\r\n\r\n**Output format**:\r\n```markdown\r\n\r\n### Git History Analysis\r\n```bash\r\ngit log --pretty=format: --name-only | sort | uniq -c | sort -rg | head -10\r\n\r\ngit shortlog -sn\r\n\r\ngit log --oneline --since=\"30 days ago\" --no-merges\r\n```\r\n\r\n### Code Complexity Metrics\r\n```bash\r\nnpx eslint src/ --format json | jq '.[] | select(.messages[].ruleId == \"complexity\")'\r\n\r\n```\r\n\r\n### Dependency Security\r\n```bash",
  "name": "repository-analyzer",
  "id": "repository-analyzer",
  "sections": {
    "ðŸš€ Entry Points": "**Main Application:**\r\n- `src/index.js` - Server entry point\r\n- `src/client/index.jsx` - Client entry point\r\n\r\n**Development:**\r\n- `npm run dev` - Start dev server\r\n- `npm test` - Run tests\r\n- `npm run build` - Production build\r\n\r\n**Configuration:**\r\n- `.env.example` - Environment variables\r\n- `tsconfig.json` - TypeScript config\r\n- `jest.config.js` - Test configuration\r\n\r\n---",
    "Quick Reference": "### Trigger Phrases\r\n- \"analyze repository\"\r\n- \"understand codebase\"\r\n- \"document project\"\r\n- \"what's in this repo\"\r\n- \"codebase overview\"\r\n- \"technical debt report\"\r\n\r\n### Output Location\r\n`/home/toowired/.claude-artifacts/analysis-{project}-{timestamp}.md`\r\n\r\n### Analysis Depth Options\r\n- **Quick** (<1 min): Structure + languages only\r\n- **Standard** (1-2 min): + dependencies + patterns\r\n- **Deep** (3-5 min): + git history + complexity metrics + security audit",
    "Advanced Analysis Features": "npm audit\r\npip-audit  # for Python\r\ngo mod tidy && go list -m all  # for Go\r\n```",
    "Additional Resources": "- **[Pattern Library](patterns.md)** - Common architecture patterns\r\n- **[Analysis Examples](examples.md)** - Real-world repository analyses",
    "ðŸ“¦ Dependencies": "### Production (12 packages)\r\n- express: 4.18.2\r\n- pg: 8.11.0\r\n- jsonwebtoken: 9.0.0\r\n- ...\r\n\r\n### Development (8 packages)\r\n- typescript: 5.0.4\r\n- jest: 29.5.0\r\n- eslint: 8.40.0\r\n- ...\r\n\r\n### âš ï¸ Outdated (3 packages)\r\n- express: 4.18.2 â†’ 4.19.0 (minor update available)\r\n- jest: 29.5.0 â†’ 29.7.0 (patch updates available)\r\n\r\n---",
    "Purpose": "Quickly understand unfamiliar codebases by automatically scanning structure, detecting technologies, mapping dependencies, and generating comprehensive documentation.\r\n\r\n**For SDAM users**: Creates external documentation of codebase structure you can reference later.\r\n**For ADHD users**: Instant overview without manual exploration - saves hours of context-switching.\r\n**For all users**: Onboard to new projects in minutes instead of days.",
    "ðŸ“Š Overview": "**Primary Language:** {language}\r\n**Framework:** {framework}\r\n**Architecture:** {architecture pattern}\r\n**Total Files:** {count}\r\n**Lines of Code:** {LOC}\r\n**Last Updated:** {git log date}\r\n\r\n---",
    "Activation Triggers": "- User says: \"analyze repository\", \"understand codebase\", \"document project\"\r\n- Requests for: \"what's in this repo\", \"how does this work\", \"codebase overview\"\r\n- New project onboarding scenarios\r\n- Technical debt assessment requests",
    "ðŸ“š Additional Resources": "- [Architecture Diagram](./docs/architecture.png)\r\n- [API Documentation](./docs/api.md)\r\n- [Development Guide](./docs/development.md)\r\n\r\n---\r\n\r\n**Next Steps:**\r\n1. Address high-priority technical debt\r\n2. Update outdated dependencies\r\n3. Increase test coverage to 85%+\r\n4. Document utility functions\r\n```\r\n\r\nSee [patterns.md](patterns.md) for architecture pattern library and [examples.md](examples.md) for analysis examples.",
    "ðŸ“ Directory Structure": "```\r\nproject/\r\nâ”œâ”€â”€ src/\r\nâ”‚   â”œâ”€â”€ components/\r\nâ”‚   â”œâ”€â”€ services/\r\nâ”‚   â””â”€â”€ utils/\r\nâ”œâ”€â”€ tests/\r\nâ””â”€â”€ docs/\r\n```\r\n\r\n---",
    "Integration with Other Skills": "### Context Manager\r\nSave repository overview:\r\n```\r\nremember: Analyzed ProjectX repository\r\nType: CONTEXT\r\nTags: repository, architecture, nodejs, react\r\nContent: ProjectX uses React + Express, layered architecture,\r\n         12 high-priority TODOs, 78% test coverage\r\n```\r\n\r\n### Error Debugger\r\nIf analysis finds common issues:\r\n```\r\nInvoke error-debugger for:\r\n- Deprecated dependencies\r\n- Security vulnerabilities\r\n- Common antipatterns detected\r\n```\r\n\r\n### Browser App Creator\r\nGenerate visualization:\r\n```\r\nCreate dependency graph visualization\r\nâ†’ browser-app-creator generates interactive HTML chart\r\n```",
    "ðŸ”— Integration Points": "**External Services:**\r\n- PostgreSQL database (port 5432)\r\n- Redis cache (port 6379)\r\n- SendGrid API (email)\r\n- Stripe API (payments)\r\n\r\n**API Endpoints:**\r\n- `GET /api/users` - List users\r\n- `POST /api/auth/login` - Authentication\r\n- `GET /api/dashboard` - Dashboard data\r\n\r\n---",
    "Quality Checklist": "Before delivering documentation, verify:\r\n- âœ… Directory structure mapped\r\n- âœ… Languages and frameworks identified\r\n- âœ… Dependencies listed\r\n- âœ… Architecture pattern detected\r\n- âœ… Technical debt catalogued\r\n- âœ… Entry points documented\r\n- âœ… Common tasks explained\r\n- âœ… Markdown formatted properly",
    "ðŸ“‹ Common Tasks": "**Adding a new feature:**\r\n1. Create component in `src/components/`\r\n2. Add service logic in `src/services/`\r\n3. Create API endpoint in `src/api/`\r\n4. Write tests in `tests/`\r\n\r\n**Database changes:**\r\n1. Create migration in `migrations/`\r\n2. Update models in `src/models/`\r\n3. Run `npm run migrate`\r\n\r\n---",
    "ðŸ” Code Quality": "**Metrics:**\r\n- Average function length: 25 lines\r\n- Cyclomatic complexity: 3.2 (low)\r\n- Test coverage: 78%\r\n- TypeScript strict mode: âœ… Enabled\r\n\r\n**Strengths:**\r\n- âœ… Well-structured codebase\r\n- âœ… Good test coverage\r\n- âœ… Type-safe with TypeScript\r\n\r\n**Areas for Improvement:**\r\n- âš ï¸ 12 TODOs found (see Technical Debt section)\r\n- âš ï¸ 3 outdated dependencies\r\n- âš ï¸ Missing documentation in `/utils`\r\n\r\n---",
    "ðŸ›  Technologies": "### Frontend\r\n- React 18.2.0\r\n- TypeScript 5.0\r\n- Tailwind CSS 3.3\r\n\r\n### Backend\r\n- Node.js 18\r\n- Express 4.18\r\n- PostgreSQL 15\r\n\r\n### DevOps\r\n- Docker\r\n- GitHub Actions\r\n- Jest for testing\r\n\r\n---",
    "ðŸ— Architecture": "**Pattern:** Layered Architecture\r\n\r\n**Layers:**\r\n1. **API Layer** (`src/api/`): REST endpoints, request validation\r\n2. **Service Layer** (`src/services/`): Business logic\r\n3. **Repository Layer** (`src/repositories/`): Database access\r\n4. **Models** (`src/models/`): Data structures\r\n\r\n**Data Flow:**\r\n```\r\nClient â†’ API â†’ Service â†’ Repository â†’ Database\r\n```\r\n\r\n---",
    "Success Criteria": "âœ… Complete codebase structure mapped\r\nâœ… All technologies identified correctly\r\nâœ… Dependencies catalogued with versions\r\nâœ… Architecture pattern detected\r\nâœ… Technical debt surfaced\r\nâœ… Documentation generated in <2 minutes\r\nâœ… Markdown output saved to artifacts\r\nâœ… Actionable recommendations provided",
    "ðŸ› Technical Debt": "### High Priority (3)\r\n- **FIXME** in `src/services/auth.js:42`: JWT refresh token rotation not implemented\r\n- **TODO** in `src/api/users.js:78`: Add rate limiting\r\n- **HACK** in `src/utils/cache.js:23`: Using setTimeout instead of proper cache expiry\r\n\r\n### Medium Priority (5)\r\n- **TODO** in `src/components/Dashboard.jsx:15`: Optimize re-renders\r\n- **TODO** in `tests/integration/api.test.js:100`: Add more edge cases\r\n- ...\r\n\r\n### Low Priority (4)\r\n- **TODO** in `README.md:50`: Update installation instructions\r\n- ...\r\n\r\n---",
    "Common Analysis Scenarios": "### New Project Onboarding\r\nUser joins unfamiliar project â†’ analyzer provides complete overview in minutes\r\n\r\n### Technical Debt Assessment\r\nUser needs to evaluate legacy code â†’ analyzer identifies all TODOs/FIXMEs/HACKs\r\n\r\n### Dependency Audit\r\nUser wants to check outdated packages â†’ analyzer lists all outdated dependencies with versions\r\n\r\n### Architecture Documentation\r\nUser needs to document existing project â†’ analyzer generates comprehensive architecture docs",
    "Output Delivery": "**Format**: Markdown file saved to `/home/toowired/.claude-artifacts/analysis-{project}-{timestamp}.md`\r\n\r\n**Notify user**:\r\n```\r\nâœ… **{Project Name} Analysis** complete!\r\n\r\n**Summary:**\r\n- {LOC} lines of code across {file_count} files\r\n- Primary stack: {stack}\r\n- Architecture: {pattern}\r\n- {todo_count} TODOs found\r\n\r\n**Documentation saved to:** {filepath}\r\n\r\n**Key findings:**\r\n1. {finding_1}\r\n2. {finding_2}\r\n3. {finding_3}\r\n\r\n**Recommended actions:**\r\n- {action_1}\r\n- {action_2}\r\n```",
    "Core Workflow": "**Generated:** {timestamp}\r\n**Analyzed by:** Claude Code Repository Analyzer\r\n\r\n---"
  }
}