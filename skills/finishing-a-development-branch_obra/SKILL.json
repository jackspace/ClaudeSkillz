{
  "sections": {
    "Common Mistakes": "**Skipping test verification**\r\n- **Problem:** Merge broken code, create failing PR\r\n- **Fix:** Always verify tests before offering options\r\n\r\n**Open-ended questions**\r\n- **Problem:** \"What should I do next?\" → ambiguous\r\n- **Fix:** Present exactly 4 structured options\r\n\r\n**Automatic worktree cleanup**\r\n- **Problem:** Remove worktree when might need it (Option 2, 3)\r\n- **Fix:** Only cleanup for Options 1 and 4\r\n\r\n**No confirmation for discard**\r\n- **Problem:** Accidentally delete work\r\n- **Fix:** Require typed \"discard\" confirmation",
    "Overview": "Guide completion of development work by presenting clear options and handling chosen workflow.\r\n\r\n**Core principle:** Verify tests → Present options → Execute choice → Clean up.\r\n\r\n**Announce at start:** \"I'm using the finishing-a-development-branch skill to complete this work.\"",
    "The Process": "gh pr create --title \"<title>\" --body \"$(cat <<'EOF'",
    "Test Plan": "- [ ] <verification steps>\r\nEOF\r\n)\"\r\n```\r\n\r\nThen: Cleanup worktree (Step 5)\r\n\r\n#### Option 3: Keep As-Is\r\n\r\nReport: \"Keeping branch <name>. Worktree preserved at <path>.\"\r\n\r\n**Don't cleanup worktree.**\r\n\r\n#### Option 4: Discard\r\n\r\n**Confirm first:**\r\n```\r\nThis will permanently delete:\r\n- Branch <name>\r\n- All commits: <commit-list>\r\n- Worktree at <path>\r\n\r\nType 'discard' to confirm.\r\n```\r\n\r\nWait for exact confirmation.\r\n\r\nIf confirmed:\r\n```bash\r\ngit checkout <base-branch>\r\ngit branch -D <feature-branch>\r\n```\r\n\r\nThen: Cleanup worktree (Step 5)\r\n\r\n### Step 5: Cleanup Worktree\r\n\r\n**For Options 1, 2, 4:**\r\n\r\nCheck if in worktree:\r\n```bash\r\ngit worktree list | grep $(git branch --show-current)\r\n```\r\n\r\nIf yes:\r\n```bash\r\ngit worktree remove <worktree-path>\r\n```\r\n\r\n**For Option 3:** Keep worktree.",
    "Summary": "<2-3 bullets of what changed>",
    "Integration": "**Called by:**\r\n- **subagent-driven-development** (Step 7) - After all tasks complete\r\n- **executing-plans** (Step 5) - After all batches complete\r\n\r\n**Pairs with:**\r\n- **using-git-worktrees** - Cleans up worktree created by that skill",
    "Red Flags": "**Never:**\r\n- Proceed with failing tests\r\n- Merge without verifying tests on result\r\n- Delete work without confirmation\r\n- Force-push without explicit request\r\n\r\n**Always:**\r\n- Verify tests before offering options\r\n- Present exactly 4 options\r\n- Get typed confirmation for Option 4\r\n- Clean up worktree for Options 1 & 4 only",
    "Quick Reference": "| Option | Merge | Push | Keep Worktree | Cleanup Branch |\r\n|--------|-------|------|---------------|----------------|\r\n| 1. Merge locally | ✓ | - | - | ✓ |\r\n| 2. Create PR | - | ✓ | ✓ | - |\r\n| 3. Keep as-is | - | - | ✓ | - |\r\n| 4. Discard | - | - | - | ✓ (force) |"
  },
  "content": "### Step 1: Verify Tests\r\n\r\n**Before presenting options, verify tests pass:**\r\n\r\n```bash\r\nnpm test / cargo test / pytest / go test ./...\r\n```\r\n\r\n**If tests fail:**\r\n```\r\nTests failing (<N> failures). Must fix before completing:\r\n\r\n[Show failures]\r\n\r\nCannot proceed with merge/PR until tests pass.\r\n```\r\n\r\nStop. Don't proceed to Step 2.\r\n\r\n**If tests pass:** Continue to Step 2.\r\n\r\n### Step 2: Determine Base Branch\r\n\r\n```bash\r\ngit merge-base HEAD main 2>/dev/null || git merge-base HEAD master 2>/dev/null\r\n```\r\n\r\nOr ask: \"This branch split from main - is that correct?\"\r\n\r\n### Step 3: Present Options\r\n\r\nPresent exactly these 4 options:\r\n\r\n```\r\nImplementation complete. What would you like to do?\r\n\r\n1. Merge back to <base-branch> locally\r\n2. Push and create a Pull Request\r\n3. Keep the branch as-is (I'll handle it later)\r\n4. Discard this work\r\n\r\nWhich option?\r\n```\r\n\r\n**Don't add explanation** - keep options concise.\r\n\r\n### Step 4: Execute Choice\r\n\r\n#### Option 1: Merge Locally\r\n\r\n```bash\r\ngit checkout <base-branch>\r\n\r\ngit pull\r\n\r\ngit merge <feature-branch>\r\n\r\n<test command>\r\n\r\ngit branch -d <feature-branch>\r\n```\r\n\r\nThen: Cleanup worktree (Step 5)\r\n\r\n#### Option 2: Push and Create PR\r\n\r\n```bash\r\ngit push -u origin <feature-branch>",
  "id": "finishing-a-development-branch_obra",
  "name": "finishing-a-development-branch",
  "description": "Use when implementation is complete, all tests pass, and you need to decide how to integrate the work - guides completion of development work by presenting structured options for merge, PR, or cleanup"
}