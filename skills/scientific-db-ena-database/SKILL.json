{
  "description": "\"Access European Nucleotide Archive via API/FTP. Retrieve DNA/RNA sequences, raw reads (FASTQ), genome assemblies by accession, for genomics and bioinformatics pipelines. Supports multiple formats.\"",
  "references": {
    "files": [
      "references/api_reference.md"
    ]
  },
  "content": "### 1. Data Types and Structure\r\n\r\nENA organizes data into hierarchical object types:\r\n\r\n**Studies/Projects** - Group related data and control release dates. Studies are the primary unit for citing archived data.\r\n\r\n**Samples** - Represent units of biomaterial from which sequencing libraries were produced. Samples must be registered before submitting most data types.\r\n\r\n**Raw Reads** - Consist of:\r\n- **Experiments**: Metadata about sequencing methods, library preparation, and instrument details\r\n- **Runs**: References to data files containing raw sequencing reads from a single sequencing run\r\n\r\n**Assemblies** - Genome, transcriptome, metagenome, or metatranscriptome assemblies at various completion levels.\r\n\r\n**Sequences** - Assembled and annotated sequences stored in the EMBL Nucleotide Sequence Database, including coding/non-coding regions and functional annotations.\r\n\r\n**Analyses** - Results from computational analyses of sequence data.\r\n\r\n**Taxonomy Records** - Taxonomic information including lineage and rank.\r\n\r\n### 2. Programmatic Access\r\n\r\nENA provides multiple REST APIs for data access. Consult `references/api_reference.md` for detailed endpoint documentation.\r\n\r\n**Key APIs:**\r\n\r\n**ENA Portal API** - Advanced search functionality across all ENA data types\r\n- Documentation: https://www.ebi.ac.uk/ena/portal/api/doc\r\n- Use for complex queries and metadata searches\r\n\r\n**ENA Browser API** - Direct retrieval of records and metadata\r\n- Documentation: https://www.ebi.ac.uk/ena/browser/api/doc\r\n- Use for downloading specific records by accession\r\n- Returns data in XML format\r\n\r\n**ENA Taxonomy REST API** - Query taxonomic information\r\n- Access lineage, rank, and related taxonomic data\r\n\r\n**ENA Cross Reference Service** - Access related records from external databases\r\n- Endpoint: https://www.ebi.ac.uk/ena/xref/rest/\r\n\r\n**CRAM Reference Registry** - Retrieve reference sequences\r\n- Endpoint: https://www.ebi.ac.uk/ena/cram/\r\n- Query by MD5 or SHA1 checksums\r\n\r\n**Rate Limiting**: All APIs have a rate limit of 50 requests per second. Exceeding this returns HTTP 429 (Too Many Requests).\r\n\r\n### 3. Searching and Retrieving Data\r\n\r\n**Browser-Based Search:**\r\n- Free text search across all fields\r\n- Sequence similarity search (BLAST integration)\r\n- Cross-reference search to find related records\r\n- Advanced search with Rulespace query builder\r\n\r\n**Programmatic Queries:**\r\n- Use Portal API for advanced searches at scale\r\n- Filter by data type, date range, taxonomy, or metadata fields\r\n- Download results as tabulated metadata summaries or XML records\r\n\r\n**Example API Query Pattern:**\r\n```python\r\nimport requests\r\n\r\nbase_url = \"https://www.ebi.ac.uk/ena/portal/api/search\"\r\nparams = {\r\n    \"result\": \"sample\",\r\n    \"query\": \"study_accession=PRJEB1234\",\r\n    \"format\": \"json\",\r\n    \"limit\": 100\r\n}\r\n\r\nresponse = requests.get(base_url, params=params)\r\nsamples = response.json()\r\n```\r\n\r\n### 4. Data Retrieval Formats\r\n\r\n**Metadata Formats:**\r\n- XML (native ENA format)\r\n- JSON (via Portal API)\r\n- TSV/CSV (tabulated summaries)\r\n\r\n**Sequence Data:**\r\n- FASTQ (raw reads)\r\n- BAM/CRAM (aligned reads)\r\n- FASTA (assembled sequences)\r\n- EMBL flat file format (annotated sequences)\r\n\r\n**Download Methods:**\r\n- Direct API download (small files)\r\n- FTP for bulk data transfer\r\n- Aspera for high-speed transfer of large datasets\r\n- enaBrowserTools command-line utility for bulk downloads\r\n\r\n### 5. Common Use Cases\r\n\r\n**Retrieve raw sequencing reads by accession:**\r\n```python\r\naccession = \"ERR123456\"\r\nurl = f\"https://www.ebi.ac.uk/ena/browser/api/xml/{accession}\"\r\n```\r\n\r\n**Search for all samples in a study:**\r\n```python\r\nstudy_id = \"PRJNA123456\"\r\nurl = f\"https://www.ebi.ac.uk/ena/portal/api/search?result=sample&query=study_accession={study_id}&format=tsv\"\r\n```\r\n\r\n**Find assemblies for a specific organism:**\r\n```python\r\norganism = \"Escherichia coli\"\r\nurl = f\"https://www.ebi.ac.uk/ena/portal/api/search?result=assembly&query=tax_tree({organism})&format=json\"\r\n```\r\n\r\n**Get taxonomic lineage:**\r\n```python",
  "name": "ena-database",
  "id": "scientific-db-ena-database",
  "sections": {
    "Core Capabilities": "taxon_id = \"562\"  # E. coli\r\nurl = f\"https://www.ebi.ac.uk/ena/taxonomy/rest/tax-id/{taxon_id}\"\r\n```\r\n\r\n### 6. Integration with Analysis Pipelines\r\n\r\n**Bulk Download Pattern:**\r\n1. Search for accessions matching criteria using Portal API\r\n2. Extract file URLs from search results\r\n3. Download files via FTP or using enaBrowserTools\r\n4. Process downloaded data in pipeline\r\n\r\n**BLAST Integration:**\r\nIntegrate with EBI's NCBI BLAST service (REST/SOAP API) for sequence similarity searches against ENA sequences.\r\n\r\n### 7. Best Practices\r\n\r\n**Rate Limiting:**\r\n- Implement exponential backoff when receiving HTTP 429 responses\r\n- Batch requests when possible to stay within 50 req/sec limit\r\n- Use bulk download tools for large datasets instead of iterating API calls\r\n\r\n**Data Citation:**\r\n- Always cite using Study/Project accessions when publishing\r\n- Include accession numbers for specific samples, runs, or assemblies used\r\n\r\n**API Response Handling:**\r\n- Check HTTP status codes before processing responses\r\n- Parse XML responses using proper XML libraries (not regex)\r\n- Handle pagination for large result sets\r\n\r\n**Performance:**\r\n- Use FTP/Aspera for downloading large files (>100MB)\r\n- Prefer TSV/JSON formats over XML when only metadata is needed\r\n- Cache taxonomy lookups locally when processing many records",
    "Overview": "The European Nucleotide Archive (ENA) is a comprehensive public repository for nucleotide sequence data and associated metadata. Access and query DNA/RNA sequences, raw reads, genome assemblies, and functional annotations through REST APIs and FTP for genomics and bioinformatics pipelines.",
    "Resources": "This skill includes detailed reference documentation for working with ENA:\r\n\r\n### references/\r\n\r\n**api_reference.md** - Comprehensive API endpoint documentation including:\r\n- Detailed parameters for Portal API and Browser API\r\n- Response format specifications\r\n- Advanced query syntax and operators\r\n- Field names for filtering and searching\r\n- Common API patterns and examples\r\n\r\nLoad this reference when constructing complex API queries, debugging API responses, or needing specific parameter details.",
    "When to Use This Skill": "This skill should be used when:\r\n\r\n- Retrieving nucleotide sequences or raw sequencing reads by accession\r\n- Searching for samples, studies, or assemblies by metadata criteria\r\n- Downloading FASTQ files or genome assemblies for analysis\r\n- Querying taxonomic information for organisms\r\n- Accessing sequence annotations and functional data\r\n- Integrating ENA data into bioinformatics pipelines\r\n- Performing cross-reference searches to related databases\r\n- Bulk downloading datasets via FTP or Aspera"
  }
}