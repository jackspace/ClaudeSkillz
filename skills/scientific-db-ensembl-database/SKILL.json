{
  "description": "\"Query Ensembl genome database REST API for 250+ species. Gene lookups, sequence retrieval, variant analysis, comparative genomics, orthologs, VEP predictions, for genomic research.\"",
  "references": {
    "files": [
      "references/api_endpoints.md"
    ]
  },
  "content": "### 1. Gene Information Retrieval\r\n\r\nQuery gene data by symbol, Ensembl ID, or external database identifiers.\r\n\r\n**Common operations:**\r\n- Look up gene information by symbol (e.g., \"BRCA2\", \"TP53\")\r\n- Retrieve transcript and protein information\r\n- Get gene coordinates and chromosomal locations\r\n- Access cross-references to external databases (UniProt, RefSeq, etc.)\r\n\r\n**Using the ensembl_rest package:**\r\n```python\r\nfrom ensembl_rest import EnsemblClient\r\n\r\nclient = EnsemblClient()\r\n\r\ngene_data = client.symbol_lookup(\r\n    species='human',\r\n    symbol='BRCA2'\r\n)\r\n\r\ngene_info = client.lookup_id(\r\n    id='ENSG00000139618',  # BRCA2 Ensembl ID\r\n    expand=True\r\n)\r\n```\r\n\r\n**Direct REST API (no package):**\r\n```python\r\nimport requests\r\n\r\nserver = \"https://rest.ensembl.org\"\r\n\r\nresponse = requests.get(\r\n    f\"{server}/lookup/symbol/homo_sapiens/BRCA2\",\r\n    headers={\"Content-Type\": \"application/json\"}\r\n)\r\ngene_data = response.json()\r\n```\r\n\r\n### 2. Sequence Retrieval\r\n\r\nFetch genomic, transcript, or protein sequences in various formats (JSON, FASTA, plain text).\r\n\r\n**Operations:**\r\n- Get DNA sequences for genes or genomic regions\r\n- Retrieve transcript sequences (cDNA)\r\n- Access protein sequences\r\n- Extract sequences with flanking regions or modifications\r\n\r\n**Example:**\r\n```python\r\nsequence = client.sequence_id(\r\n    id='ENSG00000139618',  # Gene ID\r\n    content_type='application/json'\r\n)\r\n\r\nregion_seq = client.sequence_region(\r\n    species='human',\r\n    region='7:140424943-140624564'  # chromosome:start-end\r\n)\r\n```\r\n\r\n### 3. Variant Analysis\r\n\r\nQuery genetic variation data and predict variant consequences using the Variant Effect Predictor (VEP).\r\n\r\n**Capabilities:**\r\n- Look up variants by rsID or genomic coordinates\r\n- Predict functional consequences of variants\r\n- Access population frequency data\r\n- Retrieve phenotype associations\r\n\r\n**VEP example:**\r\n```python\r\nvep_result = client.vep_hgvs(\r\n    species='human',\r\n    hgvs_notation='ENST00000380152.7:c.803C>T'\r\n)\r\n\r\nvariant = client.variation_id(\r\n    species='human',\r\n    id='rs699'\r\n)\r\n```\r\n\r\n### 4. Comparative Genomics\r\n\r\nPerform cross-species comparisons to identify orthologs, paralogs, and evolutionary relationships.\r\n\r\n**Operations:**\r\n- Find orthologs (same gene in different species)\r\n- Identify paralogs (related genes in same species)\r\n- Access gene trees showing evolutionary relationships\r\n- Retrieve gene family information\r\n\r\n**Example:**\r\n```python\r\northologs = client.homology_ensemblgene(\r\n    id='ENSG00000139618',  # Human BRCA2\r\n    target_species='mouse'\r\n)\r\n\r\ngene_tree = client.genetree_member_symbol(\r\n    species='human',\r\n    symbol='BRCA2'\r\n)\r\n```\r\n\r\n### 5. Genomic Region Analysis\r\n\r\nFind all genomic features (genes, transcripts, regulatory elements) in a specific region.\r\n\r\n**Use cases:**\r\n- Identify all genes in a chromosomal region\r\n- Find regulatory features (promoters, enhancers)\r\n- Locate variants within a region\r\n- Retrieve structural features\r\n\r\n**Example:**\r\n```python\r\nfeatures = client.overlap_region(\r\n    species='human',\r\n    region='7:140424943-140624564',\r\n    feature='gene'\r\n)\r\n```\r\n\r\n### 6. Assembly Mapping\r\n\r\nConvert coordinates between different genome assemblies (e.g., GRCh37 to GRCh38).\r\n\r\n**Important:** Use `https://grch37.rest.ensembl.org` for GRCh37/hg19 queries and `https://rest.ensembl.org` for current assemblies.\r\n\r\n**Example:**\r\n```python\r\nfrom ensembl_rest import AssemblyMapper\r\n\r\n\r\nTo query available species and assemblies:\r\n\r\n```python\r\nspecies_list = client.info_species()",
  "name": "ensembl-database",
  "id": "scientific-db-ensembl-database",
  "sections": {
    "API Best Practices": "### Rate Limiting\r\n\r\nThe Ensembl REST API has rate limits. Follow these practices:\r\n\r\n1. **Respect rate limits:** Maximum 15 requests per second for anonymous users\r\n2. **Handle 429 responses:** When rate-limited, check the `Retry-After` header and wait\r\n3. **Use batch endpoints:** When querying multiple items, use batch endpoints where available\r\n4. **Cache results:** Store frequently accessed data to reduce API calls\r\n\r\n### Error Handling\r\n\r\nAlways implement proper error handling:\r\n\r\n```python\r\nimport requests\r\nimport time\r\n\r\ndef query_ensembl(endpoint, params=None, max_retries=3):\r\n    server = \"https://rest.ensembl.org\"\r\n    headers = {\"Content-Type\": \"application/json\"}\r\n\r\n    for attempt in range(max_retries):\r\n        response = requests.get(\r\n            f\"{server}{endpoint}\",\r\n            headers=headers,\r\n            params=params\r\n        )\r\n\r\n        if response.status_code == 200:\r\n            return response.json()\r\n        elif response.status_code == 429:\r\n            # Rate limited - wait and retry\r\n            retry_after = int(response.headers.get('Retry-After', 1))\r\n            time.sleep(retry_after)\r\n        else:\r\n            response.raise_for_status()\r\n\r\n    raise Exception(f\"Failed after {max_retries} attempts\")\r\n```",
    "Additional Resources": "- **Official Documentation:** https://rest.ensembl.org/documentation\r\n- **Python Package Docs:** https://ensemblrest.readthedocs.io\r\n- **EBI Training:** https://www.ebi.ac.uk/training/online/courses/ensembl-rest-api/\r\n- **Ensembl Browser:** https://useast.ensembl.org\r\n- **GitHub Examples:** https://github.com/Ensembl/ensembl-rest/wiki",
    "Installation": "### Python Package (Recommended)\r\n\r\n```bash\r\npip install ensembl_rest\r\n```\r\n\r\nThe `ensembl_rest` package provides a Pythonic interface to all Ensembl REST API endpoints.\r\n\r\n### Direct REST API\r\n\r\nNo installation needed - use standard HTTP libraries like `requests`:\r\n\r\n```bash\r\npip install requests\r\n```",
    "Species and Assembly Information": "assembly_info = client.info_assembly(species='human')\r\n```\r\n\r\nCommon species identifiers:\r\n- Human: `homo_sapiens` or `human`\r\n- Mouse: `mus_musculus` or `mouse`\r\n- Zebrafish: `danio_rerio` or `zebrafish`\r\n- Fruit fly: `drosophila_melanogaster`",
    "Overview": "Access and query the Ensembl genome database, a comprehensive resource for vertebrate genomic data maintained by EMBL-EBI. The database provides gene annotations, sequences, variants, regulatory information, and comparative genomics data for over 250 species. Current release is 115 (September 2025).",
    "When to Use This Skill": "This skill should be used when:\r\n\r\n- Querying gene information by symbol or Ensembl ID\r\n- Retrieving DNA, transcript, or protein sequences\r\n- Analyzing genetic variants using the Variant Effect Predictor (VEP)\r\n- Finding orthologs and paralogs across species\r\n- Accessing regulatory features and genomic annotations\r\n- Converting coordinates between genome assemblies (e.g., GRCh37 to GRCh38)\r\n- Performing comparative genomics analyses\r\n- Integrating Ensembl data into genomic research pipelines",
    "Resources": "### references/\r\n\r\n- `api_endpoints.md`: Comprehensive documentation of all 17 API endpoint categories with examples and parameters\r\n\r\n### scripts/\r\n\r\n- `ensembl_query.py`: Reusable Python script for common Ensembl queries with built-in rate limiting and error handling",
    "Core Capabilities": "mapper = AssemblyMapper(\r\n    species='human',\r\n    asm_from='GRCh37',\r\n    asm_to='GRCh38'\r\n)\r\n\r\nmapped = mapper.map(chrom='7', start=140453136, end=140453136)\r\n```",
    "Common Workflows": "### Workflow 1: Gene Annotation Pipeline\r\n\r\n1. Look up gene by symbol to get Ensembl ID\r\n2. Retrieve transcript information\r\n3. Get protein sequences for all transcripts\r\n4. Find orthologs in other species\r\n5. Export results\r\n\r\n### Workflow 2: Variant Analysis\r\n\r\n1. Query variant by rsID or coordinates\r\n2. Use VEP to predict functional consequences\r\n3. Check population frequencies\r\n4. Retrieve phenotype associations\r\n5. Generate report\r\n\r\n### Workflow 3: Comparative Analysis\r\n\r\n1. Start with gene of interest in reference species\r\n2. Find orthologs in target species\r\n3. Retrieve sequences for all orthologs\r\n4. Compare gene structures and features\r\n5. Analyze evolutionary conservation"
  }
}