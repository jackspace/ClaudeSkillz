{
  "description": "Add interaction states like hover, focus, disabled, active, error to existing uxscii components. Use when working with .uxm files, when user wants to expand, enhance, or add states to .uxm components.",
  "metadata": {
    "version": "0.0.1",
    "author": "Trabian",
    "allowedTools": "Read, Write, Edit, Glob, Grep, Bash"
  },
  "content": "Expand existing uxscii components by adding interaction states.",
  "name": "Fluxwing Component Expander",
  "id": "fluxwing-component-expander",
  "sections": {
    "Quality Standards": "Ensure expanded components include:\r\n- ✓ Valid JSON schema compliance (no breaking changes)\r\n- ✓ All new states have definitions in .uxm behavior.states array\r\n- ✓ All new states have ASCII sections in .md\r\n- ✓ State properties match component type conventions\r\n- ✓ Consistent box-drawing character usage\r\n- ✓ Updated modification timestamp\r\n- ✓ Preserved existing data (no data loss)\r\n- ✓ No duplicate states (check before adding)",
    "Your Task": "Expand an existing uxscii component by adding interaction states.",
    "Workflow": "### 1. Locate Component\r\n\r\nAsk for the component name if not provided:\r\n- \"Which component do you want to expand?\"\r\n- Search in `./fluxwing/components/` and `./fluxwing/library/`\r\n- Display current states if component found\r\n\r\n### 2. Determine States to Add\r\n\r\n**Default behavior (no instructions)**: Add ALL standard states for component type\r\n\r\n**Smart defaults by type**:\r\n- **button**: hover, active, disabled\r\n- **input**: focus, error, disabled\r\n- **checkbox/radio**: checked, disabled\r\n- **select**: open, disabled\r\n- **link**: hover, visited, active\r\n- **card**: hover, selected\r\n- **modal**: open, closing\r\n- **alert**: success, warning, error, info\r\n- **badge**: active, inactive\r\n- **navigation**: active, hover\r\n- **toggle**: on, off, disabled\r\n- **slider**: dragging, disabled\r\n- **tab**: selected, hover\r\n- **list**: selected, hover\r\n- **table**: sorted, hover\r\n\r\n**User can override**: \"Only add hover and focus\" or \"Add error state only\"\r\n\r\n### 3. Read Existing Component Files\r\n\r\nRead both files:\r\n- `{component-name}.uxm` - Current JSON metadata\r\n- `{component-name}.md` - Current ASCII template\r\n\r\nExtract:\r\n- Current states (from behavior.states array)\r\n- Component type (from type field)\r\n- Visual properties (from ascii section)\r\n- Variables (from ascii.variables array)\r\n- Border style from default state (from behavior.states[0].properties.border)\r\n\r\n### 4. Generate New States\r\n\r\nFor each new state to add:\r\n\r\n**A. Add state definition to .uxm file**\r\n\r\nInsert into the `behavior.states` array. Each state needs:\r\n\r\n```json\r\n{\r\n  \"name\": \"hover\",\r\n  \"properties\": {\r\n    \"border\": \"heavy\",\r\n    \"background\": \"primary-dark\",\r\n    \"textColor\": \"default\"\r\n  },\r\n  \"triggers\": [\"mouseenter\"]\r\n}\r\n```\r\n\r\n**State property patterns by state name**:\r\n\r\n- **hover**:\r\n  - border: \"heavy\"\r\n  - background: slightly darker than default\r\n  - triggers: [\"mouseenter\"]\r\n\r\n- **focus**:\r\n  - border: \"double\"\r\n  - background: same as default\r\n  - textColor: \"primary\"\r\n  - triggers: [\"focus\"]\r\n\r\n- **active**:\r\n  - border: \"heavy\"\r\n  - background: \"filled\"\r\n  - triggers: [\"mousedown\"]\r\n\r\n- **disabled**:\r\n  - border: \"dashed\"\r\n  - opacity: 0.5\r\n  - cursor: \"not-allowed\"\r\n\r\n- **error**:\r\n  - border: \"heavy\"\r\n  - borderColor: \"red\"\r\n  - textColor: \"error\"\r\n\r\n- **success**:\r\n  - border: \"heavy\"\r\n  - borderColor: \"green\"\r\n  - textColor: \"success\"\r\n\r\n- **loading**:\r\n  - opacity: 0.7\r\n  - cursor: \"wait\"\r\n\r\n- **checked** (checkbox/radio):\r\n  - border: \"heavy\"\r\n  - background: \"filled\"\r\n  - textColor: \"primary\"\r\n\r\n- **selected**:\r\n  - border: \"heavy\"\r\n  - background: \"highlight\"\r\n  - textColor: \"primary\"\r\n\r\n- **open** (modal/select):\r\n  - visible: true\r\n  - triggers: [\"click\"]\r\n\r\n- **visited** (link):\r\n  - textColor: \"visited\"\r\n\r\n**B. Generate ASCII for new state in .md file**\r\n\r\nUse appropriate box-drawing characters for each state:\r\n\r\n- **hover**: Heavy border `┏━┓┃┗━┛`\r\n- **focus**: Double border `╔═╗║╚═╝`\r\n- **active**: Heavy filled `┏━┓┃┗━┛` with darker interior\r\n- **disabled**: Dashed border `┌┄┄┐┆└┄┄┘`\r\n- **error**: Heavy border with indicator `┏━┓┃┗━┛ ⚠`\r\n- **success**: Heavy border with indicator `┏━┓┃┗━┛ ✓`\r\n- **checked**: Box with checkmark `[✓]` or filled indicator\r\n- **selected**: Heavy border with highlight background\r\n- **loading**: Spinner or progress indicator\r\n\r\n**Template for new state section in .md file**:\r\n\r\n```markdown",
    "Important Notes": "- **Always preserve existing states** (never remove or modify existing ones)\r\n- **Detect duplicate states** (skip if state already exists in behavior.states array)\r\n- **Validate component after expansion** (ensure valid JSON)\r\n- **Use appropriate border styles per state** (refer to patterns doc)\r\n- **Match visual style of existing default state** (consistent dimensions and layout)\r\n- **Test keyboard navigation** for new interactive states\r\n- **Insert .md sections in correct location** (after states, before Variables section)\r\n- **Update only the modified timestamp** (preserve created timestamp)",
    "{State Name} State": "\\`\\`\\`\r\n{ASCII art using appropriate border style}\r\n\\`\\`\\`\r\n```\r\n\r\n### 5. Update Files\r\n\r\n**Write updated files**:\r\n- Overwrite `{component-name}.uxm` with expanded states array\r\n- Append new state sections to `{component-name}.md`\r\n\r\n**Preserve**:\r\n- All existing metadata (name, description, author, created, tags, category)\r\n- All existing variables\r\n- All existing states\r\n- All existing props\r\n- Component ID and version\r\n\r\n**Update**:\r\n- `metadata.modified` timestamp (set to current ISO 8601 timestamp)\r\n- `behavior.states` array (add new states to end)\r\n- `.md` file (append new state sections before Variables section if it exists, otherwise at end)\r\n\r\n**Important**: When updating the .md file, insert new state sections AFTER existing state sections but BEFORE the Variables, Accessibility, and Usage sections.\r\n\r\n### 5a. Validate Expanded Component\r\n\r\nAfter updating the files, validate the expanded component to ensure quality:\r\n\r\n```bash\r\nuv run {SKILL_ROOT}/../uxscii-component-creator/scripts/quick_validate.py \\\\\r\n  ./fluxwing/components/{component-name}.uxm \\\\\r\n  {SKILL_ROOT}/../uxscii-component-creator/schemas/uxm-component.schema.json\r\n```\r\n\r\n**Validation checks:**\r\n- ✓ JSON schema compliance\r\n- ✓ All states have valid properties\r\n- ✓ Variables match between .uxm and .md\r\n- ✓ Accessibility requirements met\r\n- ✓ No duplicate states\r\n\r\n**If validation fails:**\r\n1. Read the error messages\r\n2. Fix the issues in the .uxm or .md files\r\n3. Re-validate before confirming to user\r\n\r\n**Performance**: ~100ms (very fast!)\r\n\r\n### 6. Confirm Expansion\r\n\r\nShow summary:\r\n```\r\n✓ Expanded: ./fluxwing/components/{component-name}\r\n✓ Added states: hover, active, disabled\r\n✓ Total states: 4 (default, hover, active, disabled)\r\n\r\nPreview of hover state:\r\n┏━━━━━━━━━━━━━━━━━━━━┓\r\n┃   {{text}}         ┃\r\n┗━━━━━━━━━━━━━━━━━━━━┛\r\n```",
    "Data Location Rules": "**READ from:**\r\n- `./fluxwing/components/` - User-created components to expand\r\n- `./fluxwing/library/` - User library components to expand\r\n- `{SKILL_ROOT}/docs/` - Documentation for state definitions\r\n\r\n**WRITE to:**\r\n- `./fluxwing/components/` - Updated components (overwrite existing)\r\n- `./fluxwing/library/` - Updated library components (overwrite existing)",
    "Error Handling": "If component not found:\r\n```\r\n✗ Component '{component-name}' not found.\r\n\r\nSearched in:\r\n- ./fluxwing/components/\r\n- ./fluxwing/library/\r\n\r\nAvailable components:\r\n[List first 10 components found]\r\n\r\nPlease check the component name and try again.\r\n```\r\n\r\nIf state already exists:\r\n```\r\n⚠ State 'hover' already exists in {component-name}.\r\nSkipping duplicate state.\r\n\r\nCurrent states: default, hover\r\nAdding: active, disabled\r\n```\r\n\r\nIf file write fails:\r\n```\r\n✗ Failed to update {component-name}.\r\n\r\nError: [specific error message]\r\n\r\nThe component files remain unchanged.\r\nPlease check file permissions and try again.\r\n```\r\n\r\nYou're helping users create fully interactive uxscii components!",
    "Resources Available": "- **State patterns**: `{SKILL_ROOT}/docs/06-ascii-patterns.md` - Box-drawing characters\r\n- **Component creation**: `{SKILL_ROOT}/docs/03-component-creation.md` - Component structure",
    "Example with Custom States": "```\r\nUser: Add focus and error states to email-input\r\n\r\nSkill: I found `email-input` in ./fluxwing/components/\r\n\r\nCurrent states: default\r\n\r\nI'll add the requested states: focus, error\r\n\r\n[Generates only focus and error states]\r\n\r\n✓ Expanded: ./fluxwing/components/email-input\r\n✓ Added states: focus, error\r\n✓ Total states: 3 (default, focus, error)\r\n\r\nNote: Standard input states also include 'disabled'.\r\nLet me know if you want to add it!\r\n```",
    "Example Interaction": "```\r\nUser: Expand submit-button with hover state\r\n\r\nSkill: I found `submit-button` in ./fluxwing/components/\r\n\r\nCurrent states: default\r\n\r\nI'll add the hover state to make the button interactive.\r\n\r\n[Reads submit-button.uxm and submit-button.md]\r\n[Generates hover state]\r\n[Updates both files]\r\n\r\n✓ Expanded: ./fluxwing/components/submit-button\r\n✓ Added states: hover\r\n✓ Total states: 2 (default, hover)\r\n\r\nPreview of hover state:\r\n┏━━━━━━━━━━━━━━━━━━━━┓\r\n┃   Submit Form      ┃\r\n┗━━━━━━━━━━━━━━━━━━━━┛\r\n\r\nNext steps:\r\n- Add more states (active, disabled)\r\n- Use this button in a screen\r\n- View all components\r\n```"
  }
}