{
  "description": "\"Access AlphaFold's 200M+ AI-predicted protein structures. Retrieve structures by UniProt ID, download PDB/mmCIF files, analyze confidence metrics (pLDDT, PAE), for drug discovery and structural biology.\"",
  "references": {
    "files": [
      "references/api_reference.md"
    ]
  },
  "content": "### 1. Searching and Retrieving Predictions\r\n\r\n**Using Biopython (Recommended):**\r\n\r\nThe Biopython library provides the simplest interface for retrieving AlphaFold structures:\r\n\r\n```python\r\nfrom Bio.PDB import alphafold_db\r\n\r\npredictions = list(alphafold_db.get_predictions(\"P00520\"))\r\n\r\nfor prediction in predictions:\r\n    cif_file = alphafold_db.download_cif_for(prediction, directory=\"./structures\")\r\n    print(f\"Downloaded: {cif_file}\")\r\n\r\nfrom Bio.PDB import MMCIFParser\r\nstructures = list(alphafold_db.get_structural_models_for(\"P00520\"))\r\n```\r\n\r\n**Direct API Access:**\r\n\r\nQuery predictions using REST endpoints:\r\n\r\n```python\r\nimport requests\r\n\r\nuniprot_id = \"P00520\"\r\napi_url = f\"https://alphafold.ebi.ac.uk/api/prediction/{uniprot_id}\"\r\nresponse = requests.get(api_url)\r\nprediction_data = response.json()\r\n\r\nalphafold_id = prediction_data[0]['entryId']\r\nprint(f\"AlphaFold ID: {alphafold_id}\")\r\n```\r\n\r\n**Using UniProt to Find Accessions:**\r\n\r\nSearch UniProt to find protein accessions first:\r\n\r\n```python\r\nimport urllib.parse, urllib.request\r\n\r\ndef get_uniprot_ids(query, query_type='PDB_ID'):\r\n    \"\"\"Query UniProt to get accession IDs\"\"\"\r\n    url = 'https://www.uniprot.org/uploadlists/'\r\n    params = {\r\n        'from': query_type,\r\n        'to': 'ACC',\r\n        'format': 'txt',\r\n        'query': query\r\n    }\r\n    data = urllib.parse.urlencode(params).encode('ascii')\r\n    with urllib.request.urlopen(urllib.request.Request(url, data)) as response:\r\n        return response.read().decode('utf-8').splitlines()\r\n\r\nprotein_ids = get_uniprot_ids(\"hemoglobin\", query_type=\"GENE_NAME\")\r\n```\r\n\r\n### 2. Downloading Structure Files\r\n\r\nAlphaFold provides multiple file formats for each prediction:\r\n\r\n**File Types Available:**\r\n\r\n- **Model coordinates** (`model_v4.cif`): Atomic coordinates in mmCIF/PDBx format\r\n- **Confidence scores** (`confidence_v4.json`): Per-residue pLDDT scores (0-100)\r\n- **Predicted Aligned Error** (`predicted_aligned_error_v4.json`): PAE matrix for residue pair confidence\r\n\r\n**Download URLs:**\r\n\r\n```python\r\nimport requests\r\n\r\nalphafold_id = \"AF-P00520-F1\"\r\nversion = \"v4\"\r\n\r\nmodel_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-model_{version}.cif\"\r\nresponse = requests.get(model_url)\r\nwith open(f\"{alphafold_id}.cif\", \"w\") as f:\r\n    f.write(response.text)\r\n\r\nconfidence_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-confidence_{version}.json\"\r\nresponse = requests.get(confidence_url)\r\nconfidence_data = response.json()\r\n\r\npae_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-predicted_aligned_error_{version}.json\"\r\nresponse = requests.get(pae_url)\r\npae_data = response.json()\r\n```\r\n\r\n**PDB Format (Alternative):**\r\n\r\n```python\r\npdb_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-model_{version}.pdb\"\r\nresponse = requests.get(pdb_url)\r\nwith open(f\"{alphafold_id}.pdb\", \"wb\") as f:\r\n    f.write(response.content)\r\n```\r\n\r\n### 3. Working with Confidence Metrics\r\n\r\nAlphaFold predictions include confidence estimates critical for interpretation:\r\n\r\n**pLDDT (per-residue confidence):**\r\n\r\n```python\r\nimport json\r\nimport requests\r\n\r\nalphafold_id = \"AF-P00520-F1\"\r\nconfidence_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-confidence_v4.json\"\r\nconfidence = requests.get(confidence_url).json()\r\n\r\nplddt_scores = confidence['confidenceScore']\r\n\r\n\r\nhigh_confidence_residues = [i for i, score in enumerate(plddt_scores) if score > 90]\r\nprint(f\"High confidence residues: {len(high_confidence_residues)}/{len(plddt_scores)}\")\r\n```\r\n\r\n**PAE (Predicted Aligned Error):**\r\n\r\nPAE indicates confidence in relative domain positions:\r\n\r\n```python\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\npae_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-predicted_aligned_error_v4.json\"\r\npae = requests.get(pae_url).json()\r\n\r\npae_matrix = np.array(pae['distance'])\r\nplt.figure(figsize=(10, 8))\r\nplt.imshow(pae_matrix, cmap='viridis_r', vmin=0, vmax=30)\r\nplt.colorbar(label='PAE (Å)')\r\nplt.title(f'Predicted Aligned Error: {alphafold_id}')\r\nplt.xlabel('Residue')\r\nplt.ylabel('Residue')\r\nplt.savefig(f'{alphafold_id}_pae.png', dpi=300, bbox_inches='tight')\r\n\r\n```\r\n\r\n### 4. Bulk Data Access via Google Cloud\r\n\r\nFor large-scale analyses, use Google Cloud datasets:\r\n\r\n**Google Cloud Storage:**\r\n\r\n```bash\r\npip install gsutil\r\n\r\ngsutil ls gs://public-datasets-deepmind-alphafold-v4/\r\n\r\ngsutil -m cp gs://public-datasets-deepmind-alphafold-v4/proteomes/proteome-tax_id-9606-*.tar .\r\n\r\ngsutil cp gs://public-datasets-deepmind-alphafold-v4/accession_ids.csv .\r\n```\r\n\r\n**BigQuery Metadata Access:**\r\n\r\n```python\r\nfrom google.cloud import bigquery\r\n\r\nclient = bigquery.Client()\r\n\r\nquery = \"\"\"\r\nSELECT\r\n  entryId,\r\n  uniprotAccession,\r\n  organismScientificName,\r\n  globalMetricValue,\r\n  fractionPlddtVeryHigh\r\nFROM `bigquery-public-data.deepmind_alphafold.metadata`\r\nWHERE organismScientificName = 'Homo sapiens'\r\n  AND fractionPlddtVeryHigh > 0.8\r\nLIMIT 100\r\n\"\"\"\r\n\r\nresults = client.query(query).to_dataframe()\r\nprint(f\"Found {len(results)} high-confidence human proteins\")\r\n```\r\n\r\n**Download by Species:**\r\n\r\n```python\r\nimport subprocess\r\n\r\ndef download_proteome(taxonomy_id, output_dir=\"./proteomes\"):\r\n    \"\"\"Download all AlphaFold predictions for a species\"\"\"\r\n    pattern = f\"gs://public-datasets-deepmind-alphafold-v4/proteomes/proteome-tax_id-{taxonomy_id}-*_v4.tar\"\r\n    cmd = f\"gsutil -m cp {pattern} {output_dir}/\"\r\n    subprocess.run(cmd, shell=True, check=True)\r\n\r\ndownload_proteome(83333)\r\n\r\ndownload_proteome(9606)\r\n```\r\n\r\n### 5. Parsing and Analyzing Structures\r\n\r\nWork with downloaded AlphaFold structures using BioPython:\r\n\r\n```python\r\nfrom Bio.PDB import MMCIFParser, PDBIO\r\nimport numpy as np\r\n\r\nparser = MMCIFParser(QUIET=True)\r\nstructure = parser.get_structure(\"protein\", \"AF-P00520-F1-model_v4.cif\")\r\n\r\ncoords = []\r\nfor model in structure:\r\n    for chain in model:\r\n        for residue in chain:\r\n            if 'CA' in residue:  # Alpha carbons only\r\n                coords.append(residue['CA'].get_coord())\r\n\r\ncoords = np.array(coords)\r\nprint(f\"Structure has {len(coords)} residues\")\r\n\r\nfrom scipy.spatial.distance import pdist, squareform\r\ndistance_matrix = squareform(pdist(coords))\r\n\r\ncontacts = np.where((distance_matrix > 0) & (distance_matrix < 8))\r\nprint(f\"Number of contacts: {len(contacts[0]) // 2}\")\r\n```\r\n\r\n**Extract B-factors (pLDDT values):**\r\n\r\nAlphaFold stores pLDDT scores in the B-factor column:\r\n\r\n```python\r\nfrom Bio.PDB import MMCIFParser\r\n\r\nparser = MMCIFParser(QUIET=True)\r\nstructure = parser.get_structure(\"protein\", \"AF-P00520-F1-model_v4.cif\")\r\n\r\nplddt_scores = []\r\nfor model in structure:\r\n    for chain in model:\r\n        for residue in chain:\r\n            if 'CA' in residue:\r\n                plddt_scores.append(residue['CA'].get_bfactor())\r\n\r\nhigh_conf_regions = [(i, score) for i, score in enumerate(plddt_scores, 1) if score > 90]\r\nprint(f\"High confidence residues: {len(high_conf_regions)}\")\r\n```\r\n\r\n### 6. Batch Processing Multiple Proteins\r\n\r\nProcess multiple predictions efficiently:\r\n\r\n```python\r\nfrom Bio.PDB import alphafold_db\r\nimport pandas as pd\r\n\r\nuniprot_ids = [\"P00520\", \"P12931\", \"P04637\"]  # Multiple proteins\r\nresults = []\r\n\r\nfor uniprot_id in uniprot_ids:\r\n    try:\r\n        # Get prediction\r\n        predictions = list(alphafold_db.get_predictions(uniprot_id))\r\n\r\n        if predictions:\r\n            pred = predictions[0]\r\n\r\n            # Download structure\r\n            cif_file = alphafold_db.download_cif_for(pred, directory=\"./batch_structures\")\r\n\r\n            # Get confidence data\r\n            alphafold_id = pred['entryId']\r\n            conf_url = f\"https://alphafold.ebi.ac.uk/files/{alphafold_id}-confidence_v4.json\"\r\n            conf_data = requests.get(conf_url).json()\r\n\r\n            # Calculate statistics\r\n            plddt_scores = conf_data['confidenceScore']\r\n            avg_plddt = np.mean(plddt_scores)\r\n            high_conf_fraction = sum(1 for s in plddt_scores if s > 90) / len(plddt_scores)\r\n\r\n            results.append({\r\n                'uniprot_id': uniprot_id,\r\n                'alphafold_id': alphafold_id,\r\n                'avg_plddt': avg_plddt,\r\n                'high_conf_fraction': high_conf_fraction,\r\n                'length': len(plddt_scores)\r\n            })\r\n    except Exception as e:\r\n        print(f\"Error processing {uniprot_id}: {e}\")\r\n\r\n\r\n### Python Libraries\r\n\r\n```bash\r\npip install biopython\r\n\r\npip install requests\r\n\r\npip install numpy matplotlib pandas scipy\r\n\r\npip install google-cloud-bigquery gsutil\r\n```\r\n\r\n### 3D-Beacons API Alternative\r\n\r\nAlphaFold can also be accessed via the 3D-Beacons federated API:\r\n\r\n```python\r\nimport requests\r\n\r\nuniprot_id = \"P00520\"\r\nurl = f\"https://www.ebi.ac.uk/pdbe/pdbe-kb/3dbeacons/api/uniprot/summary/{uniprot_id}.json\"\r\nresponse = requests.get(url)\r\ndata = response.json()",
  "name": "alphafold-database",
  "id": "scientific-db-alphafold-database",
  "sections": {
    "Additional Resources": "- **AlphaFold DB Website:** https://alphafold.ebi.ac.uk/\r\n- **API Documentation:** https://alphafold.ebi.ac.uk/api-docs\r\n- **Google Cloud Dataset:** https://cloud.google.com/blog/products/ai-machine-learning/alphafold-protein-structure-database\r\n- **3D-Beacons API:** https://www.ebi.ac.uk/pdbe/pdbe-kb/3dbeacons/\r\n- **AlphaFold Papers:**\r\n  - Nature (2021): https://doi.org/10.1038/s41586-021-03819-2\r\n  - Nucleic Acids Research (2024): https://doi.org/10.1093/nar/gkad1011\r\n- **Biopython Documentation:** https://biopython.org/docs/dev/api/Bio.PDB.alphafold_db.html\r\n- **GitHub Repository:** https://github.com/google-deepmind/alphafold",
    "Confidence Interpretation Guidelines": "**pLDDT Thresholds:**\r\n- **>90**: Very high confidence - suitable for detailed analysis\r\n- **70-90**: High confidence - generally reliable backbone structure\r\n- **50-70**: Low confidence - use with caution, flexible regions\r\n- **<50**: Very low confidence - likely disordered or unreliable\r\n\r\n**PAE Guidelines:**\r\n- **<5 Å**: Confident relative positioning of domains\r\n- **5-10 Å**: Moderate confidence in arrangement\r\n- **>15 Å**: Uncertain relative positions, domains may be mobile",
    "Overview": "AlphaFold DB is a public repository of AI-predicted 3D protein structures for over 200 million proteins, maintained by DeepMind and EMBL-EBI. Access structure predictions with confidence metrics, download coordinate files, retrieve bulk datasets, and integrate predictions into computational workflows.",
    "Installation and Setup": "af_structures = [s for s in data['structures'] if s['provider'] == 'AlphaFold DB']\r\n```",
    "When to Use This Skill": "This skill should be used when working with AI-predicted protein structures in scenarios such as:\r\n\r\n- Retrieving protein structure predictions by UniProt ID or protein name\r\n- Downloading PDB/mmCIF coordinate files for structural analysis\r\n- Analyzing prediction confidence metrics (pLDDT, PAE) to assess reliability\r\n- Accessing bulk proteome datasets via Google Cloud Platform\r\n- Comparing predicted structures with experimental data\r\n- Performing structure-based drug discovery or protein engineering\r\n- Building structural models for proteins lacking experimental structures\r\n- Integrating AlphaFold predictions into computational pipelines",
    "Important Notes": "### Data Usage and Attribution\r\n\r\n- AlphaFold DB is freely available under CC-BY-4.0 license\r\n- Cite: Jumper et al. (2021) Nature and Varadi et al. (2022) Nucleic Acids Research\r\n- Predictions are computational models, not experimental structures\r\n- Always assess confidence metrics before downstream analysis\r\n\r\n### Version Management\r\n\r\n- Current database version: v4 (as of 2024-2025)\r\n- File URLs include version suffix (e.g., `_v4.cif`)\r\n- Check for database updates regularly\r\n- Older versions may be deprecated over time\r\n\r\n### Data Quality Considerations\r\n\r\n- High pLDDT doesn't guarantee functional accuracy\r\n- Low confidence regions may be disordered in vivo\r\n- PAE indicates relative domain confidence, not absolute positioning\r\n- Predictions lack ligands, post-translational modifications, and cofactors\r\n- Multi-chain complexes are not predicted (single chains only)\r\n\r\n### Performance Tips\r\n\r\n- Use Biopython for simple single-protein access\r\n- Use Google Cloud for bulk downloads (much faster than individual files)\r\n- Cache downloaded files locally to avoid repeated downloads\r\n- BigQuery free tier: 1 TB processed data per month\r\n- Consider network bandwidth for large-scale downloads",
    "Common Use Cases": "### Structural Proteomics\r\n- Download complete proteome predictions for analysis\r\n- Identify high-confidence structural regions across proteins\r\n- Compare predicted structures with experimental data\r\n- Build structural models for protein families\r\n\r\n### Drug Discovery\r\n- Retrieve target protein structures for docking studies\r\n- Analyze binding site conformations\r\n- Identify druggable pockets in predicted structures\r\n- Compare structures across homologs\r\n\r\n### Protein Engineering\r\n- Identify stable/unstable regions using pLDDT\r\n- Design mutations in high-confidence regions\r\n- Analyze domain architectures using PAE\r\n- Model protein variants and mutations\r\n\r\n### Evolutionary Studies\r\n- Compare ortholog structures across species\r\n- Analyze conservation of structural features\r\n- Study domain evolution patterns\r\n- Identify functionally important regions",
    "Core Capabilities": "df = pd.DataFrame(results)\r\nprint(df)\r\n```",
    "Resources": "### references/api_reference.md\r\n\r\nComprehensive API documentation covering:\r\n- Complete REST API endpoint specifications\r\n- File format details and data schemas\r\n- Google Cloud dataset structure and access patterns\r\n- Advanced query examples and batch processing strategies\r\n- Rate limiting, caching, and best practices\r\n- Troubleshooting common issues\r\n\r\nConsult this reference for detailed API information, bulk download strategies, or when working with large-scale datasets.",
    "Key Concepts": "**UniProt Accession:** Primary identifier for proteins (e.g., \"P00520\"). Required for querying AlphaFold DB.\r\n\r\n**AlphaFold ID:** Internal identifier format: `AF-[UniProt accession]-F[fragment number]` (e.g., \"AF-P00520-F1\").\r\n\r\n**pLDDT (predicted Local Distance Difference Test):** Per-residue confidence metric (0-100). Higher values indicate more confident predictions.\r\n\r\n**PAE (Predicted Aligned Error):** Matrix indicating confidence in relative positions between residue pairs. Low values (<5 Å) suggest confident relative positioning.\r\n\r\n**Database Version:** Current version is v4. File URLs include version suffix (e.g., `model_v4.cif`).\r\n\r\n**Fragment Number:** Large proteins may be split into fragments. Fragment number appears in AlphaFold ID (e.g., F1, F2)."
  }
}